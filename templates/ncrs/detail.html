{{define "content"}}
<div class="mb-4">
  <a href="/ncr" class="text-sm text-blue-600 hover:underline">← Back to NCRs</a>
</div>

<div class="card">
  <div class="flex justify-between items-start mb-4">
    <div>
      <h2 class="text-lg font-semibold">{{.NCR.ID}}: {{.NCR.Title}}</h2>
    </div>
    <div class="flex gap-2">
      <span class="badge badge-{{.NCR.Severity}}">{{.NCR.Severity}}</span>
      <span class="badge badge-{{.NCR.Status}}">{{.NCR.Status}}</span>
    </div>
  </div>

  <p class="text-sm mb-4">{{.NCR.Description}}</p>

  <div class="detail-grid mb-4">
    <div>
      <div class="detail-label">IPN</div>
      <div class="detail-value">{{if .NCR.IPN}}<a href="/parts/{{.NCR.IPN}}" class="text-blue-600">{{.NCR.IPN}}</a>{{else}}—{{end}}</div>
    </div>
    <div>
      <div class="detail-label">Serial Number</div>
      <div class="detail-value">{{if .NCR.SerialNumber}}{{.NCR.SerialNumber}}{{else}}—{{end}}</div>
    </div>
    <div>
      <div class="detail-label">Defect Type</div>
      <div class="detail-value">{{if .NCR.DefectType}}{{.NCR.DefectType}}{{else}}—{{end}}</div>
    </div>
    <div>
      <div class="detail-label">Created</div>
      <div class="detail-value">{{formatDate .NCR.CreatedAt}}</div>
    </div>
    <div>
      <div class="detail-label">Resolved</div>
      <div class="detail-value">{{if .NCR.ResolvedAt}}{{formatDate (deref .NCR.ResolvedAt)}}{{else}}—{{end}}</div>
    </div>
  </div>

  {{if .NCR.RootCause}}
  <div class="mb-4">
    <div class="detail-label">Root Cause</div>
    <p class="text-sm">{{.NCR.RootCause}}</p>
  </div>
  {{end}}

  {{if .NCR.CorrectiveAction}}
  <div class="mb-4">
    <div class="detail-label">Corrective Action</div>
    <p class="text-sm">{{.NCR.CorrectiveAction}}</p>
  </div>
  {{end}}
</div>
{{end}}
