{{define "procurement-new-form"}}
<div class="p-6">
  <h3 class="text-lg font-semibold mb-4">New Purchase Order</h3>
  <form hx-post="/procurement" hx-target="#modal-content" hx-swap="innerHTML" class="space-y-4">
    <div>
      <label class="label">Vendor</label>
      <select name="vendor_id" class="input" required>
        <option value="">Select vendor...</option>
        {{range .Vendors}}
        <option value="{{.ID}}">{{.Name}}</option>
        {{end}}
      </select>
    </div>
    
    <div>
      <label class="label">Expected Date</label>
      <input name="expected_date" type="date" class="input">
    </div>
    
    <div>
      <label class="label">Notes</label>
      <textarea name="notes" class="input" rows="2"></textarea>
    </div>
    
    <div class="flex gap-2">
      <button type="submit" class="btn btn-primary">Create PO</button>
      <button type="button" onclick="document.getElementById('modal').classList.add('hidden')" class="btn btn-secondary">Cancel</button>
    </div>
  </form>
</div>
{{end}}

{{define "procurement-generate-wo-form"}}
<div class="p-6">
  <h3 class="text-lg font-semibold mb-4">Generate PO from WO Shortages</h3>
  <form hx-post="/procurement/generate-from-wo" hx-target="#modal-content" hx-swap="innerHTML" class="space-y-4">
    <div>
      <label class="label">Work Order</label>
      <select name="wo_id" class="input" required>
        <option value="">Select work order...</option>
        {{range .WorkOrders}}
        <option value="{{.ID}}">{{.ID}} — {{.AssemblyIPN}} (×{{.Qty}}) [{{.Status}}]</option>
        {{end}}
      </select>
    </div>
    
    <div>
      <label class="label">Vendor (optional)</label>
      <select name="vendor_id" class="input">
        <option value="">No vendor</option>
        {{range .Vendors}}
        <option value="{{.ID}}">{{.Name}}</option>
        {{end}}
      </select>
    </div>
    
    <div class="flex gap-2">
      <button type="submit" class="btn btn-primary">Generate PO</button>
      <button type="button" onclick="document.getElementById('modal').classList.add('hidden')" class="btn btn-secondary">Cancel</button>
    </div>
  </form>
</div>
{{end}}

{{define "procurement-create-success"}}
<div class="p-6 text-center space-y-4">
  <div class="text-green-600">
    <svg class="w-12 h-12 mx-auto mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
    </svg>
    <h3 class="text-lg font-semibold">PO {{.PO.ID}} Created!</h3>
  </div>
  <button onclick="document.getElementById('modal').classList.add('hidden'); location.reload()" 
          class="btn btn-primary">Close</button>
</div>
{{end}}

{{define "procurement-generate-success"}}
<div class="p-6 text-center space-y-4">
  <div class="text-green-600">
    <svg class="w-12 h-12 mx-auto mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
    </svg>
    <h3 class="text-lg font-semibold">PO Generated!</h3>
    <p class="text-gray-600">PO {{.PO.ID}} created with {{len .PO.Lines}} lines</p>
  </div>
  <div class="flex gap-2 justify-center">
    <button onclick="document.getElementById('modal').classList.add('hidden'); location.reload()" 
            class="btn btn-secondary">Close</button>
    <button hx-get="/procurement/{{.PO.ID}}" hx-target="#modal-content" hx-swap="innerHTML"
            class="btn btn-primary">View PO</button>
  </div>
</div>
{{end}}