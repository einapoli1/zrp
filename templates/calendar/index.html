{{define "content"}}
<div id="calendar-content">
  {{template "calendar-content" .}}
</div>
{{end}}

{{define "calendar-content"}}
<div class="card">
  <div class="flex justify-between items-center mb-4">
    <button class="btn btn-secondary"
            hx-get="/calendar?year={{if eq .Month 1}}{{minus .Year 1}}{{else}}{{.Year}}{{end}}&month={{if eq .Month 1}}12{{else}}{{minus .Month 1}}{{end}}"
            hx-target="#calendar-content" hx-swap="innerHTML">← Prev</button>
    <h2 class="text-lg font-semibold">{{.MonthName}} {{.Year}}</h2>
    <button class="btn btn-secondary"
            hx-get="/calendar?year={{if eq .Month 12}}{{plus .Year 1}}{{else}}{{.Year}}{{end}}&month={{if eq .Month 12}}1{{else}}{{plus .Month 1}}{{end}}"
            hx-target="#calendar-content" hx-swap="innerHTML">Next →</button>
  </div>

  <div class="cal-grid text-center">
    <div class="px-2 py-1 font-medium text-gray-500 text-xs">Sun</div>
    <div class="px-2 py-1 font-medium text-gray-500 text-xs">Mon</div>
    <div class="px-2 py-1 font-medium text-gray-500 text-xs">Tue</div>
    <div class="px-2 py-1 font-medium text-gray-500 text-xs">Wed</div>
    <div class="px-2 py-1 font-medium text-gray-500 text-xs">Thu</div>
    <div class="px-2 py-1 font-medium text-gray-500 text-xs">Fri</div>
    <div class="px-2 py-1 font-medium text-gray-500 text-xs">Sat</div>

    {{range .CalendarData.Weeks}}
      {{range .}}
      <div class="cal-cell {{if .Today}}today{{end}}">
        {{if .InMonth}}
        <div class="cal-day">{{.Day}}</div>
        {{range .Events}}
        <div class="cal-event {{.Type}}" title="{{.Title}}">{{.Title}}</div>
        {{end}}
        {{end}}
      </div>
      {{end}}
    {{end}}
  </div>
</div>
{{end}}
