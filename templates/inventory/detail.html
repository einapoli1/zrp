{{define "content"}}
<div class="mb-4">
  <a href="/inventory" class="text-sm text-blue-600 hover:underline">← Back to Inventory</a>
</div>

<div class="card mb-4">
  <div class="flex justify-between items-start mb-4">
    <h2 class="text-lg font-semibold">{{.InvItem.IPN}}</h2>
    {{if and (gt .InvItem.ReorderPoint 0) (le .InvItem.QtyOnHand .InvItem.ReorderPoint)}}
    <span class="badge badge-critical">Low Stock</span>
    {{end}}
  </div>
  <p class="text-gray-500 mb-4">{{.InvItem.Description}}</p>

  <div class="detail-grid">
    <div>
      <div class="detail-label">Qty On Hand</div>
      <div class="detail-value text-xl font-bold">{{printf "%.0f" .InvItem.QtyOnHand}}</div>
    </div>
    <div>
      <div class="detail-label">Qty Reserved</div>
      <div class="detail-value">{{printf "%.0f" .InvItem.QtyReserved}}</div>
    </div>
    <div>
      <div class="detail-label">Location</div>
      <div class="detail-value">{{if .InvItem.Location}}{{.InvItem.Location}}{{else}}—{{end}}</div>
    </div>
    <div>
      <div class="detail-label">MPN</div>
      <div class="detail-value">{{if .InvItem.MPN}}{{.InvItem.MPN}}{{else}}—{{end}}</div>
    </div>
    <div>
      <div class="detail-label">Reorder Point</div>
      <div class="detail-value">{{printf "%.0f" .InvItem.ReorderPoint}}</div>
    </div>
    <div>
      <div class="detail-label">Reorder Qty</div>
      <div class="detail-value">{{printf "%.0f" .InvItem.ReorderQty}}</div>
    </div>
  </div>
</div>

<div class="card">
  <h3 class="text-base font-semibold mb-3">Transaction History</h3>
  <table class="w-full text-sm">
    <thead>
      <tr class="border-b border-gray-200 dark:border-gray-700 text-left">
        <th class="px-3 py-2 font-medium text-gray-500">Date</th>
        <th class="px-3 py-2 font-medium text-gray-500">Type</th>
        <th class="px-3 py-2 font-medium text-gray-500 text-right">Qty</th>
        <th class="px-3 py-2 font-medium text-gray-500">Reference</th>
        <th class="px-3 py-2 font-medium text-gray-500">Notes</th>
      </tr>
    </thead>
    <tbody>
      {{range .Transactions}}
      <tr class="border-b border-gray-100 dark:border-gray-700">
        <td class="px-3 py-2 text-gray-500">{{formatDate .CreatedAt}}</td>
        <td class="px-3 py-2"><span class="badge badge-{{.Type}}">{{.Type}}</span></td>
        <td class="px-3 py-2 text-right font-medium">{{printf "%.0f" .Qty}}</td>
        <td class="px-3 py-2">{{.Reference}}</td>
        <td class="px-3 py-2 text-gray-500">{{.Notes}}</td>
      </tr>
      {{else}}
      <tr><td colspan="5" class="px-3 py-4 text-center text-gray-400">No transactions yet</td></tr>
      {{end}}
    </tbody>
  </table>
</div>
{{end}}
