{{define "content"}}
<div class="mb-4">
  <a href="/parts" class="text-blue-600 hover:underline text-sm">&larr; Back to Parts</a>
</div>

<div class="card mb-6">
  <div class="flex items-center justify-between mb-4">
    <h2 class="text-xl font-bold font-mono">{{.Part.IPN}}</h2>
    <span class="badge badge-active">{{index .Part.Fields "_category"}}</span>
  </div>
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
    {{range $key, $val := .Part.Fields}}
    {{if and (ne $key "_category") (ne $key "ipn") (ne $key "IPN")}}
    <div>
      <label class="label">{{$key}}</label>
      <p class="text-sm text-gray-800 dark:text-gray-200">{{if $val}}{{$val}}{{else}}&mdash;{{end}}</p>
    </div>
    {{end}}
    {{end}}
  </div>
</div>

{{if .HasBOM}}
<div class="card mb-6">
  <h3 class="text-lg font-semibold mb-4">Bill of Materials</h3>
  <div id="bom-tree" hx-get="/parts/{{.Part.IPN}}/bom" hx-trigger="load" hx-swap="innerHTML">
    <div class="text-gray-400 text-sm">Loading BOM...</div>
  </div>
</div>
{{end}}

{{if .Cost}}
<div class="card">
  <h3 class="text-lg font-semibold mb-4">Cost Info</h3>
  <div class="grid grid-cols-2 gap-4 text-sm">
    {{if .Cost.LastUnitPrice}}<div><span class="label">Last Unit Price</span><p>${{printf "%.4f" .Cost.LastUnitPrice}}</p></div>{{end}}
    {{if .Cost.BOMCost}}<div><span class="label">BOM Cost</span><p>${{printf "%.2f" .Cost.BOMCost}}</p></div>{{end}}
  </div>
</div>
{{end}}
{{end}}
