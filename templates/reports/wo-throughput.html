{{define "wo-throughput-report"}}
<div class="card">
  <div class="flex justify-between items-center mb-4">
    <div class="flex items-center gap-3">
      <button class="btn btn-secondary" hx-get="/reports" hx-target="#main-content" hx-swap="innerHTML">‚Üê Back</button>
      <h2 class="text-lg font-semibold">WO Throughput</h2>
    </div>
    <a href="/api/v1/reports/wo-throughput?format=csv&days={{.Days}}" target="_blank" class="btn btn-secondary">üì• Export CSV</a>
  </div>

  <!-- Days Filter -->
  <div class="flex gap-2 mb-4">
    <button class="btn {{if eq .Days 30}}btn-primary{{else}}btn-secondary{{end}}"
            hx-get="/reports/wo-throughput?days=30" hx-target="#main-content" hx-swap="innerHTML">30 Days</button>
    <button class="btn {{if eq .Days 60}}btn-primary{{else}}btn-secondary{{end}}"
            hx-get="/reports/wo-throughput?days=60" hx-target="#main-content" hx-swap="innerHTML">60 Days</button>
    <button class="btn {{if eq .Days 90}}btn-primary{{else}}btn-secondary{{end}}"
            hx-get="/reports/wo-throughput?days=90" hx-target="#main-content" hx-swap="innerHTML">90 Days</button>
  </div>

  <!-- KPI Cards -->
  <div class="grid grid-cols-2 md:grid-cols-3 gap-4 mb-4">
    <div class="bg-blue-50 dark:bg-gray-700 rounded-lg p-4">
      <div class="text-2xl font-bold">{{.ReportData.TotalCompleted}}</div>
      <div class="text-sm text-gray-500">Completed</div>
    </div>
    <div class="bg-green-50 dark:bg-gray-700 rounded-lg p-4">
      <div class="text-2xl font-bold">{{printf "%.1f" .ReportData.AvgCycleTimeDays}}</div>
      <div class="text-sm text-gray-500">Avg Cycle (Days)</div>
    </div>
  </div>

  <!-- Status Breakdown -->
  {{if .ReportData.CountByStatus}}
  <h3 class="font-semibold mb-2">By Status</h3>
  <table class="w-full text-sm">
    <tbody>
      {{range $status, $count := .ReportData.CountByStatus}}
      <tr class="border-b border-gray-100">
        <td class="py-1">
          {{if eq $status "completed"}}
            <span class="badge badge-completed">Completed</span>
          {{else if eq $status "in_progress"}}
            <span class="badge badge-in_progress">In Progress</span>
          {{else if eq $status "open"}}
            <span class="badge badge-open">Open</span>
          {{else}}
            <span class="badge badge-secondary">{{$status}}</span>
          {{end}}
        </td>
        <td class="py-1 text-right font-medium">{{$count}}</td>
      </tr>
      {{end}}
    </tbody>
  </table>
  {{end}}
</div>
{{end}}