{{define "low-stock-report"}}
<div class="card">
  <div class="flex justify-between items-center mb-4">
    <div class="flex items-center gap-3">
      <button class="btn btn-secondary" hx-get="/reports" hx-target="#main-content" hx-swap="innerHTML">‚Üê Back</button>
      <h2 class="text-lg font-semibold">Low Stock Report</h2>
    </div>
    <a href="/api/v1/reports/low-stock?format=csv" target="_blank" class="btn btn-secondary">üì• Export CSV</a>
  </div>

  {{if .ReportData}}
  <div class="overflow-x-auto">
    <table class="w-full text-sm">
      <thead>
        <tr class="border-b text-left text-gray-500">
          <th class="pb-2">IPN</th>
          <th class="pb-2">Description</th>
          <th class="pb-2 text-right">On Hand</th>
          <th class="pb-2 text-right">Reorder Point</th>
          <th class="pb-2 text-right">Suggested Order</th>
          <th class="pb-2"></th>
        </tr>
      </thead>
      <tbody>
        {{range .ReportData}}
        <tr class="border-b border-gray-100">
          <td class="py-2 font-mono">{{.IPN}}</td>
          <td class="py-2">{{.Description}}</td>
          <td class="py-2 text-right text-red-600 font-medium">{{printf "%.0f" .QtyOnHand}}</td>
          <td class="py-2 text-right">{{printf "%.0f" .ReorderPoint}}</td>
          <td class="py-2 text-right font-medium">{{printf "%.0f" .SuggestedOrder}}</td>
          <td class="py-2">
            <button class="text-blue-600 text-xs hover:underline" 
                    onclick="window.location='/procurement'">Create PO ‚Üí</button>
          </td>
        </tr>
        {{end}}
      </tbody>
    </table>
  </div>
  {{else}}
  <div class="text-center py-8">
    <div class="text-green-600 text-2xl mb-2">‚úÖ</div>
    <p class="text-green-600 font-medium">All items above reorder point</p>
    <p class="text-sm text-gray-500 mt-1">Inventory levels look good!</p>
  </div>
  {{end}}
</div>
{{end}}