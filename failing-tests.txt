--- FAIL: TestCAPACRUD (0.05s)
=== RUN   TestCAPACloseRequiresEffectivenessAndApproval
audit log error: SQL logic error: no such table: audit_log (1)
audit log error: SQL logic error: no such table: audit_log (1)
--- PASS: TestCAPACloseRequiresEffectivenessAndApproval (0.05s)
=== RUN   TestCAPADashboard
--
--- FAIL: TestCAPADashboard (0.00s)
=== RUN   TestCAPAGetNotFound
--- PASS: TestCAPAGetNotFound (0.00s)
=== RUN   TestCAPAPreventiveType
audit log error: SQL logic error: no such table: audit_log (1)
--- PASS: TestCAPAPreventiveType (0.00s)
--
--- FAIL: TestLogDataExport (0.00s)
=== RUN   TestFieldReportCRUD
--- PASS: TestFieldReportCRUD (0.00s)
=== RUN   TestFieldReportGetNotFound
--- PASS: TestFieldReportGetNotFound (0.00s)
=== RUN   TestFieldReportCreateInvalidBody
--
--- FAIL: TestHandleLaunchCampaign_Success (0.00s)
=== RUN   TestHandleCampaignProgress
--- PASS: TestHandleCampaignProgress (0.00s)
=== RUN   TestHandleMarkCampaignDevice_Success
=== RUN   TestHandleMarkCampaignDevice_Success/Mark_as_updated
=== RUN   TestHandleMarkCampaignDevice_Success/Mark_as_failed
--
--- FAIL: TestHandleGetGitPLMConfig_WithConfig (0.00s)
=== RUN   TestHandleUpdateGitPLMConfig_Create
    handler_gitplm_granular_test.go:114: Expected URL 'https://gitplm.example.com', got ""
--- FAIL: TestHandleUpdateGitPLMConfig_Create (0.00s)
=== RUN   TestHandleUpdateGitPLMConfig_TrimSlash
    handler_gitplm_granular_test.go:142: Expected trailing slash trimmed, got ""
--- FAIL: TestHandleUpdateGitPLMConfig_TrimSlash (0.00s)
=== RUN   TestHandleGetGitPLMURL_NotConfigured
--- PASS: TestHandleGetGitPLMURL_NotConfigured (0.00s)
=== RUN   TestHandleGetGitPLMURL_Configured
    handler_gitplm_granular_test.go:195: Expected Configured=true
    handler_gitplm_granular_test.go:200: Expected URL "https://gitplm.example.com/parts/RES-0001", got ""
--- FAIL: TestHandleGetGitPLMURL_Configured (0.00s)
=== RUN   TestGetGitPLMConfigDefault
--- PASS: TestGetGitPLMConfigDefault (0.05s)
=== RUN   TestUpdateAndGetGitPLMConfig
--- PASS: TestUpdateAndGetGitPLMConfig (0.05s)
=== RUN   TestUpdateGitPLMConfigOverwrite
--
--- FAIL: TestUserEmailValidation (0.00s)
    --- FAIL: TestUserEmailValidation/Empty_email (0.00s)
    --- FAIL: TestUserEmailValidation/Valid_email (0.00s)
    --- PASS: TestUserEmailValidation/Invalid_format (0.00s)
    --- FAIL: TestUserEmailValidation/Very_long_valid_email (0.00s)
    --- PASS: TestUserEmailValidation/Exceeds_max_(255) (0.00s)
--
--- FAIL: TestHandleCreateCAPAFromNCR_Success (0.00s)
=== RUN   TestHandleCreateCAPAFromNCR_AutoPopulate
    handler_ncr_integration_test.go:231: Expected auto-populated title 'CAPA for NCR NCR-002: Paint Defect', got 
    handler_ncr_integration_test.go:236: Expected root_cause 'Spray gun malfunction', got 
    handler_ncr_integration_test.go:241: Expected action_plan 'Replace spray nozzle', got 
    handler_ncr_integration_test.go:246: Expected default type 'corrective', got 
--- FAIL: TestHandleCreateCAPAFromNCR_AutoPopulate (0.00s)
=== RUN   TestHandleCreateCAPAFromNCR_EmptyBody
    handler_ncr_integration_test.go:280: Expected auto-populated title 'CAPA for NCR NCR-003: Test Defect', got 
--- FAIL: TestHandleCreateCAPAFromNCR_EmptyBody (0.00s)
=== RUN   TestHandleCreateCAPAFromNCR_NCRNotFound
--- PASS: TestHandleCreateCAPAFromNCR_NCRNotFound (0.00s)
=== RUN   TestHandleCreateCAPAFromNCR_InvalidJSON
--- PASS: TestHandleCreateCAPAFromNCR_InvalidJSON (0.00s)
=== RUN   TestHandleCreateECOFromNCR_Success
--- FAIL: TestHandleCreateECOFromNCR_Success (0.00s)
panic: interface conversion: interface {} is nil, not string [recovered]
	panic: interface conversion: interface {} is nil, not string

goroutine 1505 [running]:
testing.tRunner.func1.2({0x102c848a0, 0x14000957890})
