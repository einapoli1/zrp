=== RUN   TestAPIContractRoutes
--- PASS: TestAPIContractRoutes (0.01s)
=== RUN   TestFrontendRoutesExistInBackend
--- PASS: TestFrontendRoutesExistInBackend (0.00s)
=== RUN   TestOpenAPISpecValid
    api_contract_test.go:127: OpenAPI spec: 135 paths, 187 endpoints
--- PASS: TestOpenAPISpecValid (0.00s)
=== RUN   TestAPIHealth
=== RUN   TestAPIHealth/Health_Check
=== RUN   TestAPIHealth/Login
=== RUN   TestAPIHealth/Me
=== RUN   TestAPIHealth/Global_Search
=== RUN   TestAPIHealth/Scan_Lookup
=== RUN   TestAPIHealth/Dashboard
=== RUN   TestAPIHealth/Dashboard_Charts
=== RUN   TestAPIHealth/Low_Stock_Alerts
=== RUN   TestAPIHealth/Get_Dashboard_Widgets
=== RUN   TestAPIHealth/Audit_Log
=== RUN   TestAPIHealth/List_Parts
=== RUN   TestAPIHealth/List_Categories
=== RUN   TestAPIHealth/Check_IPN
=== RUN   TestAPIHealth/Get_Part
=== RUN   TestAPIHealth/Part_BOM
=== RUN   TestAPIHealth/Part_Cost
=== RUN   TestAPIHealth/Part_Where_Used
=== RUN   TestAPIHealth/Part_Changes
=== RUN   TestAPIHealth/List_All_Part_Changes
=== RUN   TestAPIHealth/List_Categories_2
=== RUN   TestAPIHealth/Calendar
=== RUN   TestAPIHealth/List_ECOs
=== RUN   TestAPIHealth/Get_ECO
=== RUN   TestAPIHealth/ECO_Part_Changes
=== RUN   TestAPIHealth/ECO_Revisions
=== RUN   TestAPIHealth/List_Docs
=== RUN   TestAPIHealth/Get_Doc
=== RUN   TestAPIHealth/Doc_Versions
=== RUN   TestAPIHealth/List_Vendors
=== RUN   TestAPIHealth/Get_Vendor
=== RUN   TestAPIHealth/List_Inventory
=== RUN   TestAPIHealth/Get_Inventory
=== RUN   TestAPIHealth/Inventory_History
=== RUN   TestAPIHealth/List_POs
=== RUN   TestAPIHealth/Get_PO
=== RUN   TestAPIHealth/List_Receiving
=== RUN   TestAPIHealth/List_Work_Orders
=== RUN   TestAPIHealth/Get_Work_Order
=== RUN   TestAPIHealth/Work_Order_BOM
=== RUN   TestAPIHealth/List_Tests
=== RUN   TestAPIHealth/List_NCRs
=== RUN   TestAPIHealth/Get_NCR
=== RUN   TestAPIHealth/List_Devices
=== RUN   TestAPIHealth/Get_Device
=== RUN   TestAPIHealth/Device_History
=== RUN   TestAPIHealth/Export_Devices
=== RUN   TestAPIHealth/List_Campaigns
=== RUN   TestAPIHealth/Get_Campaign
=== RUN   TestAPIHealth/Campaign_Progress
=== RUN   TestAPIHealth/Campaign_Devices
=== RUN   TestAPIHealth/List_Firmware
=== RUN   TestAPIHealth/List_Shipments
=== RUN   TestAPIHealth/Get_Shipment
=== RUN   TestAPIHealth/CAPA_Dashboard
=== RUN   TestAPIHealth/List_CAPAs
=== RUN   TestAPIHealth/Get_CAPA
=== RUN   TestAPIHealth/List_RMAs
=== RUN   TestAPIHealth/Get_RMA
=== RUN   TestAPIHealth/List_Quotes
=== RUN   TestAPIHealth/Get_Quote
=== RUN   TestAPIHealth/Quote_Cost
=== RUN   TestAPIHealth/List_API_Keys
=== RUN   TestAPIHealth/List_API_Keys_Alt
=== RUN   TestAPIHealth/List_Users
=== RUN   TestAPIHealth/List_Permissions
=== RUN   TestAPIHealth/List_Modules
=== RUN   TestAPIHealth/My_Permissions
=== RUN   TestAPIHealth/List_Attachments
=== RUN   TestAPIHealth/Get_Email_Config
=== RUN   TestAPIHealth/Get_Email_Subscriptions
=== RUN   TestAPIHealth/Email_Log
=== RUN   TestAPIHealth/General_Settings
=== RUN   TestAPIHealth/GitPLM_Settings
=== RUN   TestAPIHealth/Git_Docs_Settings
=== RUN   TestAPIHealth/Distributor_Settings
=== RUN   TestAPIHealth/Email_Settings
=== RUN   TestAPIHealth/Config
=== RUN   TestAPIHealth/Inventory_Valuation_Report
=== RUN   TestAPIHealth/Open_ECOs_Report
=== RUN   TestAPIHealth/WO_Throughput_Report
=== RUN   TestAPIHealth/Low_Stock_Report
=== RUN   TestAPIHealth/NCR_Summary_Report
=== RUN   TestAPIHealth/List_Notifications
=== RUN   TestAPIHealth/Notification_Preferences
=== RUN   TestAPIHealth/Notification_Types
=== RUN   TestAPIHealth/List_RFQs
=== RUN   TestAPIHealth/Get_RFQ
=== RUN   TestAPIHealth/RFQ_Compare
=== RUN   TestAPIHealth/RFQ_Email_Body
=== RUN   TestAPIHealth/RFQ_Dashboard
=== RUN   TestAPIHealth/List_Product_Pricing
=== RUN   TestAPIHealth/List_Cost_Analysis
=== RUN   TestAPIHealth/Get_Product_Pricing
=== RUN   TestAPIHealth/Product_Pricing_History
=== RUN   TestAPIHealth/Recent_Changes
=== RUN   TestAPIHealth/List_Undo
=== RUN   TestAPIHealth/List_Backups
=== RUN   TestAPIHealth/List_Field_Reports
=== RUN   TestAPIHealth/Get_Field_Report
=== RUN   TestAPIHealth/List_Sales_Orders
=== RUN   TestAPIHealth/Get_Sales_Order
=== RUN   TestAPIHealth/List_Invoices
=== RUN   TestAPIHealth/Get_Invoice
--- PASS: TestAPIHealth (0.13s)
    --- PASS: TestAPIHealth/Health_Check (0.00s)
    --- PASS: TestAPIHealth/Login (0.05s)
    --- PASS: TestAPIHealth/Me (0.00s)
    --- PASS: TestAPIHealth/Global_Search (0.00s)
    --- PASS: TestAPIHealth/Scan_Lookup (0.00s)
    --- PASS: TestAPIHealth/Dashboard (0.00s)
    --- PASS: TestAPIHealth/Dashboard_Charts (0.00s)
    --- PASS: TestAPIHealth/Low_Stock_Alerts (0.00s)
    --- PASS: TestAPIHealth/Get_Dashboard_Widgets (0.00s)
    --- PASS: TestAPIHealth/Audit_Log (0.00s)
    --- PASS: TestAPIHealth/List_Parts (0.00s)
    --- PASS: TestAPIHealth/List_Categories (0.00s)
    --- PASS: TestAPIHealth/Check_IPN (0.00s)
    --- PASS: TestAPIHealth/Get_Part (0.00s)
    --- PASS: TestAPIHealth/Part_BOM (0.00s)
    --- PASS: TestAPIHealth/Part_Cost (0.00s)
    --- PASS: TestAPIHealth/Part_Where_Used (0.00s)
    --- PASS: TestAPIHealth/Part_Changes (0.00s)
    --- PASS: TestAPIHealth/List_All_Part_Changes (0.00s)
    --- PASS: TestAPIHealth/List_Categories_2 (0.00s)
    --- PASS: TestAPIHealth/Calendar (0.00s)
    --- PASS: TestAPIHealth/List_ECOs (0.00s)
    --- PASS: TestAPIHealth/Get_ECO (0.00s)
    --- PASS: TestAPIHealth/ECO_Part_Changes (0.00s)
    --- PASS: TestAPIHealth/ECO_Revisions (0.00s)
    --- PASS: TestAPIHealth/List_Docs (0.00s)
    --- PASS: TestAPIHealth/Get_Doc (0.00s)
    --- PASS: TestAPIHealth/Doc_Versions (0.00s)
    --- PASS: TestAPIHealth/List_Vendors (0.00s)
    --- PASS: TestAPIHealth/Get_Vendor (0.00s)
    --- PASS: TestAPIHealth/List_Inventory (0.00s)
    --- PASS: TestAPIHealth/Get_Inventory (0.00s)
    --- PASS: TestAPIHealth/Inventory_History (0.00s)
    --- PASS: TestAPIHealth/List_POs (0.00s)
    --- PASS: TestAPIHealth/Get_PO (0.00s)
    --- PASS: TestAPIHealth/List_Receiving (0.00s)
    --- PASS: TestAPIHealth/List_Work_Orders (0.00s)
    --- PASS: TestAPIHealth/Get_Work_Order (0.00s)
    --- PASS: TestAPIHealth/Work_Order_BOM (0.00s)
    --- PASS: TestAPIHealth/List_Tests (0.00s)
    --- PASS: TestAPIHealth/List_NCRs (0.00s)
    --- PASS: TestAPIHealth/Get_NCR (0.00s)
    --- PASS: TestAPIHealth/List_Devices (0.00s)
    --- PASS: TestAPIHealth/Get_Device (0.00s)
    --- PASS: TestAPIHealth/Device_History (0.00s)
    --- PASS: TestAPIHealth/Export_Devices (0.00s)
    --- PASS: TestAPIHealth/List_Campaigns (0.00s)
    --- PASS: TestAPIHealth/Get_Campaign (0.00s)
    --- PASS: TestAPIHealth/Campaign_Progress (0.00s)
    --- PASS: TestAPIHealth/Campaign_Devices (0.00s)
    --- PASS: TestAPIHealth/List_Firmware (0.00s)
    --- PASS: TestAPIHealth/List_Shipments (0.00s)
    --- PASS: TestAPIHealth/Get_Shipment (0.00s)
    --- PASS: TestAPIHealth/CAPA_Dashboard (0.00s)
    --- PASS: TestAPIHealth/List_CAPAs (0.00s)
    --- PASS: TestAPIHealth/Get_CAPA (0.00s)
    --- PASS: TestAPIHealth/List_RMAs (0.00s)
    --- PASS: TestAPIHealth/Get_RMA (0.00s)
    --- PASS: TestAPIHealth/List_Quotes (0.00s)
    --- PASS: TestAPIHealth/Get_Quote (0.00s)
    --- PASS: TestAPIHealth/Quote_Cost (0.00s)
    --- PASS: TestAPIHealth/List_API_Keys (0.00s)
    --- PASS: TestAPIHealth/List_API_Keys_Alt (0.00s)
    --- PASS: TestAPIHealth/List_Users (0.00s)
    --- PASS: TestAPIHealth/List_Permissions (0.00s)
    --- PASS: TestAPIHealth/List_Modules (0.00s)
    --- PASS: TestAPIHealth/My_Permissions (0.00s)
    --- PASS: TestAPIHealth/List_Attachments (0.00s)
    --- PASS: TestAPIHealth/Get_Email_Config (0.00s)
    --- PASS: TestAPIHealth/Get_Email_Subscriptions (0.00s)
    --- PASS: TestAPIHealth/Email_Log (0.00s)
    --- PASS: TestAPIHealth/General_Settings (0.00s)
    --- PASS: TestAPIHealth/GitPLM_Settings (0.00s)
    --- PASS: TestAPIHealth/Git_Docs_Settings (0.00s)
    --- PASS: TestAPIHealth/Distributor_Settings (0.00s)
    --- PASS: TestAPIHealth/Email_Settings (0.00s)
    --- PASS: TestAPIHealth/Config (0.00s)
    --- PASS: TestAPIHealth/Inventory_Valuation_Report (0.00s)
    --- PASS: TestAPIHealth/Open_ECOs_Report (0.00s)
    --- PASS: TestAPIHealth/WO_Throughput_Report (0.00s)
    --- PASS: TestAPIHealth/Low_Stock_Report (0.00s)
    --- PASS: TestAPIHealth/NCR_Summary_Report (0.00s)
    --- PASS: TestAPIHealth/List_Notifications (0.00s)
    --- PASS: TestAPIHealth/Notification_Preferences (0.00s)
    --- PASS: TestAPIHealth/Notification_Types (0.00s)
    --- PASS: TestAPIHealth/List_RFQs (0.00s)
    --- PASS: TestAPIHealth/Get_RFQ (0.00s)
    --- PASS: TestAPIHealth/RFQ_Compare (0.00s)
    --- PASS: TestAPIHealth/RFQ_Email_Body (0.00s)
    --- PASS: TestAPIHealth/RFQ_Dashboard (0.00s)
    --- PASS: TestAPIHealth/List_Product_Pricing (0.00s)
    --- PASS: TestAPIHealth/List_Cost_Analysis (0.00s)
    --- PASS: TestAPIHealth/Get_Product_Pricing (0.00s)
    --- PASS: TestAPIHealth/Product_Pricing_History (0.00s)
    --- PASS: TestAPIHealth/Recent_Changes (0.00s)
    --- PASS: TestAPIHealth/List_Undo (0.00s)
    --- PASS: TestAPIHealth/List_Backups (0.00s)
    --- PASS: TestAPIHealth/List_Field_Reports (0.00s)
    --- PASS: TestAPIHealth/Get_Field_Report (0.00s)
    --- PASS: TestAPIHealth/List_Sales_Orders (0.00s)
    --- PASS: TestAPIHealth/Get_Sales_Order (0.00s)
    --- PASS: TestAPIHealth/List_Invoices (0.00s)
    --- PASS: TestAPIHealth/Get_Invoice (0.00s)
=== RUN   TestConcurrentInventoryUpdates_TwoGoroutines
--- PASS: TestConcurrentInventoryUpdates_TwoGoroutines (0.00s)
=== RUN   TestConcurrentInventoryUpdates_TenGoroutines
--- PASS: TestConcurrentInventoryUpdates_TenGoroutines (0.00s)
=== RUN   TestConcurrentInventoryUpdates_DifferentParts
--- PASS: TestConcurrentInventoryUpdates_DifferentParts (0.00s)
=== RUN   TestConcurrentInventoryUpdates_MixedOperations
--- PASS: TestConcurrentInventoryUpdates_MixedOperations (0.00s)
=== RUN   TestConcurrentInventoryRead_WhileUpdating
--- PASS: TestConcurrentInventoryRead_WhileUpdating (0.00s)
=== RUN   TestForeignKeysEnabled
--- PASS: TestForeignKeysEnabled (0.03s)
=== RUN   TestFK_PORequiresVendor
--- PASS: TestFK_PORequiresVendor (0.02s)
=== RUN   TestFK_POLineRequiresPO
--- PASS: TestFK_POLineRequiresPO (0.02s)
=== RUN   TestFK_CascadeDeletePOLines
--- PASS: TestFK_CascadeDeletePOLines (0.02s)
=== RUN   TestFK_RestrictVendorDeleteWithPO
--- PASS: TestFK_RestrictVendorDeleteWithPO (0.02s)
=== RUN   TestFK_QuoteLineCascade
--- PASS: TestFK_QuoteLineCascade (0.02s)
=== RUN   TestFK_WOSerialRequiresWO
--- PASS: TestFK_WOSerialRequiresWO (0.02s)
=== RUN   TestFK_SessionRequiresUser
--- PASS: TestFK_SessionRequiresUser (0.02s)
=== RUN   TestFK_ShipmentLineCascade
--- PASS: TestFK_ShipmentLineCascade (0.02s)
=== RUN   TestFK_EcoRevisionRequiresEco
--- PASS: TestFK_EcoRevisionRequiresEco (0.02s)
=== RUN   TestFK_DocumentVersionRequiresDocument
--- PASS: TestFK_DocumentVersionRequiresDocument (0.02s)
=== RUN   TestFK_RFQVendorRequiresVendor
--- PASS: TestFK_RFQVendorRequiresVendor (0.02s)
=== RUN   TestFK_CampaignDeviceRequiresCampaign
--- PASS: TestFK_CampaignDeviceRequiresCampaign (0.02s)
=== RUN   TestFK_ReceivingInspectionRequiresPO
--- PASS: TestFK_ReceivingInspectionRequiresPO (0.02s)
=== RUN   TestCheck_ECOInvalidStatus
--- PASS: TestCheck_ECOInvalidStatus (0.02s)
=== RUN   TestCheck_WorkOrderInvalidPriority
--- PASS: TestCheck_WorkOrderInvalidPriority (0.02s)
=== RUN   TestCheck_NegativeInventory
--- PASS: TestCheck_NegativeInventory (0.02s)
=== RUN   TestCheck_NegativeUnitPrice
--- PASS: TestCheck_NegativeUnitPrice (0.02s)
=== RUN   TestCheck_ZeroQtyOrdered
--- PASS: TestCheck_ZeroQtyOrdered (0.02s)
=== RUN   TestCheck_TestRecordInvalidResult
--- PASS: TestCheck_TestRecordInvalidResult (0.02s)
=== RUN   TestCheck_VendorNegativeLeadTime
--- PASS: TestCheck_VendorNegativeLeadTime (0.02s)
=== RUN   TestCheck_NCRInvalidSeverity
--- PASS: TestCheck_NCRInvalidSeverity (0.08s)
=== RUN   TestCheck_DeviceInvalidStatus
--- PASS: TestCheck_DeviceInvalidStatus (0.02s)
=== RUN   TestUnique_WOSerialNumber
--- PASS: TestUnique_WOSerialNumber (0.02s)
=== RUN   TestUnique_MarketPricing
--- PASS: TestUnique_MarketPricing (0.02s)
=== RUN   TestIndexesExist
--- PASS: TestIndexesExist (0.02s)
=== RUN   TestValidDataInserts
--- PASS: TestValidDataInserts (0.02s)
=== RUN   TestDatabaseMigrations
    db_migration_test.go:103: âœ“ All 51 required tables exist
    db_migration_test.go:104: âœ“ All 17 critical columns exist
--- PASS: TestDatabaseMigrations (0.01s)
=== RUN   TestHandlerQueryConsistency
    db_migration_test.go:212: âœ“ 11/11 handler queries verified
--- PASS: TestHandlerQueryConsistency (0.01s)
=== RUN   TestMigrationIdempotency
    db_migration_test.go:257: âœ“ Migrations are idempotent
--- PASS: TestMigrationIdempotency (0.01s)
=== RUN   TestForeignKeyConstraints
    db_migration_test.go:358: âœ“ Foreign key constraints verified
--- PASS: TestForeignKeyConstraints (0.01s)
=== RUN   TestDatabaseConnectionLost
    error_recovery_test.go:133: âœ… Database connection failure handled gracefully with error: sql: database is closed
--- PASS: TestDatabaseConnectionLost (0.00s)
=== RUN   TestDatabaseBusyTimeout
    error_recovery_test.go:175: âœ… Database busy condition handled (error returned)
--- PASS: TestDatabaseBusyTimeout (0.00s)
=== RUN   TestInvalidJSONRequest
=== RUN   TestInvalidJSONRequest/Completely_invalid_JSON
    error_recovery_test.go:241: âœ… Invalid JSON handled: invalid body
=== RUN   TestInvalidJSONRequest/Malformed_JSON_with_extra_comma
    error_recovery_test.go:241: âœ… Invalid JSON handled: invalid body
=== RUN   TestInvalidJSONRequest/Not_JSON_at_all
    error_recovery_test.go:241: âœ… Invalid JSON handled: invalid body
=== RUN   TestInvalidJSONRequest/Empty_body
    error_recovery_test.go:241: âœ… Invalid JSON handled: invalid body
--- PASS: TestInvalidJSONRequest (0.00s)
    --- PASS: TestInvalidJSONRequest/Completely_invalid_JSON (0.00s)
    --- PASS: TestInvalidJSONRequest/Malformed_JSON_with_extra_comma (0.00s)
    --- PASS: TestInvalidJSONRequest/Not_JSON_at_all (0.00s)
    --- PASS: TestInvalidJSONRequest/Empty_body (0.00s)
=== RUN   TestMissingRequiredFields
=== RUN   TestMissingRequiredFields/Vendor_without_name
    error_recovery_test.go:300: âœ… Missing field 'name' properly validated: name: is required
=== RUN   TestMissingRequiredFields/Vendor_with_empty_name
    error_recovery_test.go:300: âœ… Missing field 'name' properly validated: name: is required
=== RUN   TestMissingRequiredFields/Vendor_with_whitespace-only_name
    error_recovery_test.go:300: âœ… Missing field 'name' properly validated: name: is required
--- PASS: TestMissingRequiredFields (0.00s)
    --- PASS: TestMissingRequiredFields/Vendor_without_name (0.00s)
    --- PASS: TestMissingRequiredFields/Vendor_with_empty_name (0.00s)
    --- PASS: TestMissingRequiredFields/Vendor_with_whitespace-only_name (0.00s)
=== RUN   TestForeignKeyConstraintViolation
    error_recovery_test.go:347: âœ… Foreign key constraint properly enforced: constraint failed: FOREIGN KEY constraint failed (1811)
--- PASS: TestForeignKeyConstraintViolation (0.00s)
=== RUN   TestTransactionRollbackOnError
    error_recovery_test.go:397: âœ… Transaction rollback on constraint violation works correctly
--- PASS: TestTransactionRollbackOnError (0.00s)
=== RUN   TestNegativeQuantityRejection
=== RUN   TestNegativeQuantityRejection/Negative_qty_on_hand
    error_recovery_test.go:440: âœ… CHECK constraint enforced: constraint failed: CHECK constraint failed: qty_on_hand >= 0 (275)
=== RUN   TestNegativeQuantityRejection/Negative_qty_reserved
    error_recovery_test.go:440: âœ… CHECK constraint enforced: constraint failed: CHECK constraint failed: qty_reserved >= 0 (275)
=== RUN   TestNegativeQuantityRejection/Negative_reorder_point
    error_recovery_test.go:440: âœ… CHECK constraint enforced: constraint failed: CHECK constraint failed: reorder_point >= 0 (275)
=== RUN   TestNegativeQuantityRejection/Zero_qty_on_hand
=== RUN   TestNegativeQuantityRejection/Positive_qty_on_hand
--- PASS: TestNegativeQuantityRejection (0.00s)
    --- PASS: TestNegativeQuantityRejection/Negative_qty_on_hand (0.00s)
    --- PASS: TestNegativeQuantityRejection/Negative_qty_reserved (0.00s)
    --- PASS: TestNegativeQuantityRejection/Negative_reorder_point (0.00s)
    --- PASS: TestNegativeQuantityRejection/Zero_qty_on_hand (0.00s)
    --- PASS: TestNegativeQuantityRejection/Positive_qty_on_hand (0.00s)
=== RUN   TestVeryLongFilePath
    error_recovery_test.go:463: âœ… Very long file path properly rejected by OS: open /var/folders/56/n92zs44s7cd7262ym00jt2bm0000gn/T/TestVeryLongFilePath4254614592/001/aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa.txt: file name too long
--- PASS: TestVeryLongFilePath (0.00s)
=== RUN   TestDiskFullSimulation
    error_recovery_test.go:496: âœ… Write error properly detected: write /var/folders/56/n92zs44s7cd7262ym00jt2bm0000gn/T/diskfull-test-3881042197.txt: file already closed
--- PASS: TestDiskFullSimulation (0.00s)
=== RUN   TestNetworkTimeoutHandling
    error_recovery_test.go:537: âœ… Request completed without hanging
--- PASS: TestNetworkTimeoutHandling (0.00s)
=== RUN   TestMultipleValidationErrors
    error_recovery_test.go:580: âœ… Validation errors reported: name: is required; contact_email: must be a valid email address
--- PASS: TestMultipleValidationErrors (0.00s)
=== RUN   TestDuplicateKeyError
    error_recovery_test.go:609: âœ… Duplicate key properly rejected: constraint failed: UNIQUE constraint failed: vendors.name (2067)
--- PASS: TestDuplicateKeyError (0.00s)
=== RUN   TestNilDatabaseConnection
    error_recovery_test.go:641: âœ… Nil database handled gracefully (status 503): database not initialized
--- PASS: TestNilDatabaseConnection (0.00s)
=== RUN   TestUserFriendlyErrorMessages
=== RUN   TestUserFriendlyErrorMessages/Empty_name_field
    error_recovery_test.go:693: âœ… User-friendly error message: name: is required
--- PASS: TestUserFriendlyErrorMessages (0.00s)
    --- PASS: TestUserFriendlyErrorMessages/Empty_name_field (0.00s)
=== RUN   TestHandleAdvancedSearch_InvalidJSON
--- PASS: TestHandleAdvancedSearch_InvalidJSON (0.00s)
=== RUN   TestHandleAdvancedSearch_WorkOrders
=== RUN   TestHandleAdvancedSearch_WorkOrders/Search_all_work_orders
=== RUN   TestHandleAdvancedSearch_WorkOrders/Filter_by_status
=== RUN   TestHandleAdvancedSearch_WorkOrders/Filter_by_priority
=== RUN   TestHandleAdvancedSearch_WorkOrders/Multiple_filters_with_AND
--- PASS: TestHandleAdvancedSearch_WorkOrders (0.00s)
    --- PASS: TestHandleAdvancedSearch_WorkOrders/Search_all_work_orders (0.00s)
    --- PASS: TestHandleAdvancedSearch_WorkOrders/Filter_by_status (0.00s)
    --- PASS: TestHandleAdvancedSearch_WorkOrders/Filter_by_priority (0.00s)
    --- PASS: TestHandleAdvancedSearch_WorkOrders/Multiple_filters_with_AND (0.00s)
=== RUN   TestHandleAdvancedSearch_ECOs
--- PASS: TestHandleAdvancedSearch_ECOs (0.00s)
=== RUN   TestHandleAdvancedSearch_Inventory
--- PASS: TestHandleAdvancedSearch_Inventory (0.00s)
=== RUN   TestHandleAdvancedSearch_Pagination
=== RUN   TestHandleAdvancedSearch_Pagination/First_page
=== RUN   TestHandleAdvancedSearch_Pagination/Second_page
=== RUN   TestHandleAdvancedSearch_Pagination/Third_page
--- PASS: TestHandleAdvancedSearch_Pagination (0.00s)
    --- PASS: TestHandleAdvancedSearch_Pagination/First_page (0.00s)
    --- PASS: TestHandleAdvancedSearch_Pagination/Second_page (0.00s)
    --- PASS: TestHandleAdvancedSearch_Pagination/Third_page (0.00s)
=== RUN   TestHandleAdvancedSearch_UnsupportedEntity
--- PASS: TestHandleAdvancedSearch_UnsupportedEntity (0.00s)
=== RUN   TestHandleAdvancedSearch_SQLInjection
--- PASS: TestHandleAdvancedSearch_SQLInjection (0.00s)
=== RUN   TestHandleSaveSavedSearch
--- PASS: TestHandleSaveSavedSearch (0.00s)
=== RUN   TestHandleGetSavedSearches
=== RUN   TestHandleGetSavedSearches/Get_all_searches_for_user
=== RUN   TestHandleGetSavedSearches/Filter_by_entity_type
--- PASS: TestHandleGetSavedSearches (0.00s)
    --- PASS: TestHandleGetSavedSearches/Get_all_searches_for_user (0.00s)
    --- PASS: TestHandleGetSavedSearches/Filter_by_entity_type (0.00s)
=== RUN   TestHandleDeleteSavedSearch
=== RUN   TestHandleDeleteSavedSearch/Delete_own_search
=== RUN   TestHandleDeleteSavedSearch/Cannot_delete_other's_search
--- PASS: TestHandleDeleteSavedSearch (0.00s)
    --- PASS: TestHandleDeleteSavedSearch/Delete_own_search (0.00s)
    --- PASS: TestHandleDeleteSavedSearch/Cannot_delete_other's_search (0.00s)
=== RUN   TestHandleGetQuickFilters
--- PASS: TestHandleGetQuickFilters (0.00s)
=== RUN   TestHandleGetSearchHistory
=== RUN   TestHandleGetSearchHistory/Get_all_history
=== RUN   TestHandleGetSearchHistory/Filter_by_entity_type
=== RUN   TestHandleGetSearchHistory/Limit_results
--- PASS: TestHandleGetSearchHistory (0.00s)
    --- PASS: TestHandleGetSearchHistory/Get_all_history (0.00s)
    --- PASS: TestHandleGetSearchHistory/Filter_by_entity_type (0.00s)
    --- PASS: TestHandleGetSearchHistory/Limit_results (0.00s)
=== RUN   TestHandleAdvancedSearch_DevicesAndNCRsAndPOs
=== RUN   TestHandleAdvancedSearch_DevicesAndNCRsAndPOs/Search_devices
=== RUN   TestHandleAdvancedSearch_DevicesAndNCRsAndPOs/Search_NCRs
=== RUN   TestHandleAdvancedSearch_DevicesAndNCRsAndPOs/Search_POs
--- PASS: TestHandleAdvancedSearch_DevicesAndNCRsAndPOs (0.00s)
    --- PASS: TestHandleAdvancedSearch_DevicesAndNCRsAndPOs/Search_devices (0.00s)
    --- PASS: TestHandleAdvancedSearch_DevicesAndNCRsAndPOs/Search_NCRs (0.00s)
    --- PASS: TestHandleAdvancedSearch_DevicesAndNCRsAndPOs/Search_POs (0.00s)
=== RUN   TestHandleListAPIKeys
--- PASS: TestHandleListAPIKeys (0.00s)
=== RUN   TestHandleListAPIKeys_Empty
--- PASS: TestHandleListAPIKeys_Empty (0.00s)
=== RUN   TestHandleCreateAPIKey_Success
--- PASS: TestHandleCreateAPIKey_Success (0.00s)
=== RUN   TestHandleCreateAPIKey_WithExpiration
--- PASS: TestHandleCreateAPIKey_WithExpiration (0.00s)
=== RUN   TestHandleCreateAPIKey_EmptyName
--- PASS: TestHandleCreateAPIKey_EmptyName (0.00s)
=== RUN   TestHandleCreateAPIKey_InvalidJSON
--- PASS: TestHandleCreateAPIKey_InvalidJSON (0.00s)
=== RUN   TestHandleDeleteAPIKey_Success
--- PASS: TestHandleDeleteAPIKey_Success (0.00s)
=== RUN   TestHandleDeleteAPIKey_NotFound
--- PASS: TestHandleDeleteAPIKey_NotFound (0.00s)
=== RUN   TestHandleToggleAPIKey_Enable
--- PASS: TestHandleToggleAPIKey_Enable (0.00s)
=== RUN   TestHandleToggleAPIKey_Disable
--- PASS: TestHandleToggleAPIKey_Disable (0.00s)
=== RUN   TestHandleToggleAPIKey_NotFound
--- PASS: TestHandleToggleAPIKey_NotFound (0.00s)
=== RUN   TestHandleToggleAPIKey_InvalidJSON
--- PASS: TestHandleToggleAPIKey_InvalidJSON (0.00s)
=== RUN   TestValidateBearerToken_Valid
--- PASS: TestValidateBearerToken_Valid (0.00s)
=== RUN   TestValidateBearerToken_Disabled
--- PASS: TestValidateBearerToken_Disabled (0.00s)
=== RUN   TestValidateBearerToken_Expired
--- PASS: TestValidateBearerToken_Expired (0.00s)
=== RUN   TestValidateBearerToken_InvalidPrefix
--- PASS: TestValidateBearerToken_InvalidPrefix (0.00s)
=== RUN   TestValidateBearerToken_NotFound
--- PASS: TestValidateBearerToken_NotFound (0.00s)
=== RUN   TestGenerateAPIKey_Randomness
--- PASS: TestGenerateAPIKey_Randomness (0.00s)
=== RUN   TestHashAPIKey_Consistency
--- PASS: TestHashAPIKey_Consistency (0.00s)
=== RUN   TestHashAPIKey_DifferentKeys
--- PASS: TestHashAPIKey_DifferentKeys (0.00s)
=== RUN   TestAPIKeyPrefix_Storage
--- PASS: TestAPIKeyPrefix_Storage (0.00s)
=== RUN   TestValidateBearerToken_FutureExpiration
--- PASS: TestValidateBearerToken_FutureExpiration (0.00s)
=== RUN   TestHandleUploadAttachment_Success
=== RUN   TestHandleUploadAttachment_Success/PDF_upload
=== RUN   TestHandleUploadAttachment_Success/Image_upload
=== RUN   TestHandleUploadAttachment_Success/Excel_upload
--- PASS: TestHandleUploadAttachment_Success (0.00s)
    --- PASS: TestHandleUploadAttachment_Success/PDF_upload (0.00s)
    --- PASS: TestHandleUploadAttachment_Success/Image_upload (0.00s)
    --- PASS: TestHandleUploadAttachment_Success/Excel_upload (0.00s)
=== RUN   TestHandleUploadAttachment_MissingFields
=== RUN   TestHandleUploadAttachment_MissingFields/Missing_module
=== RUN   TestHandleUploadAttachment_MissingFields/Missing_record_id
=== RUN   TestHandleUploadAttachment_MissingFields/Both_missing
--- PASS: TestHandleUploadAttachment_MissingFields (0.00s)
    --- PASS: TestHandleUploadAttachment_MissingFields/Missing_module (0.00s)
    --- PASS: TestHandleUploadAttachment_MissingFields/Missing_record_id (0.00s)
    --- PASS: TestHandleUploadAttachment_MissingFields/Both_missing (0.00s)
=== RUN   TestHandleUploadAttachment_NoFile
--- PASS: TestHandleUploadAttachment_NoFile (0.00s)
=== RUN   TestHandleUploadAttachment_DangerousExtensions
=== RUN   TestHandleUploadAttachment_DangerousExtensions/Block_malware.exe
=== RUN   TestHandleUploadAttachment_DangerousExtensions/Block_script.bat
=== RUN   TestHandleUploadAttachment_DangerousExtensions/Block_shell.sh
=== RUN   TestHandleUploadAttachment_DangerousExtensions/Block_backdoor.php
=== RUN   TestHandleUploadAttachment_DangerousExtensions/Block_virus.js
=== RUN   TestHandleUploadAttachment_DangerousExtensions/Block_trojan.vbs
=== RUN   TestHandleUploadAttachment_DangerousExtensions/Block_payload.jar
=== RUN   TestHandleUploadAttachment_DangerousExtensions/Block_exploit.ps1
=== RUN   TestHandleUploadAttachment_DangerousExtensions/Block_hack.cmd
=== RUN   TestHandleUploadAttachment_DangerousExtensions/Block_rootkit.dll
=== RUN   TestHandleUploadAttachment_DangerousExtensions/Block_malicious.app
=== RUN   TestHandleUploadAttachment_DangerousExtensions/Block_installer.msi
--- PASS: TestHandleUploadAttachment_DangerousExtensions (0.00s)
    --- PASS: TestHandleUploadAttachment_DangerousExtensions/Block_malware.exe (0.00s)
    --- PASS: TestHandleUploadAttachment_DangerousExtensions/Block_script.bat (0.00s)
    --- PASS: TestHandleUploadAttachment_DangerousExtensions/Block_shell.sh (0.00s)
    --- PASS: TestHandleUploadAttachment_DangerousExtensions/Block_backdoor.php (0.00s)
    --- PASS: TestHandleUploadAttachment_DangerousExtensions/Block_virus.js (0.00s)
    --- PASS: TestHandleUploadAttachment_DangerousExtensions/Block_trojan.vbs (0.00s)
    --- PASS: TestHandleUploadAttachment_DangerousExtensions/Block_payload.jar (0.00s)
    --- PASS: TestHandleUploadAttachment_DangerousExtensions/Block_exploit.ps1 (0.00s)
    --- PASS: TestHandleUploadAttachment_DangerousExtensions/Block_hack.cmd (0.00s)
    --- PASS: TestHandleUploadAttachment_DangerousExtensions/Block_rootkit.dll (0.00s)
    --- PASS: TestHandleUploadAttachment_DangerousExtensions/Block_malicious.app (0.00s)
    --- PASS: TestHandleUploadAttachment_DangerousExtensions/Block_installer.msi (0.00s)
=== RUN   TestHandleUploadAttachment_PathTraversal
=== RUN   TestHandleUploadAttachment_PathTraversal/Block_../../../etc/passwd.txt
=== RUN   TestHandleUploadAttachment_PathTraversal/Block_..\..\..\windows\system32\config\sam.txt
=== RUN   TestHandleUploadAttachment_PathTraversal/Block_../../../../../root/.ssh/id_rsa.txt
=== RUN   TestHandleUploadAttachment_PathTraversal/Block_test/../../../secret.txt
=== RUN   TestHandleUploadAttachment_PathTraversal/Block_/etc/passwd.txt
=== RUN   TestHandleUploadAttachment_PathTraversal/Block_\etc\passwd.txt
=== RUN   TestHandleUploadAttachment_PathTraversal/Block_C:\Windows\System32\drivers\etc\hosts.txt
=== RUN   TestHandleUploadAttachment_PathTraversal/Block_test/../../outside.txt
--- PASS: TestHandleUploadAttachment_PathTraversal (0.00s)
    --- PASS: TestHandleUploadAttachment_PathTraversal/Block_../../../etc/passwd.txt (0.00s)
    --- PASS: TestHandleUploadAttachment_PathTraversal/Block_..\..\..\windows\system32\config\sam.txt (0.00s)
    --- PASS: TestHandleUploadAttachment_PathTraversal/Block_../../../../../root/.ssh/id_rsa.txt (0.00s)
    --- PASS: TestHandleUploadAttachment_PathTraversal/Block_test/../../../secret.txt (0.00s)
    --- PASS: TestHandleUploadAttachment_PathTraversal/Block_/etc/passwd.txt (0.00s)
    --- PASS: TestHandleUploadAttachment_PathTraversal/Block_\etc\passwd.txt (0.00s)
    --- PASS: TestHandleUploadAttachment_PathTraversal/Block_C:\Windows\System32\drivers\etc\hosts.txt (0.00s)
    --- PASS: TestHandleUploadAttachment_PathTraversal/Block_test/../../outside.txt (0.00s)
=== RUN   TestHandleUploadAttachment_MaliciousFilenames
=== RUN   TestHandleUploadAttachment_MaliciousFilenames/Sanitize_file;rm_-rf_/.txt
=== RUN   TestHandleUploadAttachment_MaliciousFilenames/Sanitize_file|whoami.txt
=== RUN   TestHandleUploadAttachment_MaliciousFilenames/Sanitize_file&cat_/etc/passwd&.txt
=== RUN   TestHandleUploadAttachment_MaliciousFilenames/Sanitize_file`id`.txt
=== RUN   TestHandleUploadAttachment_MaliciousFilenames/Sanitize_file$(ls).txt
=== RUN   TestHandleUploadAttachment_MaliciousFilenames/Sanitize_file\x00.exe.txt
=== RUN   TestHandleUploadAttachment_MaliciousFilenames/Sanitize_file__.txt
=== RUN   TestHandleUploadAttachment_MaliciousFilenames/Sanitize_file<script>.txt
=== RUN   TestHandleUploadAttachment_MaliciousFilenames/Sanitize_file>output.txt
=== RUN   TestHandleUploadAttachment_MaliciousFilenames/Sanitize_file*.txt
=== RUN   TestHandleUploadAttachment_MaliciousFilenames/Sanitize_file?.txt
--- PASS: TestHandleUploadAttachment_MaliciousFilenames (0.00s)
    --- PASS: TestHandleUploadAttachment_MaliciousFilenames/Sanitize_file;rm_-rf_/.txt (0.00s)
    --- PASS: TestHandleUploadAttachment_MaliciousFilenames/Sanitize_file|whoami.txt (0.00s)
    --- PASS: TestHandleUploadAttachment_MaliciousFilenames/Sanitize_file&cat_/etc/passwd&.txt (0.00s)
    --- PASS: TestHandleUploadAttachment_MaliciousFilenames/Sanitize_file`id`.txt (0.00s)
    --- PASS: TestHandleUploadAttachment_MaliciousFilenames/Sanitize_file$(ls).txt (0.00s)
    --- PASS: TestHandleUploadAttachment_MaliciousFilenames/Sanitize_file\x00.exe.txt (0.00s)
    --- PASS: TestHandleUploadAttachment_MaliciousFilenames/Sanitize_file__.txt (0.00s)
    --- PASS: TestHandleUploadAttachment_MaliciousFilenames/Sanitize_file<script>.txt (0.00s)
    --- PASS: TestHandleUploadAttachment_MaliciousFilenames/Sanitize_file>output.txt (0.00s)
    --- PASS: TestHandleUploadAttachment_MaliciousFilenames/Sanitize_file*.txt (0.00s)
    --- PASS: TestHandleUploadAttachment_MaliciousFilenames/Sanitize_file?.txt (0.00s)
=== RUN   TestHandleUploadAttachment_FileSizeLimits
=== RUN   TestHandleUploadAttachment_FileSizeLimits/Empty_file
=== RUN   TestHandleUploadAttachment_FileSizeLimits/Tiny_file_(1_byte)
=== RUN   TestHandleUploadAttachment_FileSizeLimits/Normal_file_(1MB)
=== RUN   TestHandleUploadAttachment_FileSizeLimits/Large_file_(50MB)
=== RUN   TestHandleUploadAttachment_FileSizeLimits/Max_size_(100MB)
--- PASS: TestHandleUploadAttachment_FileSizeLimits (0.00s)
    --- PASS: TestHandleUploadAttachment_FileSizeLimits/Empty_file (0.00s)
    --- PASS: TestHandleUploadAttachment_FileSizeLimits/Tiny_file_(1_byte) (0.00s)
    --- PASS: TestHandleUploadAttachment_FileSizeLimits/Normal_file_(1MB) (0.00s)
    --- PASS: TestHandleUploadAttachment_FileSizeLimits/Large_file_(50MB) (0.00s)
    --- PASS: TestHandleUploadAttachment_FileSizeLimits/Max_size_(100MB) (0.00s)
=== RUN   TestHandleUploadAttachment_DoubleExtension
=== RUN   TestHandleUploadAttachment_DoubleExtension/Block_document.pdf.exe
=== RUN   TestHandleUploadAttachment_DoubleExtension/Block_image.png.bat
=== RUN   TestHandleUploadAttachment_DoubleExtension/Block_data.xlsx.js
=== RUN   TestHandleUploadAttachment_DoubleExtension/Block_report.txt.sh
--- PASS: TestHandleUploadAttachment_DoubleExtension (0.00s)
    --- PASS: TestHandleUploadAttachment_DoubleExtension/Block_document.pdf.exe (0.00s)
    --- PASS: TestHandleUploadAttachment_DoubleExtension/Block_image.png.bat (0.00s)
    --- PASS: TestHandleUploadAttachment_DoubleExtension/Block_data.xlsx.js (0.00s)
    --- PASS: TestHandleUploadAttachment_DoubleExtension/Block_report.txt.sh (0.00s)
=== RUN   TestHandleListAttachments_Success
--- PASS: TestHandleListAttachments_Success (0.00s)
=== RUN   TestHandleListAttachments_MissingParams
=== RUN   TestHandleListAttachments_MissingParams/Missing_module
=== RUN   TestHandleListAttachments_MissingParams/Missing_record_id
=== RUN   TestHandleListAttachments_MissingParams/Missing_both
--- PASS: TestHandleListAttachments_MissingParams (0.00s)
    --- PASS: TestHandleListAttachments_MissingParams/Missing_module (0.00s)
    --- PASS: TestHandleListAttachments_MissingParams/Missing_record_id (0.00s)
    --- PASS: TestHandleListAttachments_MissingParams/Missing_both (0.00s)
=== RUN   TestHandleListAttachments_EmptyResult
--- PASS: TestHandleListAttachments_EmptyResult (0.00s)
=== RUN   TestHandleDownloadAttachment_Success
--- PASS: TestHandleDownloadAttachment_Success (0.00s)
=== RUN   TestHandleDownloadAttachment_NotFound
--- PASS: TestHandleDownloadAttachment_NotFound (0.00s)
=== RUN   TestHandleDownloadAttachment_InvalidID
--- PASS: TestHandleDownloadAttachment_InvalidID (0.00s)
=== RUN   TestHandleDownloadAttachment_FileDeleted
--- PASS: TestHandleDownloadAttachment_FileDeleted (0.00s)
=== RUN   TestHandleDeleteAttachment_Success
--- PASS: TestHandleDeleteAttachment_Success (0.00s)
=== RUN   TestHandleDeleteAttachment_NotFound
--- PASS: TestHandleDeleteAttachment_NotFound (0.00s)
=== RUN   TestHandleDeleteAttachment_InvalidID
--- PASS: TestHandleDeleteAttachment_InvalidID (0.00s)
=== RUN   TestHandleServeFile_Success
--- PASS: TestHandleServeFile_Success (0.00s)
=== RUN   TestHandleServeFile_NotFound
--- PASS: TestHandleServeFile_NotFound (0.00s)
=== RUN   TestHandleServeFile_PathTraversalPrevention
=== RUN   TestHandleServeFile_PathTraversalPrevention/Block_../../../etc/passwd
=== RUN   TestHandleServeFile_PathTraversalPrevention/Block_..\..\..\windows\system32\config\sam
=== RUN   TestHandleServeFile_PathTraversalPrevention/Block_../secret.key
--- PASS: TestHandleServeFile_PathTraversalPrevention (0.00s)
    --- PASS: TestHandleServeFile_PathTraversalPrevention/Block_../../../etc/passwd (0.00s)
    --- PASS: TestHandleServeFile_PathTraversalPrevention/Block_..\..\..\windows\system32\config\sam (0.00s)
    --- PASS: TestHandleServeFile_PathTraversalPrevention/Block_../secret.key (0.00s)
=== RUN   TestAttachmentWorkflow_UploadListDownloadDelete
--- PASS: TestAttachmentWorkflow_UploadListDownloadDelete (0.00s)
=== RUN   TestAttachmentMultipleModules
--- PASS: TestAttachmentMultipleModules (0.00s)
=== RUN   TestSecurityVulnerabilityReport
    handler_attachments_test.go:1053: === SECURITY VULNERABILITY ASSESSMENT ===
    handler_attachments_test.go:1054: 
    handler_attachments_test.go:1055: CRITICAL FINDINGS:
    handler_attachments_test.go:1056: 
    handler_attachments_test.go:1057: ðŸ”´ VULNERABILITY 1: NO PERMISSION CHECKS ON ATTACHMENT HANDLERS
    handler_attachments_test.go:1058:    Location: handler_attachments.go - ALL endpoints
    handler_attachments_test.go:1059:    Severity: CRITICAL
    handler_attachments_test.go:1060:    Impact: Any unauthenticated user can upload, list, download, and delete attachments
    handler_attachments_test.go:1061:    Recommendation: Add requirePermission() middleware to all attachment endpoints
    handler_attachments_test.go:1062:    Current: handleUploadAttachment, handleDeleteAttachment have NO auth checks
    handler_attachments_test.go:1063: 
    handler_attachments_test.go:1064: ðŸ”´ VULNERABILITY 2: NO READONLY ROLE ENFORCEMENT
    handler_attachments_test.go:1065:    Severity: HIGH
    handler_attachments_test.go:1066:    Impact: Readonly users can upload and delete files (no enforcement)
    handler_attachments_test.go:1067:    Recommendation: Readonly should only have view permission
    handler_attachments_test.go:1068: 
    handler_attachments_test.go:1069: ðŸŸ¡ VULNERABILITY 3: NO MIME TYPE VALIDATION
    handler_attachments_test.go:1070:    Severity: MEDIUM
    handler_attachments_test.go:1071:    Impact: File extension validation only - attacker can claim .pdf but upload .exe
    handler_attachments_test.go:1072:    Recommendation: Validate actual file content (magic bytes) vs declared MIME type
    handler_attachments_test.go:1073: 
    handler_attachments_test.go:1074: ðŸŸ¡ VULNERABILITY 4: NO VIRUS/MALWARE SCANNING
    handler_attachments_test.go:1075:    Severity: MEDIUM
    handler_attachments_test.go:1076:    Impact: Malicious files can be uploaded and shared
    handler_attachments_test.go:1077:    Recommendation: Integrate ClamAV or similar antivirus scanning
    handler_attachments_test.go:1078: 
    handler_attachments_test.go:1079: ðŸŸ¢ GOOD: Path traversal protection via sanitizeFilename()
    handler_attachments_test.go:1080: ðŸŸ¢ GOOD: Dangerous extension blocking
    handler_attachments_test.go:1081: ðŸŸ¢ GOOD: File size limits (100MB)
    handler_attachments_test.go:1082: ðŸŸ¢ GOOD: Malicious character sanitization
    handler_attachments_test.go:1083: 
    handler_attachments_test.go:1084: REMEDIATION PRIORITY:
    handler_attachments_test.go:1085: 1. Add permission checks immediately (CRITICAL)
    handler_attachments_test.go:1086: 2. Add readonly role enforcement (HIGH)
    handler_attachments_test.go:1087: 3. Add MIME type validation (MEDIUM)
    handler_attachments_test.go:1088: 4. Consider antivirus integration (MEDIUM)
    handler_attachments_test.go:1089: 
    handler_attachments_test.go:1092: Security assessment complete. Review findings above.
--- PASS: TestSecurityVulnerabilityReport (0.00s)
=== RUN   TestAuditLog_Vendor_Create
    handler_audit_log_test.go:337: Created vendor ID: V-001
    handler_audit_log_test.go:358: âœ“ Vendor CREATE audit log verified: V-001
--- PASS: TestAuditLog_Vendor_Create (0.00s)
=== RUN   TestAuditLog_Vendor_Update
    handler_audit_log_test.go:399: âœ“ Vendor UPDATE audit log verified
--- PASS: TestAuditLog_Vendor_Update (0.00s)
=== RUN   TestAuditLog_Vendor_Delete
    handler_audit_log_test.go:433: âœ“ Vendor DELETE audit log verified
--- PASS: TestAuditLog_Vendor_Delete (0.00s)
=== RUN   TestAuditLog_ECO_Create
    handler_audit_log_test.go:475: Created ECO ID: ECO-2026-001
    handler_audit_log_test.go:484: âœ“ ECO CREATE audit log verified: ECO-2026-001
--- PASS: TestAuditLog_ECO_Create (0.00s)
=== RUN   TestAuditLog_ECO_Approve
    handler_audit_log_test.go:544: âœ“ ECO APPROVE audit log verified with user tracking
--- PASS: TestAuditLog_ECO_Approve (0.00s)
=== RUN   TestAuditLog_PurchaseOrder_Create
    handler_audit_log_test.go:602: Created PO ID: PO-2026-0001
    handler_audit_log_test.go:631: âœ“ PO CREATE audit log verified with price tracking: PO-2026-0001
--- PASS: TestAuditLog_PurchaseOrder_Create (0.00s)
=== RUN   TestAuditLog_PurchaseOrder_Update_PriceChange
    handler_audit_log_test.go:685: âœ“ PO UPDATE audit log verified
--- PASS: TestAuditLog_PurchaseOrder_Update_PriceChange (0.00s)
=== RUN   TestAuditLog_Inventory_Adjust
    handler_audit_log_test.go:748: âœ“ Inventory ADJUST audit log verified
--- PASS: TestAuditLog_Inventory_Adjust (0.00s)
=== RUN   TestAuditLog_BeforeAfter_Values
    handler_audit_log_test.go:822: âœ“ Before/after values verified in audit log
--- PASS: TestAuditLog_BeforeAfter_Values (0.00s)
=== RUN   TestAuditLog_Search_Filter
    handler_audit_log_test.go:894: âœ“ Audit log search and filtering verified
--- PASS: TestAuditLog_Search_Filter (0.00s)
=== RUN   TestAuditLog_IPAddress_UserAgent
    handler_audit_log_test.go:948: âœ“ IP address and user agent tracking verified
--- PASS: TestAuditLog_IPAddress_UserAgent (0.00s)
=== RUN   TestAuditLog_Completeness_AllOperations
    handler_audit_log_test.go:1014: âœ“ Audit log completeness verified for all CRUD operations
--- PASS: TestAuditLog_Completeness_AllOperations (0.00s)
=== RUN   TestHandleLoginSuccess
--- PASS: TestHandleLoginSuccess (0.10s)
=== RUN   TestHandleLoginInvalidUsername
--- PASS: TestHandleLoginInvalidUsername (0.05s)
=== RUN   TestHandleLoginInvalidPassword
--- PASS: TestHandleLoginInvalidPassword (0.10s)
=== RUN   TestHandleLoginInactiveUser
--- PASS: TestHandleLoginInactiveUser (0.10s)
=== RUN   TestHandleLoginRateLimiting
--- PASS: TestHandleLoginRateLimiting (0.30s)
=== RUN   TestHandleLoginRateLimitPerIP
--- PASS: TestHandleLoginRateLimitPerIP (0.35s)
=== RUN   TestHandleLoginInvalidJSON
--- PASS: TestHandleLoginInvalidJSON (0.00s)
=== RUN   TestHandleLoginCleansExpiredSessions
--- PASS: TestHandleLoginCleansExpiredSessions (0.10s)
=== RUN   TestHandleLogoutSuccess
--- PASS: TestHandleLogoutSuccess (0.05s)
=== RUN   TestHandleLogoutNoCookie
--- PASS: TestHandleLogoutNoCookie (0.00s)
=== RUN   TestHandleMeValidSession
--- PASS: TestHandleMeValidSession (0.05s)
=== RUN   TestHandleMeNoCookie
--- PASS: TestHandleMeNoCookie (0.00s)
=== RUN   TestHandleMeInvalidToken
--- PASS: TestHandleMeInvalidToken (0.00s)
=== RUN   TestHandleMeExpiredSession
--- PASS: TestHandleMeExpiredSession (0.05s)
=== RUN   TestHandleMeInactivityTimeout
--- PASS: TestHandleMeInactivityTimeout (0.05s)
=== RUN   TestHandleMeUpdatesLastActivity
--- PASS: TestHandleMeUpdatesLastActivity (0.05s)
=== RUN   TestHandleChangePasswordSuccess
--- PASS: TestHandleChangePasswordSuccess (0.25s)
=== RUN   TestHandleChangePasswordWrongCurrent
--- PASS: TestHandleChangePasswordWrongCurrent (0.10s)
=== RUN   TestHandleChangePasswordTooShort
--- PASS: TestHandleChangePasswordTooShort (0.05s)
=== RUN   TestHandleChangePasswordMissingFields
=== RUN   TestHandleChangePasswordMissingFields/missing_new_password
=== RUN   TestHandleChangePasswordMissingFields/missing_current_password
=== RUN   TestHandleChangePasswordMissingFields/empty_strings
--- PASS: TestHandleChangePasswordMissingFields (0.05s)
    --- PASS: TestHandleChangePasswordMissingFields/missing_new_password (0.00s)
    --- PASS: TestHandleChangePasswordMissingFields/missing_current_password (0.00s)
    --- PASS: TestHandleChangePasswordMissingFields/empty_strings (0.00s)
=== RUN   TestHandleChangePasswordUnauthorized
--- PASS: TestHandleChangePasswordUnauthorized (0.00s)
=== RUN   TestGenerateToken
--- PASS: TestGenerateToken (0.00s)
=== RUN   TestGetClientIPDirect
--- PASS: TestGetClientIPDirect (0.00s)
=== RUN   TestGetClientIPXForwardedFor
--- PASS: TestGetClientIPXForwardedFor (0.00s)
=== RUN   TestHandleGetCSRFToken
--- PASS: TestHandleGetCSRFToken (0.05s)
=== RUN   TestHandleGetCSRFTokenUnauthorized
--- PASS: TestHandleGetCSRFTokenUnauthorized (0.00s)
=== RUN   TestCSRFTokenCleansExpired
--- PASS: TestCSRFTokenCleansExpired (0.05s)
=== RUN   TestLoginCSRFToken
--- PASS: TestLoginCSRFToken (0.10s)
=== RUN   TestCreateBackup
--- PASS: TestCreateBackup (0.05s)
=== RUN   TestListBackups
--- PASS: TestListBackups (0.05s)
=== RUN   TestListBackupsEmpty
--- PASS: TestListBackupsEmpty (0.05s)
=== RUN   TestDeleteBackup
--- PASS: TestDeleteBackup (0.05s)
=== RUN   TestDeleteBackupNotFound
--- PASS: TestDeleteBackupNotFound (0.05s)
=== RUN   TestDeleteBackupInvalidFilename
--- PASS: TestDeleteBackupInvalidFilename (0.05s)
=== RUN   TestDownloadBackup
--- PASS: TestDownloadBackup (0.05s)
=== RUN   TestDownloadBackupNotFound
--- PASS: TestDownloadBackupNotFound (0.05s)
=== RUN   TestDownloadBackupPathTraversal
--- PASS: TestDownloadBackupPathTraversal (0.05s)
=== RUN   TestRestoreBackup
2026/02/20 14:41:06 Skipping index creation (table/column may not exist): CREATE INDEX IF NOT EXISTS idx_ncrs_ipn ON ncrs(ipn) - SQL logic error: no such column: ipn (1)
Warning: Failed to create index: SQL logic error: no such column: severity (1)
Warning: Failed to create index: SQL logic error: no such column: ipn (1)
Warning: Failed to create index: SQL logic error: no such column: serial_number (1)
--- PASS: TestRestoreBackup (1.22s)
=== RUN   TestRestoreBackupNotFound
--- PASS: TestRestoreBackupNotFound (0.06s)
=== RUN   TestRestoreBackupMissingFilename
--- PASS: TestRestoreBackupMissingFilename (0.05s)
=== RUN   TestRestoreBackupPathTraversal
--- PASS: TestRestoreBackupPathTraversal (0.05s)
=== RUN   TestCleanOldBackups
2026/02/20 14:41:07 Removed old backup: zrp-backup-2025-01-01T00-00-00.db
2026/02/20 14:41:07 Removed old backup: zrp-backup-2025-01-02T00-00-00.db
--- PASS: TestCleanOldBackups (0.05s)
=== RUN   TestCleanOldBackupsUnderRetention
--- PASS: TestCleanOldBackupsUnderRetention (0.05s)
=== RUN   TestBOMCost_SimpleBOM
audit log error: SQL logic error: table audit_log has no column named module (1)
--- PASS: TestBOMCost_SimpleBOM (0.00s)
=== RUN   TestBOMCost_NestedBOM
audit log error: SQL logic error: table audit_log has no column named module (1)
--- PASS: TestBOMCost_NestedBOM (0.00s)
=== RUN   TestBOMCost_MissingCostData
audit log error: SQL logic error: table audit_log has no column named module (1)
--- PASS: TestBOMCost_MissingCostData (0.00s)
=== RUN   TestBOMCost_CircularBOM
audit log error: SQL logic error: table audit_log has no column named module (1)
--- PASS: TestBOMCost_CircularBOM (0.00s)
=== RUN   TestBOMCost_LargeBOM
audit log error: SQL logic error: table audit_log has no column named module (1)
--- PASS: TestBOMCost_LargeBOM (0.00s)
=== RUN   TestBOMCost_EmptyBOM
audit log error: SQL logic error: table audit_log has no column named module (1)
--- PASS: TestBOMCost_EmptyBOM (0.00s)
=== RUN   TestBOMCost_NonAssemblyPart
audit log error: SQL logic error: table audit_log has no column named module (1)
--- PASS: TestBOMCost_NonAssemblyPart (0.00s)
=== RUN   TestHandleBulkECOs_ApproveSuccess
--- PASS: TestHandleBulkECOs_ApproveSuccess (0.00s)
=== RUN   TestHandleBulkECOs_PartialFailure
--- PASS: TestHandleBulkECOs_PartialFailure (0.00s)
=== RUN   TestHandleBulkECOs_InvalidAction
--- PASS: TestHandleBulkECOs_InvalidAction (0.00s)
=== RUN   TestHandleBulkECOs_InvalidJSON
--- PASS: TestHandleBulkECOs_InvalidJSON (0.00s)
=== RUN   TestHandleBulkECOs_Delete
--- PASS: TestHandleBulkECOs_Delete (0.00s)
=== RUN   TestHandleBulkWorkOrders_CompleteSuccess
--- PASS: TestHandleBulkWorkOrders_CompleteSuccess (0.00s)
=== RUN   TestHandleBulkNCRs_CloseSuccess
--- PASS: TestHandleBulkNCRs_CloseSuccess (0.00s)
=== RUN   TestHandleBulkDevices_DecommissionSuccess
--- PASS: TestHandleBulkDevices_DecommissionSuccess (0.00s)
=== RUN   TestHandleBulkInventory_DeleteSuccess
--- PASS: TestHandleBulkInventory_DeleteSuccess (0.00s)
=== RUN   TestHandleBulkRMAs_CloseSuccess
--- PASS: TestHandleBulkRMAs_CloseSuccess (0.00s)
=== RUN   TestHandleBulkParts_ArchiveSuccess
--- PASS: TestHandleBulkParts_ArchiveSuccess (0.00s)
=== RUN   TestHandleBulkPurchaseOrders_ApproveSuccess
--- PASS: TestHandleBulkPurchaseOrders_ApproveSuccess (0.00s)
=== RUN   TestHandleBulkECOs_LargeBatch
--- PASS: TestHandleBulkECOs_LargeBatch (0.00s)
=== RUN   TestHandleBulkECOs_EmptyIDs
--- PASS: TestHandleBulkECOs_EmptyIDs (0.00s)
=== RUN   TestHandleBulkInventory_InvalidAction
--- PASS: TestHandleBulkInventory_InvalidAction (0.00s)
=== RUN   TestHandleBulkECOs_AuditLogging
--- PASS: TestHandleBulkECOs_AuditLogging (0.00s)
=== RUN   TestHandleBulkECOs_TransactionalIntegrity
    handler_bulk_test.go:917: NOTE: Bulk operations are NOT transactional. Success=0, Failed=0
--- PASS: TestHandleBulkECOs_TransactionalIntegrity (0.00s)
=== RUN   TestBulkUpdateInventoryLocation
--- PASS: TestBulkUpdateInventoryLocation (0.00s)
=== RUN   TestBulkUpdateInventoryReorderPoint
--- PASS: TestBulkUpdateInventoryReorderPoint (0.00s)
=== RUN   TestBulkUpdateInventoryDisallowedField
--- PASS: TestBulkUpdateInventoryDisallowedField (0.00s)
=== RUN   TestBulkUpdateInventoryEmptyIDs
--- PASS: TestBulkUpdateInventoryEmptyIDs (0.00s)
=== RUN   TestBulkUpdateInventoryEmptyUpdates
--- PASS: TestBulkUpdateInventoryEmptyUpdates (0.00s)
=== RUN   TestBulkUpdateInventoryNotFound
--- PASS: TestBulkUpdateInventoryNotFound (0.00s)
=== RUN   TestBulkUpdateWorkOrdersStatus
--- PASS: TestBulkUpdateWorkOrdersStatus (0.00s)
=== RUN   TestBulkUpdateWorkOrdersPriority
--- PASS: TestBulkUpdateWorkOrdersPriority (0.00s)
=== RUN   TestBulkUpdateWorkOrdersInvalidStatus
--- PASS: TestBulkUpdateWorkOrdersInvalidStatus (0.00s)
=== RUN   TestBulkUpdateWorkOrdersInvalidPriority
--- PASS: TestBulkUpdateWorkOrdersInvalidPriority (0.00s)
=== RUN   TestBulkUpdateWorkOrdersDisallowedField
--- PASS: TestBulkUpdateWorkOrdersDisallowedField (0.00s)
=== RUN   TestBulkUpdateDevicesStatus
--- PASS: TestBulkUpdateDevicesStatus (0.00s)
=== RUN   TestBulkUpdateDevicesCustomerAndLocation
--- PASS: TestBulkUpdateDevicesCustomerAndLocation (0.00s)
=== RUN   TestBulkUpdateDevicesInvalidStatus
--- PASS: TestBulkUpdateDevicesInvalidStatus (0.00s)
=== RUN   TestBulkUpdateDevicesDisallowedField
--- PASS: TestBulkUpdateDevicesDisallowedField (0.00s)
=== RUN   TestBulkUpdatePartsCategory
--- PASS: TestBulkUpdatePartsCategory (0.00s)
=== RUN   TestBulkUpdatePartsLifecycle
--- PASS: TestBulkUpdatePartsLifecycle (0.00s)
=== RUN   TestBulkUpdatePartsMinStock
--- PASS: TestBulkUpdatePartsMinStock (0.00s)
=== RUN   TestBulkUpdatePartsDisallowedField
--- PASS: TestBulkUpdatePartsDisallowedField (0.00s)
=== RUN   TestBulkUpdateECOsStatus
--- PASS: TestBulkUpdateECOsStatus (0.00s)
=== RUN   TestBulkUpdateECOsPriority
--- PASS: TestBulkUpdateECOsPriority (0.00s)
=== RUN   TestBulkUpdateECOsInvalidStatus
--- PASS: TestBulkUpdateECOsInvalidStatus (0.00s)
=== RUN   TestBulkUpdateECOsDisallowedField
--- PASS: TestBulkUpdateECOsDisallowedField (0.00s)
=== RUN   TestBulkUpdateAuditLogging
--- PASS: TestBulkUpdateAuditLogging (0.00s)
=== RUN   TestBulkUpdatePartialFailure
--- PASS: TestBulkUpdatePartialFailure (0.00s)
=== RUN   TestBulkUpdateTransactionSafety
--- PASS: TestBulkUpdateTransactionSafety (0.00s)
=== RUN   TestBulkUpdateTimestamps
--- PASS: TestBulkUpdateTimestamps (0.00s)
=== RUN   TestHandleCalendar_CurrentMonth
--- PASS: TestHandleCalendar_CurrentMonth (0.00s)
=== RUN   TestHandleCalendar_SpecificMonth
--- PASS: TestHandleCalendar_SpecificMonth (0.00s)
=== RUN   TestHandleCalendar_Empty
--- PASS: TestHandleCalendar_Empty (0.00s)
=== RUN   TestHandleCalendar_WorkOrderWithNotes
--- PASS: TestHandleCalendar_WorkOrderWithNotes (0.00s)
=== RUN   TestHandleCalendar_WorkOrderWithoutNotes
--- PASS: TestHandleCalendar_WorkOrderWithoutNotes (0.00s)
=== RUN   TestHandleCalendar_WorkOrderEstimatedDueDate
--- PASS: TestHandleCalendar_WorkOrderEstimatedDueDate (0.00s)
=== RUN   TestHandleCalendar_POWithNotes
--- PASS: TestHandleCalendar_POWithNotes (0.00s)
=== RUN   TestHandleCalendar_POWithoutNotes
--- PASS: TestHandleCalendar_POWithoutNotes (0.00s)
=== RUN   TestHandleCalendar_QuoteWithCustomer
--- PASS: TestHandleCalendar_QuoteWithCustomer (0.00s)
=== RUN   TestHandleCalendar_QuoteWithoutCustomer
--- PASS: TestHandleCalendar_QuoteWithoutCustomer (0.00s)
=== RUN   TestHandleCalendar_EventColors
--- PASS: TestHandleCalendar_EventColors (0.00s)
=== RUN   TestHandleCalendar_DateFormatting
--- PASS: TestHandleCalendar_DateFormatting (0.00s)
=== RUN   TestHandleCalendar_DateRangeQuery
--- PASS: TestHandleCalendar_DateRangeQuery (0.00s)
=== RUN   TestHandleCalendar_MultipleEventsPerDay
--- PASS: TestHandleCalendar_MultipleEventsPerDay (0.00s)
=== RUN   TestHandleCalendar_InvalidMonth
--- PASS: TestHandleCalendar_InvalidMonth (0.00s)
=== RUN   TestHandleCalendar_EventAggregation
--- PASS: TestHandleCalendar_EventAggregation (0.00s)
=== RUN   TestHandleCalendar_DefaultsToCurrentMonth
--- PASS: TestHandleCalendar_DefaultsToCurrentMonth (0.00s)
=== RUN   TestHandleCalendar_EventRecordIDPopulated
--- PASS: TestHandleCalendar_EventRecordIDPopulated (0.00s)
=== RUN   TestCAPACRUD
--- PASS: TestCAPACRUD (0.05s)
=== RUN   TestCAPACloseRequiresEffectivenessAndApproval
--- PASS: TestCAPACloseRequiresEffectivenessAndApproval (0.05s)
=== RUN   TestCAPADashboard
audit log error: SQL logic error: no such table: audit_log (1)
    handler_capa_test.go:162: dashboard: expected 200, got 500
--- FAIL: TestCAPADashboard (0.00s)
=== RUN   TestCAPAGetNotFound
--- PASS: TestCAPAGetNotFound (0.00s)
=== RUN   TestCAPAPreventiveType
--- PASS: TestCAPAPreventiveType (0.00s)
=== RUN   TestCAPADefaultType
--- PASS: TestCAPADefaultType (0.00s)
=== RUN   TestRecordChangeCreate
--- PASS: TestRecordChangeCreate (0.00s)
=== RUN   TestCircularBOM_DirectSelfReference
    handler_circular_bom_test.go:189: Direct circular BOM response: map[children:[map[children:[] description:100Î© Resistor ipn:RES-001 qty:1 ref:R1] map[children:[map[children:[] description:100Î© Resistor ipn:RES-001 qty:1 ref:R1] map[children:[map[children:[] description:100Î© Resistor ipn:RES-001 qty:1 ref:R1] map[children:[map[children:[] description:100Î© Resistor ipn:RES-001 qty:1 ref:R1] map[children:[map[children:[] description:100Î© Resistor ipn:RES-001 qty:1 ref:R1] map[children:[map[children:[] description:100Î© Resistor ipn:RES-001 qty:1 ref:R1] map[children:[] description:(max depth reached) ipn:PCA-SELF qty:1 ref:A1]] description:Self-reference ipn:PCA-SELF qty:1 ref:A1]] description:Self-referencing assembly ipn:PCA-SELF qty:1 ref:A1]] description:Self-reference ipn:PCA-SELF qty:1 ref:A1]] description:Self-reference ipn:PCA-SELF qty:1 ref:A1]] description:Self-reference ipn:PCA-SELF qty:1 ref:A1]] description:Self-reference ipn:PCA-SELF]
audit log error: SQL logic error: table audit_log has no column named module (1)
    handler_circular_bom_test.go:214: Direct circular BOM cost: 0.60
--- PASS: TestCircularBOM_DirectSelfReference (0.00s)
=== RUN   TestCircularBOM_IndirectReference
    handler_circular_bom_test.go:280: Indirect circular BOM response (should be depth-limited): map[children:[map[children:[] description: ipn:RES-001 qty:1 ref:R1] map[children:[map[children:[] description: ipn:CAP-001 qty:1 ref:C1] map[children:[map[children:[] description: ipn:RES-001 qty:1 ref:R1] map[children:[map[children:[] description: ipn:CAP-001 qty:1 ref:C1] map[children:[map[children:[] description: ipn:RES-001 qty:1 ref:R1] map[children:[map[children:[] description: ipn:CAP-001 qty:1 ref:C1] map[children:[] description:(max depth reached) ipn:PCA-A qty:1 ref:A1]] description: ipn:PCA-B qty:1 ref:A1]] description: ipn:PCA-A qty:1 ref:A1]] description: ipn:PCA-B qty:1 ref:A1]] description: ipn:PCA-A qty:1 ref:A1]] description: ipn:PCA-B qty:1 ref:A1]] description: ipn:PCA-A]
audit log error: SQL logic error: table audit_log has no column named module (1)
    handler_circular_bom_test.go:305: Indirect circular BOM cost: 1.05
--- PASS: TestCircularBOM_IndirectReference (0.00s)
=== RUN   TestCircularBOM_DeepNesting
    handler_circular_bom_test.go:373: Deep nested BOM (15 levels requested): {
          "children": [
            {
              "children": [
                {
                  "children": [
                    {
                      "children": [
                        {
                          "children": [
                            {
                              "children": [
                                {
                                  "children": [],
                                  "description": "(max depth reached)",
                                  "ipn": "PCA-LEVEL-06",
                                  "qty": 1
                                }
                              ],
                              "description": "Assembly Level 5",
                              "ipn": "PCA-LEVEL-05",
                              "qty": 1
                            }
                          ],
                          "description": "",
                          "ipn": "PCA-LEVEL-04",
                          "qty": 1
                        }
                      ],
                      "description": "Assembly Level 3",
                      "ipn": "PCA-LEVEL-03",
                      "qty": 1
                    }
                  ],
                  "description": "",
                  "ipn": "PCA-LEVEL-02",
                  "qty": 1
                }
              ],
              "description": "Assembly Level 1",
              "ipn": "PCA-LEVEL-01",
              "qty": 1
            }
          ],
          "description": "Assembly Level 0",
          "ipn": "PCA-LEVEL-00"
        }
audit log error: SQL logic error: table audit_log has no column named module (1)
    handler_circular_bom_test.go:399: Deep nested BOM cost: 0.00
--- PASS: TestCircularBOM_DeepNesting (0.00s)
=== RUN   TestCircularBOM_ComplexCircular
    handler_circular_bom_test.go:478: Complex circular BOM: {
          "children": [
            {
              "children": [
                {
                  "children": [
                    {
                      "children": [
                        {
                          "children": [
                            {
                              "children": [
                                {
                                  "children": [],
                                  "description": "(max depth reached)",
                                  "ipn": "ASY-ROOT",
                                  "qty": 1
                                }
                              ],
                              "description": "",
                              "ipn": "PCA-C",
                              "qty": 1
                            }
                          ],
                          "description": "",
                          "ipn": "PCA-A",
                          "qty": 1
                        },
                        {
                          "children": [
                            {
                              "children": [
                                {
                                  "children": [],
                                  "description": "(max depth reached)",
                                  "ipn": "ASY-ROOT",
                                  "qty": 1
                                }
                              ],
                              "description": "",
                              "ipn": "PCA-C",
                              "qty": 2
                            }
                          ],
                          "description": "Sub-Assembly B",
                          "ipn": "PCA-B",
                          "qty": 1
                        },
                        {
                          "children": [],
                          "description": "Resistor",
                          "ipn": "RES-001",
                          "qty": 1
                        }
                      ],
                      "description": "",
                      "ipn": "ASY-ROOT",
                      "qty": 1
                    }
                  ],
                  "description": "Sub-Assembly C",
                  "ipn": "PCA-C",
                  "qty": 1
                }
              ],
              "description": "",
              "ipn": "PCA-A",
              "qty": 1
            },
            {
              "children": [
                {
                  "children": [
                    {
                      "children": [
                        {
                          "children": [
                            {
                              "children": [
                                {
                                  "children": [],
                                  "description": "(max depth reached)",
                                  "ipn": "ASY-ROOT",
                                  "qty": 1
                                }
                              ],
                              "description": "",
                              "ipn": "PCA-C",
                              "qty": 1
                            }
                          ],
                          "description": "Sub-Assembly A",
                          "ipn": "PCA-A",
                          "qty": 1
                        },
                        {
                          "children": [
                            {
                              "children": [
                                {
                                  "children": [],
                                  "description": "(max depth reached)",
                                  "ipn": "ASY-ROOT",
                                  "qty": 1
                                }
                              ],
                              "description": "",
                              "ipn": "PCA-C",
                              "qty": 2
                            }
                          ],
                          "description": "",
                          "ipn": "PCA-B",
                          "qty": 1
                        },
                        {
                          "children": [],
                          "description": "",
                          "ipn": "RES-001",
                          "qty": 1
                        }
                      ],
                      "description": "",
                      "ipn": "ASY-ROOT",
                      "qty": 1
                    }
                  ],
                  "description": "",
                  "ipn": "PCA-C",
                  "qty": 2
                }
              ],
              "description": "Sub-Assembly B",
              "ipn": "PCA-B",
              "qty": 1
            },
            {
              "children": [],
              "description": "Resistor",
              "ipn": "RES-001",
              "qty": 1
            }
          ],
          "description": "",
          "ipn": "ASY-ROOT"
        }
audit log error: SQL logic error: table audit_log has no column named module (1)
    handler_circular_bom_test.go:502: Complex circular BOM cost: 0.40
--- PASS: TestCircularBOM_ComplexCircular (0.00s)
=== RUN   TestCircularBOM_GracefulTermination
=== RUN   TestCircularBOM_GracefulTermination/BOM_retrieval_ALPHA
    handler_circular_bom_test.go:578: BOM retrieval ALPHA completed successfully
=== RUN   TestCircularBOM_GracefulTermination/BOM_retrieval_BETA
    handler_circular_bom_test.go:578: BOM retrieval BETA completed successfully
=== RUN   TestCircularBOM_GracefulTermination/Cost_calculation_ALPHA
audit log error: SQL logic error: table audit_log has no column named module (1)
    handler_circular_bom_test.go:578: Cost calculation ALPHA completed successfully
=== RUN   TestCircularBOM_GracefulTermination/Cost_calculation_BETA
audit log error: SQL logic error: table audit_log has no column named module (1)
    handler_circular_bom_test.go:578: Cost calculation BETA completed successfully
--- PASS: TestCircularBOM_GracefulTermination (0.00s)
    --- PASS: TestCircularBOM_GracefulTermination/BOM_retrieval_ALPHA (0.00s)
    --- PASS: TestCircularBOM_GracefulTermination/BOM_retrieval_BETA (0.00s)
    --- PASS: TestCircularBOM_GracefulTermination/Cost_calculation_ALPHA (0.00s)
    --- PASS: TestCircularBOM_GracefulTermination/Cost_calculation_BETA (0.00s)
=== RUN   TestCircularBOM_RejectOrLimit
    handler_circular_bom_test.go:644: Circular BOM depth-limited (acceptable): {
          "children": [
            {
              "children": [],
              "description": "",
              "ipn": "RES-001",
              "qty": 1
            },
            {
              "children": [
                {
                  "children": [],
                  "description": "",
                  "ipn": "RES-001",
                  "qty": 1
                },
                {
                  "children": [
                    {
                      "children": [],
                      "description": "",
                      "ipn": "RES-001",
                      "qty": 1
                    },
                    {
                      "children": [
                        {
                          "children": [],
                          "description": "",
                          "ipn": "RES-001",
                          "qty": 1
                        },
                        {
                          "children": [
                            {
                              "children": [],
                              "description": "",
                              "ipn": "RES-001",
                              "qty": 1
                            },
                            {
                              "children": [
                                {
                                  "children": [],
                                  "description": "",
                                  "ipn": "RES-001",
                                  "qty": 1
                                },
                                {
                                  "children": [],
                                  "description": "(max depth reached)",
                                  "ipn": "PCA-CIRCLE",
                                  "qty": 1
                                }
                              ],
                              "description": "",
                              "ipn": "PCA-CIRCLE",
                              "qty": 1
                            }
                          ],
                          "description": "",
                          "ipn": "PCA-CIRCLE",
                          "qty": 1
                        }
                      ],
                      "description": "",
                      "ipn": "PCA-CIRCLE",
                      "qty": 1
                    }
                  ],
                  "description": "",
                  "ipn": "PCA-CIRCLE",
                  "qty": 1
                }
              ],
              "description": "",
              "ipn": "PCA-CIRCLE",
              "qty": 1
            }
          ],
          "description": "Circular Assembly",
          "ipn": "PCA-CIRCLE"
        }
--- PASS: TestCircularBOM_RejectOrLimit (0.00s)
=== RUN   TestCostRollup_Calculation
=== RUN   TestCostRollup_Calculation/simple_costs
=== RUN   TestCostRollup_Calculation/zero_overhead
=== RUN   TestCostRollup_Calculation/all_zeros
=== RUN   TestCostRollup_Calculation/high_precision
--- PASS: TestCostRollup_Calculation (0.00s)
    --- PASS: TestCostRollup_Calculation/simple_costs (0.00s)
    --- PASS: TestCostRollup_Calculation/zero_overhead (0.00s)
    --- PASS: TestCostRollup_Calculation/all_zeros (0.00s)
    --- PASS: TestCostRollup_Calculation/high_precision (0.00s)
=== RUN   TestCostRollup_MarginCalculation
=== RUN   TestCostRollup_MarginCalculation/50%_margin
=== RUN   TestCostRollup_MarginCalculation/25%_margin
=== RUN   TestCostRollup_MarginCalculation/zero_margin_(break_even)
=== RUN   TestCostRollup_MarginCalculation/negative_margin_(loss)
--- PASS: TestCostRollup_MarginCalculation (0.00s)
    --- PASS: TestCostRollup_MarginCalculation/50%_margin (0.00s)
    --- PASS: TestCostRollup_MarginCalculation/25%_margin (0.00s)
    --- PASS: TestCostRollup_MarginCalculation/zero_margin_(break_even) (0.00s)
    --- PASS: TestCostRollup_MarginCalculation/negative_margin_(loss) (0.00s)
=== RUN   TestCostRollup_NoPricing
--- PASS: TestCostRollup_NoPricing (0.00s)
=== RUN   TestCostRollup_ComponentValidation
--- PASS: TestCostRollup_ComponentValidation (0.00s)
=== RUN   TestCostRollup_Upsert
--- PASS: TestCostRollup_Upsert (0.00s)
=== RUN   TestCostRollup_LargeNumbers
--- PASS: TestCostRollup_LargeNumbers (0.00s)
=== RUN   TestCostRollup_MaterialLaborBreakdown
=== RUN   TestCostRollup_MaterialLaborBreakdown/material_heavy_(70%)
=== RUN   TestCostRollup_MaterialLaborBreakdown/labor_heavy_(60%)
=== RUN   TestCostRollup_MaterialLaborBreakdown/balanced
--- PASS: TestCostRollup_MaterialLaborBreakdown (0.00s)
    --- PASS: TestCostRollup_MaterialLaborBreakdown/material_heavy_(70%) (0.00s)
    --- PASS: TestCostRollup_MaterialLaborBreakdown/labor_heavy_(60%) (0.00s)
    --- PASS: TestCostRollup_MaterialLaborBreakdown/balanced (0.00s)
=== RUN   TestHandleListDevices
--- PASS: TestHandleListDevices (0.00s)
=== RUN   TestHandleListDevices_Empty
--- PASS: TestHandleListDevices_Empty (0.00s)
=== RUN   TestHandleGetDevice
--- PASS: TestHandleGetDevice (0.00s)
=== RUN   TestHandleGetDevice_NotFound
--- PASS: TestHandleGetDevice_NotFound (0.00s)
=== RUN   TestHandleCreateDevice
--- PASS: TestHandleCreateDevice (0.00s)
=== RUN   TestHandleCreateDevice_DefaultStatus
--- PASS: TestHandleCreateDevice_DefaultStatus (0.00s)
=== RUN   TestHandleCreateDevice_MissingSerialNumber
--- PASS: TestHandleCreateDevice_MissingSerialNumber (0.00s)
=== RUN   TestHandleCreateDevice_MissingIPN
--- PASS: TestHandleCreateDevice_MissingIPN (0.00s)
=== RUN   TestHandleCreateDevice_InvalidJSON
--- PASS: TestHandleCreateDevice_InvalidJSON (0.00s)
=== RUN   TestHandleUpdateDevice
--- PASS: TestHandleUpdateDevice (0.00s)
=== RUN   TestHandleExportDevices
--- PASS: TestHandleExportDevices (0.00s)
=== RUN   TestHandleImportDevices
--- PASS: TestHandleImportDevices (0.00s)
=== RUN   TestHandleImportDevices_SkipInvalidRows
--- PASS: TestHandleImportDevices_SkipInvalidRows (0.00s)
=== RUN   TestHandleImportDevices_MissingFile
--- PASS: TestHandleImportDevices_MissingFile (0.00s)
=== RUN   TestHandleDeviceHistory
--- PASS: TestHandleDeviceHistory (0.00s)
=== RUN   TestHandleDeviceHistory_NoHistory
--- PASS: TestHandleDeviceHistory_NoHistory (0.00s)
=== RUN   TestDocVersionCRUD
--- PASS: TestDocVersionCRUD (0.05s)
=== RUN   TestDocRelease
--- PASS: TestDocRelease (0.05s)
=== RUN   TestDocRevert
--- PASS: TestDocRevert (0.05s)
=== RUN   TestDocDiff
--- PASS: TestDocDiff (0.05s)
=== RUN   TestDocDiffMissingParams
--- PASS: TestDocDiffMissingParams (0.05s)
=== RUN   TestGetDocVersionByRevision
--- PASS: TestGetDocVersionByRevision (0.05s)
=== RUN   TestNextRevision
--- PASS: TestNextRevision (0.00s)
=== RUN   TestGitDocsSettings
--- PASS: TestGitDocsSettings (0.05s)
=== RUN   TestPushDocToGitNoConfig
--- PASS: TestPushDocToGitNoConfig (0.05s)
=== RUN   TestComputeDiff
--- PASS: TestComputeDiff (0.00s)
=== RUN   TestHandleListDocs_Empty
--- PASS: TestHandleListDocs_Empty (0.00s)
=== RUN   TestHandleListDocs_WithData
--- PASS: TestHandleListDocs_WithData (0.00s)
=== RUN   TestHandleGetDoc_Success
--- PASS: TestHandleGetDoc_Success (0.00s)
=== RUN   TestHandleGetDoc_NotFound
--- PASS: TestHandleGetDoc_NotFound (0.00s)
=== RUN   TestHandleCreateDoc_Success
--- PASS: TestHandleCreateDoc_Success (0.00s)
=== RUN   TestHandleCreateDoc_MissingTitle
--- PASS: TestHandleCreateDoc_MissingTitle (0.00s)
=== RUN   TestHandleCreateDoc_InvalidStatus
--- PASS: TestHandleCreateDoc_InvalidStatus (0.00s)
=== RUN   TestHandleCreateDoc_DefaultValues
--- PASS: TestHandleCreateDoc_DefaultValues (0.00s)
=== RUN   TestHandleUpdateDoc_Success
--- PASS: TestHandleUpdateDoc_Success (0.00s)
=== RUN   TestHandleUpdateDoc_NotFound
--- PASS: TestHandleUpdateDoc_NotFound (0.00s)
=== RUN   TestHandleUpdateDoc_PreservesStatus
--- PASS: TestHandleUpdateDoc_PreservesStatus (0.00s)
=== RUN   TestHandleApproveDoc_Success
--- PASS: TestHandleApproveDoc_Success (0.00s)
=== RUN   TestHandleApproveDoc_NotFound
--- PASS: TestHandleApproveDoc_NotFound (0.00s)
=== RUN   TestHandleDocs_InvalidJSON
--- PASS: TestHandleDocs_InvalidJSON (0.00s)
=== RUN   TestHandleDocs_SQLInjectionAttempt
--- PASS: TestHandleDocs_SQLInjectionAttempt (0.00s)
=== RUN   TestHandleDocs_FilePathValidation
=== RUN   TestHandleDocs_FilePathValidation/Valid_file_path
=== RUN   TestHandleDocs_FilePathValidation/Path_traversal_attempt
=== RUN   TestHandleDocs_FilePathValidation/Absolute_path
--- PASS: TestHandleDocs_FilePathValidation (0.00s)
    --- PASS: TestHandleDocs_FilePathValidation/Valid_file_path (0.00s)
    --- PASS: TestHandleDocs_FilePathValidation/Path_traversal_attempt (0.00s)
    --- PASS: TestHandleDocs_FilePathValidation/Absolute_path (0.00s)
=== RUN   TestHandleDocs_CategoryFilter
--- PASS: TestHandleDocs_CategoryFilter (0.00s)
=== RUN   TestECOPartRevisionCascade
    handler_eco_cascade_test.go:485: Step 1: Creating component part RES-100 v1.0
    handler_eco_cascade_test.go:499: Step 2: Creating assembly PCA-001 with RES-100 in BOM
    handler_eco_cascade_test.go:519: Step 3: Creating ECO-001 to update RES-100 to v1.1
    handler_eco_cascade_test.go:544: Created ECO: ECO-2026-001
    handler_eco_cascade_test.go:547: Step 4: Approving ECO
    handler_eco_cascade_test.go:565: Step 5: Implementing ECO - should update part and cascade to BOMs
    handler_eco_cascade_test.go:587: Step 6: Verifying part revision updated to v1.1
    handler_eco_cascade_test.go:594: Step 7: Verifying BOM references remain intact
    handler_eco_cascade_test.go:604: Step 8: Verifying audit trail
    handler_eco_cascade_test.go:612: Step 9: Verifying change history
    handler_eco_cascade_test.go:616: Warning: Expected at least 1 change record, got 0
    handler_eco_cascade_test.go:619: âœ… ECO part revision cascade test completed successfully
--- PASS: TestECOPartRevisionCascade (0.00s)
=== RUN   TestECOMultipleBOMCascade
    handler_eco_cascade_test.go:637: Creating component CAP-300 v1.0
    handler_eco_cascade_test.go:643: Creating multiple assemblies using CAP-300
    handler_eco_cascade_test.go:659: Updating CAP-300 to v2.0
    handler_eco_cascade_test.go:665: Verifying all BOMs still reference CAP-300
    handler_eco_cascade_test.go:687: âœ… Multiple BOM cascade test completed successfully
--- PASS: TestECOMultipleBOMCascade (0.00s)
=== RUN   TestECORevisionHistoryPreservation
    handler_eco_cascade_test.go:752: âœ… Revision history preservation test completed successfully
--- PASS: TestECORevisionHistoryPreservation (0.00s)
=== RUN   TestHandleListECOs_Empty
--- PASS: TestHandleListECOs_Empty (0.00s)
=== RUN   TestHandleListECOs_WithData
--- PASS: TestHandleListECOs_WithData (0.00s)
=== RUN   TestHandleListECOs_FilterByStatus
--- PASS: TestHandleListECOs_FilterByStatus (0.00s)
=== RUN   TestHandleGetECO_Success
--- PASS: TestHandleGetECO_Success (0.00s)
=== RUN   TestHandleGetECO_NotFound
--- PASS: TestHandleGetECO_NotFound (0.00s)
=== RUN   TestHandleCreateECO_Success
--- PASS: TestHandleCreateECO_Success (0.00s)
=== RUN   TestHandleCreateECO_MissingTitle
--- PASS: TestHandleCreateECO_MissingTitle (0.00s)
=== RUN   TestHandleCreateECO_InvalidStatus
--- PASS: TestHandleCreateECO_InvalidStatus (0.00s)
=== RUN   TestHandleCreateECO_DefaultValues
--- PASS: TestHandleCreateECO_DefaultValues (0.00s)
=== RUN   TestHandleUpdateECO_Success
--- PASS: TestHandleUpdateECO_Success (0.00s)
=== RUN   TestHandleUpdateECO_NotFound
--- PASS: TestHandleUpdateECO_NotFound (0.00s)
=== RUN   TestHandleUpdateECO_ValidationError
--- PASS: TestHandleUpdateECO_ValidationError (0.00s)
=== RUN   TestHandleApproveECO_Success
--- PASS: TestHandleApproveECO_Success (0.00s)
=== RUN   TestHandleImplementECO_Success
--- PASS: TestHandleImplementECO_Success (0.00s)
=== RUN   TestHandleListECORevisions_Empty
--- PASS: TestHandleListECORevisions_Empty (0.00s)
=== RUN   TestHandleListECORevisions_WithData
--- PASS: TestHandleListECORevisions_WithData (0.00s)
=== RUN   TestHandleCreateECORevision_Success
--- PASS: TestHandleCreateECORevision_Success (0.00s)
=== RUN   TestHandleGetECORevision_Success
--- PASS: TestHandleGetECORevision_Success (0.00s)
=== RUN   TestHandleGetECORevision_NotFound
--- PASS: TestHandleGetECORevision_NotFound (0.00s)
=== RUN   TestHandleGetEmailConfig_Default
--- PASS: TestHandleGetEmailConfig_Default (0.00s)
=== RUN   TestHandleGetEmailConfig_Existing
--- PASS: TestHandleGetEmailConfig_Existing (0.00s)
=== RUN   TestHandleUpdateEmailConfig_New
--- PASS: TestHandleUpdateEmailConfig_New (0.00s)
=== RUN   TestHandleUpdateEmailConfig_PreservePassword
--- PASS: TestHandleUpdateEmailConfig_PreservePassword (0.00s)
=== RUN   TestHandleUpdateEmailConfig_DefaultPort
--- PASS: TestHandleUpdateEmailConfig_DefaultPort (0.00s)
=== RUN   TestHandleUpdateEmailConfig_InvalidJSON
--- PASS: TestHandleUpdateEmailConfig_InvalidJSON (0.00s)
=== RUN   TestHandleTestEmail_Success
--- PASS: TestHandleTestEmail_Success (0.00s)
=== RUN   TestHandleTestEmail_TestEmailField
--- PASS: TestHandleTestEmail_TestEmailField (0.00s)
=== RUN   TestHandleTestEmail_MissingRecipient
--- PASS: TestHandleTestEmail_MissingRecipient (0.00s)
=== RUN   TestHandleTestEmail_SendFailure
--- PASS: TestHandleTestEmail_SendFailure (0.00s)
=== RUN   TestHandleListEmailLog
--- PASS: TestHandleListEmailLog (0.00s)
=== RUN   TestHandleListEmailLog_Empty
--- PASS: TestHandleListEmailLog_Empty (0.00s)
=== RUN   TestSendEmail_LogsSuccess
--- PASS: TestSendEmail_LogsSuccess (0.00s)
=== RUN   TestSendEmail_LogsFailure
--- PASS: TestSendEmail_LogsFailure (0.00s)
=== RUN   TestHandleGetEmailSubscriptions_Default
--- PASS: TestHandleGetEmailSubscriptions_Default (0.00s)
=== RUN   TestHandleGetEmailSubscriptions_Custom
--- PASS: TestHandleGetEmailSubscriptions_Custom (0.05s)
=== RUN   TestHandleUpdateEmailSubscriptions
--- PASS: TestHandleUpdateEmailSubscriptions (0.05s)
=== RUN   TestIsUserSubscribed_Default
--- PASS: TestIsUserSubscribed_Default (0.00s)
=== RUN   TestIsUserSubscribed_Disabled
--- PASS: TestIsUserSubscribed_Disabled (0.00s)
=== RUN   TestIsUserSubscribed_Enabled
--- PASS: TestIsUserSubscribed_Enabled (0.00s)
=== RUN   TestIsValidEmail
--- PASS: TestIsValidEmail (0.00s)
=== RUN   TestEmailConfigEnabled
--- PASS: TestEmailConfigEnabled (0.00s)
=== RUN   TestSendEmailWithEvent_HTMLInjection
--- PASS: TestSendEmailWithEvent_HTMLInjection (0.00s)
=== RUN   TestHandleExportParts_CSV
--- PASS: TestHandleExportParts_CSV (0.00s)
=== RUN   TestHandleExportParts_Excel
--- PASS: TestHandleExportParts_Excel (0.00s)
=== RUN   TestHandleExportParts_WithSearch
--- PASS: TestHandleExportParts_WithSearch (0.00s)
=== RUN   TestHandleExportParts_WithCategory
--- PASS: TestHandleExportParts_WithCategory (0.00s)
=== RUN   TestHandleExportInventory_CSV
--- PASS: TestHandleExportInventory_CSV (0.00s)
=== RUN   TestHandleExportInventory_LowStock
--- PASS: TestHandleExportInventory_LowStock (0.00s)
=== RUN   TestHandleExportWorkOrders_CSV
--- PASS: TestHandleExportWorkOrders_CSV (0.00s)
=== RUN   TestHandleExportWorkOrders_StatusFilter
--- PASS: TestHandleExportWorkOrders_StatusFilter (0.00s)
=== RUN   TestHandleExportECOs_CSV
--- PASS: TestHandleExportECOs_CSV (0.00s)
=== RUN   TestHandleExportVendors_CSV
--- PASS: TestHandleExportVendors_CSV (0.00s)
=== RUN   TestHandleExport_LargeDataset
--- PASS: TestHandleExport_LargeDataset (0.01s)
=== RUN   TestHandleExport_SQLInjection
=== RUN   TestHandleExport_SQLInjection/SQL_Injection_';_DROP_TABLE_parts;_--
=== RUN   TestHandleExport_SQLInjection/SQL_Injection_'_OR_'1'='1
=== RUN   TestHandleExport_SQLInjection/SQL_Injection_PART-001';_DELETE_FROM_parts_WHERE_'1'='1
--- PASS: TestHandleExport_SQLInjection (0.00s)
    --- PASS: TestHandleExport_SQLInjection/SQL_Injection_';_DROP_TABLE_parts;_-- (0.00s)
    --- PASS: TestHandleExport_SQLInjection/SQL_Injection_'_OR_'1'='1 (0.00s)
    --- PASS: TestHandleExport_SQLInjection/SQL_Injection_PART-001';_DELETE_FROM_parts_WHERE_'1'='1 (0.00s)
=== RUN   TestHandleExport_FormatValidation
=== RUN   TestHandleExport_FormatValidation/Default_to_CSV
=== RUN   TestHandleExport_FormatValidation/Explicit_CSV
=== RUN   TestHandleExport_FormatValidation/Excel_format
=== RUN   TestHandleExport_FormatValidation/Invalid_format_defaults_to_CSV
--- PASS: TestHandleExport_FormatValidation (0.00s)
    --- PASS: TestHandleExport_FormatValidation/Default_to_CSV (0.00s)
    --- PASS: TestHandleExport_FormatValidation/Explicit_CSV (0.00s)
    --- PASS: TestHandleExport_FormatValidation/Excel_format (0.00s)
    --- PASS: TestHandleExport_FormatValidation/Invalid_format_defaults_to_CSV (0.00s)
=== RUN   TestHandleExport_EmptyResults
--- PASS: TestHandleExport_EmptyResults (0.00s)
=== RUN   TestHandleExport_XSSInData
--- PASS: TestHandleExport_XSSInData (0.00s)
=== RUN   TestHandleExport_SpecialCharacters
--- PASS: TestHandleExport_SpecialCharacters (0.00s)
=== RUN   TestHandleExport_ExcelMultipleSheets
--- PASS: TestHandleExport_ExcelMultipleSheets (0.00s)
=== RUN   TestExportCSV_DirectFunction
--- PASS: TestExportCSV_DirectFunction (0.00s)
=== RUN   TestExportExcel_DirectFunction
--- PASS: TestExportExcel_DirectFunction (0.00s)
=== RUN   TestLogDataExport
--- PASS: TestLogDataExport (0.00s)
=== RUN   TestFieldReportCRUD
--- PASS: TestFieldReportCRUD (0.00s)
=== RUN   TestFieldReportGetNotFound
--- PASS: TestFieldReportGetNotFound (0.00s)
=== RUN   TestFieldReportCreateInvalidBody
--- PASS: TestFieldReportCreateInvalidBody (0.00s)
=== RUN   TestFieldReportCreateMissingTitle
--- PASS: TestFieldReportCreateMissingTitle (0.00s)
=== RUN   TestFieldReportValidationMaxLength
=== RUN   TestFieldReportValidationMaxLength/title_too_long
=== RUN   TestFieldReportValidationMaxLength/description_too_long
=== RUN   TestFieldReportValidationMaxLength/customer_name_too_long
=== RUN   TestFieldReportValidationMaxLength/valid_lengths
--- PASS: TestFieldReportValidationMaxLength (0.00s)
    --- PASS: TestFieldReportValidationMaxLength/title_too_long (0.00s)
    --- PASS: TestFieldReportValidationMaxLength/description_too_long (0.00s)
    --- PASS: TestFieldReportValidationMaxLength/customer_name_too_long (0.00s)
    --- PASS: TestFieldReportValidationMaxLength/valid_lengths (0.00s)
=== RUN   TestFieldReportFilters
--- PASS: TestFieldReportFilters (0.00s)
=== RUN   TestFieldReportResolve
--- PASS: TestFieldReportResolve (0.00s)
=== RUN   TestFieldReportCreateNCR
--- PASS: TestFieldReportCreateNCR (0.00s)
=== RUN   TestFieldReportCreateNCRNotFound
--- PASS: TestFieldReportCreateNCRNotFound (0.00s)
=== RUN   TestFieldReportCreateNCRSeverityMapping
=== RUN   TestFieldReportCreateNCRSeverityMapping/priority_critical
=== RUN   TestFieldReportCreateNCRSeverityMapping/priority_high
=== RUN   TestFieldReportCreateNCRSeverityMapping/priority_medium
=== RUN   TestFieldReportCreateNCRSeverityMapping/priority_low
--- PASS: TestFieldReportCreateNCRSeverityMapping (0.00s)
    --- PASS: TestFieldReportCreateNCRSeverityMapping/priority_critical (0.00s)
    --- PASS: TestFieldReportCreateNCRSeverityMapping/priority_high (0.00s)
    --- PASS: TestFieldReportCreateNCRSeverityMapping/priority_medium (0.00s)
    --- PASS: TestFieldReportCreateNCRSeverityMapping/priority_low (0.00s)
=== RUN   TestFieldReportECOLink
--- PASS: TestFieldReportECOLink (0.00s)
=== RUN   TestFieldReportLocationData
--- PASS: TestFieldReportLocationData (0.00s)
=== RUN   TestFieldReportDefaults
--- PASS: TestFieldReportDefaults (0.00s)
=== RUN   TestFieldReportUpdateNotFound
--- PASS: TestFieldReportUpdateNotFound (0.00s)
=== RUN   TestFieldReportDeleteNotFound
--- PASS: TestFieldReportDeleteNotFound (0.00s)
=== RUN   TestFieldReportDateRangeFilter
--- PASS: TestFieldReportDateRangeFilter (0.00s)
=== RUN   TestHandleListCampaigns_Empty
--- PASS: TestHandleListCampaigns_Empty (0.00s)
=== RUN   TestHandleListCampaigns_WithData
--- PASS: TestHandleListCampaigns_WithData (0.00s)
=== RUN   TestHandleGetCampaign_Success
--- PASS: TestHandleGetCampaign_Success (0.00s)
=== RUN   TestHandleGetCampaign_NotFound
--- PASS: TestHandleGetCampaign_NotFound (0.00s)
=== RUN   TestHandleCreateCampaign_Success
--- PASS: TestHandleCreateCampaign_Success (0.00s)
=== RUN   TestHandleCreateCampaign_ValidationErrors
=== RUN   TestHandleCreateCampaign_ValidationErrors/Missing_name
=== RUN   TestHandleCreateCampaign_ValidationErrors/Missing_version
=== RUN   TestHandleCreateCampaign_ValidationErrors/Invalid_body
--- PASS: TestHandleCreateCampaign_ValidationErrors (0.00s)
    --- PASS: TestHandleCreateCampaign_ValidationErrors/Missing_name (0.00s)
    --- PASS: TestHandleCreateCampaign_ValidationErrors/Missing_version (0.00s)
    --- PASS: TestHandleCreateCampaign_ValidationErrors/Invalid_body (0.00s)
=== RUN   TestHandleUpdateCampaign_Success
--- PASS: TestHandleUpdateCampaign_Success (0.00s)
=== RUN   TestHandleLaunchCampaign_Success
--- PASS: TestHandleLaunchCampaign_Success (0.00s)
=== RUN   TestHandleCampaignProgress
--- PASS: TestHandleCampaignProgress (0.00s)
=== RUN   TestHandleMarkCampaignDevice_Success
=== RUN   TestHandleMarkCampaignDevice_Success/Mark_as_updated
=== RUN   TestHandleMarkCampaignDevice_Success/Mark_as_failed
--- PASS: TestHandleMarkCampaignDevice_Success (0.00s)
    --- PASS: TestHandleMarkCampaignDevice_Success/Mark_as_updated (0.00s)
    --- PASS: TestHandleMarkCampaignDevice_Success/Mark_as_failed (0.00s)
=== RUN   TestHandleMarkCampaignDevice_ValidationErrors
=== RUN   TestHandleMarkCampaignDevice_ValidationErrors/Invalid_status
=== RUN   TestHandleMarkCampaignDevice_ValidationErrors/Missing_status
--- PASS: TestHandleMarkCampaignDevice_ValidationErrors (0.00s)
    --- PASS: TestHandleMarkCampaignDevice_ValidationErrors/Invalid_status (0.00s)
    --- PASS: TestHandleMarkCampaignDevice_ValidationErrors/Missing_status (0.00s)
=== RUN   TestHandleMarkCampaignDevice_NotFound
--- PASS: TestHandleMarkCampaignDevice_NotFound (0.00s)
=== RUN   TestHandleCampaignDevices
--- PASS: TestHandleCampaignDevices (0.00s)
=== RUN   TestHandleCampaignDevices_Empty
--- PASS: TestHandleCampaignDevices_Empty (0.00s)
=== RUN   TestGetGeneralSettingsDefaults
--- PASS: TestGetGeneralSettingsDefaults (0.00s)
=== RUN   TestPutGeneralSettings
--- PASS: TestPutGeneralSettings (0.00s)
=== RUN   TestHandleGetGitPLMConfig_NoConfig
--- PASS: TestHandleGetGitPLMConfig_NoConfig (0.00s)
=== RUN   TestHandleGetGitPLMConfig_WithConfig
--- PASS: TestHandleGetGitPLMConfig_WithConfig (0.00s)
=== RUN   TestHandleUpdateGitPLMConfig_Create
--- PASS: TestHandleUpdateGitPLMConfig_Create (0.00s)
=== RUN   TestHandleUpdateGitPLMConfig_TrimSlash
--- PASS: TestHandleUpdateGitPLMConfig_TrimSlash (0.00s)
=== RUN   TestHandleGetGitPLMURL_NotConfigured
--- PASS: TestHandleGetGitPLMURL_NotConfigured (0.00s)
=== RUN   TestHandleGetGitPLMURL_Configured
--- PASS: TestHandleGetGitPLMURL_Configured (0.00s)
=== RUN   TestGetGitPLMConfigDefault
--- PASS: TestGetGitPLMConfigDefault (0.05s)
=== RUN   TestUpdateAndGetGitPLMConfig
--- PASS: TestUpdateAndGetGitPLMConfig (0.05s)
=== RUN   TestUpdateGitPLMConfigOverwrite
--- PASS: TestUpdateGitPLMConfigOverwrite (0.05s)
=== RUN   TestGetGitPLMURLNotConfigured
--- PASS: TestGetGitPLMURLNotConfigured (0.05s)
=== RUN   TestGetGitPLMURLConfigured
--- PASS: TestGetGitPLMURLConfigured (0.05s)
=== RUN   TestVendorNameLengthValidation
=== RUN   TestVendorNameLengthValidation/Empty_name
=== RUN   TestVendorNameLengthValidation/Single_char
audit log error: SQL logic error: table audit_log has no column named module (1)
=== RUN   TestVendorNameLengthValidation/Max_valid_(255)
audit log error: SQL logic error: table audit_log has no column named module (1)
=== RUN   TestVendorNameLengthValidation/Over_max_(256)
=== RUN   TestVendorNameLengthValidation/Way_over_max_(10k)
--- PASS: TestVendorNameLengthValidation (0.00s)
    --- PASS: TestVendorNameLengthValidation/Empty_name (0.00s)
    --- PASS: TestVendorNameLengthValidation/Single_char (0.00s)
    --- PASS: TestVendorNameLengthValidation/Max_valid_(255) (0.00s)
    --- PASS: TestVendorNameLengthValidation/Over_max_(256) (0.00s)
    --- PASS: TestVendorNameLengthValidation/Way_over_max_(10k) (0.00s)
=== RUN   TestVendorNotesLengthValidation
=== RUN   TestVendorNotesLengthValidation/Empty_notes
audit log error: SQL logic error: table audit_log has no column named module (1)
=== RUN   TestVendorNotesLengthValidation/Single_char
audit log error: SQL logic error: table audit_log has no column named module (1)
=== RUN   TestVendorNotesLengthValidation/Max_valid_(10000)
audit log error: SQL logic error: table audit_log has no column named module (1)
=== RUN   TestVendorNotesLengthValidation/Over_max_(10001)
=== RUN   TestVendorNotesLengthValidation/Way_over_(50k)
--- PASS: TestVendorNotesLengthValidation (0.00s)
    --- PASS: TestVendorNotesLengthValidation/Empty_notes (0.00s)
    --- PASS: TestVendorNotesLengthValidation/Single_char (0.00s)
    --- PASS: TestVendorNotesLengthValidation/Max_valid_(10000) (0.00s)
    --- PASS: TestVendorNotesLengthValidation/Over_max_(10001) (0.00s)
    --- PASS: TestVendorNotesLengthValidation/Way_over_(50k) (0.00s)
=== RUN   TestDeviceNotesLengthValidation
=== RUN   TestDeviceNotesLengthValidation/Empty_notes
audit log error: SQL logic error: table audit_log has no column named module (1)
=== RUN   TestDeviceNotesLengthValidation/Single_char
audit log error: SQL logic error: table audit_log has no column named module (1)
=== RUN   TestDeviceNotesLengthValidation/Max_valid_(10000)
audit log error: SQL logic error: table audit_log has no column named module (1)
=== RUN   TestDeviceNotesLengthValidation/Over_max_(10001)
--- PASS: TestDeviceNotesLengthValidation (0.00s)
    --- PASS: TestDeviceNotesLengthValidation/Empty_notes (0.00s)
    --- PASS: TestDeviceNotesLengthValidation/Single_char (0.00s)
    --- PASS: TestDeviceNotesLengthValidation/Max_valid_(10000) (0.00s)
    --- PASS: TestDeviceNotesLengthValidation/Over_max_(10001) (0.00s)
=== RUN   TestNCRDescriptionLengthValidation
=== RUN   TestNCRDescriptionLengthValidation/Empty_description
audit log error: SQL logic error: table audit_log has no column named module (1)
=== RUN   TestNCRDescriptionLengthValidation/Single_char
    handler_input_validation_test.go:388: Expected success for Single char, got 500: {"error":"SQL logic error: no such table: ncrs (1)"}
=== RUN   TestNCRDescriptionLengthValidation/Max_valid_(1000)
    handler_input_validation_test.go:388: Expected success for Max valid (1000), got 500: {"error":"SQL logic error: no such table: ncrs (1)"}
=== RUN   TestNCRDescriptionLengthValidation/Over_max_(1001)
=== RUN   TestNCRDescriptionLengthValidation/Way_over_(10k)
--- FAIL: TestNCRDescriptionLengthValidation (0.00s)
    --- PASS: TestNCRDescriptionLengthValidation/Empty_description (0.00s)
    --- FAIL: TestNCRDescriptionLengthValidation/Single_char (0.00s)
    --- FAIL: TestNCRDescriptionLengthValidation/Max_valid_(1000) (0.00s)
    --- PASS: TestNCRDescriptionLengthValidation/Over_max_(1001) (0.00s)
    --- PASS: TestNCRDescriptionLengthValidation/Way_over_(10k) (0.00s)
=== RUN   TestNCRTitleLengthValidation
=== RUN   TestNCRTitleLengthValidation/Empty_title
=== RUN   TestNCRTitleLengthValidation/Single_char
audit log error: SQL logic error: table audit_log has no column named module (1)
=== RUN   TestNCRTitleLengthValidation/Max_valid_(255)
audit log error: SQL logic error: table audit_log has no column named module (1)
=== RUN   TestNCRTitleLengthValidation/Over_max_(256)
--- PASS: TestNCRTitleLengthValidation (0.00s)
    --- PASS: TestNCRTitleLengthValidation/Empty_title (0.00s)
    --- PASS: TestNCRTitleLengthValidation/Single_char (0.00s)
    --- PASS: TestNCRTitleLengthValidation/Max_valid_(255) (0.00s)
    --- PASS: TestNCRTitleLengthValidation/Over_max_(256) (0.00s)
=== RUN   TestWorkOrderNotesLengthValidation
=== RUN   TestWorkOrderNotesLengthValidation/Empty_notes
audit log error: SQL logic error: table audit_log has no column named module (1)
=== RUN   TestWorkOrderNotesLengthValidation/Max_valid_(10000)
audit log error: SQL logic error: table audit_log has no column named module (1)
=== RUN   TestWorkOrderNotesLengthValidation/Over_max_(10001)
--- PASS: TestWorkOrderNotesLengthValidation (0.00s)
    --- PASS: TestWorkOrderNotesLengthValidation/Empty_notes (0.00s)
    --- PASS: TestWorkOrderNotesLengthValidation/Max_valid_(10000) (0.00s)
    --- PASS: TestWorkOrderNotesLengthValidation/Over_max_(10001) (0.00s)
=== RUN   TestFieldReportTitleLengthValidation
=== RUN   TestFieldReportTitleLengthValidation/Empty_title
=== RUN   TestFieldReportTitleLengthValidation/Max_valid_(255)
audit log error: SQL logic error: table audit_log has no column named module (1)
=== RUN   TestFieldReportTitleLengthValidation/Over_max_(256)
--- PASS: TestFieldReportTitleLengthValidation (0.00s)
    --- PASS: TestFieldReportTitleLengthValidation/Empty_title (0.00s)
    --- PASS: TestFieldReportTitleLengthValidation/Max_valid_(255) (0.00s)
    --- PASS: TestFieldReportTitleLengthValidation/Over_max_(256) (0.00s)
=== RUN   TestFieldReportDescriptionLengthValidation
=== RUN   TestFieldReportDescriptionLengthValidation/Empty_description
audit log error: SQL logic error: table audit_log has no column named module (1)
=== RUN   TestFieldReportDescriptionLengthValidation/Max_valid_(1000)
audit log error: SQL logic error: table audit_log has no column named module (1)
=== RUN   TestFieldReportDescriptionLengthValidation/Over_max_(1001)
--- PASS: TestFieldReportDescriptionLengthValidation (0.00s)
    --- PASS: TestFieldReportDescriptionLengthValidation/Empty_description (0.00s)
    --- PASS: TestFieldReportDescriptionLengthValidation/Max_valid_(1000) (0.00s)
    --- PASS: TestFieldReportDescriptionLengthValidation/Over_max_(1001) (0.00s)
=== RUN   TestECOTitleLengthValidation
=== RUN   TestECOTitleLengthValidation/Empty_title
=== RUN   TestECOTitleLengthValidation/Max_valid_(255)
audit log error: SQL logic error: table audit_log has no column named module (1)
=== RUN   TestECOTitleLengthValidation/Over_max_(256)
--- PASS: TestECOTitleLengthValidation (0.00s)
    --- PASS: TestECOTitleLengthValidation/Empty_title (0.00s)
    --- PASS: TestECOTitleLengthValidation/Max_valid_(255) (0.00s)
    --- PASS: TestECOTitleLengthValidation/Over_max_(256) (0.00s)
=== RUN   TestECODescriptionLengthValidation
=== RUN   TestECODescriptionLengthValidation/Empty_description
audit log error: SQL logic error: table audit_log has no column named module (1)
=== RUN   TestECODescriptionLengthValidation/Max_valid_(1000)
audit log error: SQL logic error: table audit_log has no column named module (1)
=== RUN   TestECODescriptionLengthValidation/Over_max_(1001)
--- PASS: TestECODescriptionLengthValidation (0.00s)
    --- PASS: TestECODescriptionLengthValidation/Empty_description (0.00s)
    --- PASS: TestECODescriptionLengthValidation/Max_valid_(1000) (0.00s)
    --- PASS: TestECODescriptionLengthValidation/Over_max_(1001) (0.00s)
=== RUN   TestCAPATitleLengthValidation
=== RUN   TestCAPATitleLengthValidation/Empty_title
=== RUN   TestCAPATitleLengthValidation/Max_valid_(255)
audit log error: SQL logic error: table audit_log has no column named module (1)
=== RUN   TestCAPATitleLengthValidation/Over_max_(256)
--- PASS: TestCAPATitleLengthValidation (0.00s)
    --- PASS: TestCAPATitleLengthValidation/Empty_title (0.00s)
    --- PASS: TestCAPATitleLengthValidation/Max_valid_(255) (0.00s)
    --- PASS: TestCAPATitleLengthValidation/Over_max_(256) (0.00s)
=== RUN   TestRMADefectDescriptionLengthValidation
=== RUN   TestRMADefectDescriptionLengthValidation/Empty_description
audit log error: SQL logic error: table audit_log has no column named module (1)
=== RUN   TestRMADefectDescriptionLengthValidation/Max_valid_(1000)
audit log error: SQL logic error: table audit_log has no column named module (1)
=== RUN   TestRMADefectDescriptionLengthValidation/Over_max_(1001)
--- PASS: TestRMADefectDescriptionLengthValidation (0.00s)
    --- PASS: TestRMADefectDescriptionLengthValidation/Empty_description (0.00s)
    --- PASS: TestRMADefectDescriptionLengthValidation/Max_valid_(1000) (0.00s)
    --- PASS: TestRMADefectDescriptionLengthValidation/Over_max_(1001) (0.00s)
=== RUN   TestUserEmailValidation
=== RUN   TestUserEmailValidation/Empty_email
=== RUN   TestUserEmailValidation/Valid_email
=== RUN   TestUserEmailValidation/Invalid_format
=== RUN   TestUserEmailValidation/Very_long_valid_email
=== RUN   TestUserEmailValidation/Exceeds_max_(255)
--- PASS: TestUserEmailValidation (0.15s)
    --- PASS: TestUserEmailValidation/Empty_email (0.05s)
    --- PASS: TestUserEmailValidation/Valid_email (0.05s)
    --- PASS: TestUserEmailValidation/Invalid_format (0.00s)
    --- PASS: TestUserEmailValidation/Very_long_valid_email (0.05s)
    --- PASS: TestUserEmailValidation/Exceeds_max_(255) (0.00s)
=== RUN   TestIPNLengthValidation
=== RUN   TestIPNLengthValidation/Empty_IPN
=== RUN   TestIPNLengthValidation/Single_char
audit log error: SQL logic error: table audit_log has no column named module (1)
=== RUN   TestIPNLengthValidation/Max_valid_(100)
audit log error: SQL logic error: table audit_log has no column named module (1)
=== RUN   TestIPNLengthValidation/Over_max_(101)
=== RUN   TestIPNLengthValidation/Way_over_(1000)
--- PASS: TestIPNLengthValidation (0.00s)
    --- PASS: TestIPNLengthValidation/Empty_IPN (0.00s)
    --- PASS: TestIPNLengthValidation/Single_char (0.00s)
    --- PASS: TestIPNLengthValidation/Max_valid_(100) (0.00s)
    --- PASS: TestIPNLengthValidation/Over_max_(101) (0.00s)
    --- PASS: TestIPNLengthValidation/Way_over_(1000) (0.00s)
=== RUN   TestAllTextFieldLimits
=== RUN   TestAllTextFieldLimits/Name_fields_max_255
=== RUN   TestAllTextFieldLimits/Description_fields_max_1000
=== RUN   TestAllTextFieldLimits/Notes/Comments_fields_max_10000
=== RUN   TestAllTextFieldLimits/IPN_fields_max_100
--- PASS: TestAllTextFieldLimits (0.00s)
    --- PASS: TestAllTextFieldLimits/Name_fields_max_255 (0.00s)
    --- PASS: TestAllTextFieldLimits/Description_fields_max_1000 (0.00s)
    --- PASS: TestAllTextFieldLimits/Notes/Comments_fields_max_10000 (0.00s)
    --- PASS: TestAllTextFieldLimits/IPN_fields_max_100 (0.00s)
=== RUN   TestValidationErrorResponseFormat
--- PASS: TestValidationErrorResponseFormat (0.00s)
=== RUN   TestWorkOrderKitting_BasicReservation
--- PASS: TestWorkOrderKitting_BasicReservation (0.00s)
=== RUN   TestWorkOrderKitting_MultipleWOsCompetingInventory
--- PASS: TestWorkOrderKitting_MultipleWOsCompetingInventory (0.00s)
=== RUN   TestWorkOrderKitting_CompletionReleasesReservation
--- PASS: TestWorkOrderKitting_CompletionReleasesReservation (0.00s)
=== RUN   TestWorkOrderKitting_CancellationReleasesReservation
--- PASS: TestWorkOrderKitting_CancellationReleasesReservation (0.00s)
=== RUN   TestWorkOrderKitting_ReservedInventoryNotAvailableForOtherWOs
--- PASS: TestWorkOrderKitting_ReservedInventoryNotAvailableForOtherWOs (0.00s)
=== RUN   TestWorkOrderKitting_SecondWOProceedsAfterFirstCompletes
    handler_inventory_kitting_test.go:377: After kitting WO-500: PART-006 on_hand=10, reserved=5
    handler_inventory_kitting_test.go:459: All inventory after WO-500 completion: [PART-006: on_hand=0, reserved=0 ASY-500: on_hand=5, reserved=0]
    handler_inventory_kitting_test.go:474: Simplified implementation doesn't track per-WO reservations
--- SKIP: TestWorkOrderKitting_SecondWOProceedsAfterFirstCompletes (0.00s)
=== RUN   TestHandleListInventory_Empty
--- PASS: TestHandleListInventory_Empty (0.00s)
=== RUN   TestHandleListInventory_WithData
--- PASS: TestHandleListInventory_WithData (0.00s)
=== RUN   TestHandleListInventory_LowStock
--- PASS: TestHandleListInventory_LowStock (0.00s)
=== RUN   TestHandleGetInventory_Success
--- PASS: TestHandleGetInventory_Success (0.00s)
=== RUN   TestHandleGetInventory_NotFound
--- PASS: TestHandleGetInventory_NotFound (0.00s)
=== RUN   TestHandleInventoryTransact_Receive
--- PASS: TestHandleInventoryTransact_Receive (0.00s)
=== RUN   TestHandleInventoryTransact_Issue
--- PASS: TestHandleInventoryTransact_Issue (0.00s)
=== RUN   TestHandleInventoryTransact_Adjust
--- PASS: TestHandleInventoryTransact_Adjust (0.00s)
=== RUN   TestHandleInventoryTransact_NewItem
--- PASS: TestHandleInventoryTransact_NewItem (0.00s)
=== RUN   TestHandleInventoryTransact_MissingIPN
--- PASS: TestHandleInventoryTransact_MissingIPN (0.00s)
=== RUN   TestHandleInventoryTransact_MissingType
--- PASS: TestHandleInventoryTransact_MissingType (0.00s)
=== RUN   TestHandleInventoryTransact_InvalidType
--- PASS: TestHandleInventoryTransact_InvalidType (0.00s)
=== RUN   TestHandleInventoryTransact_NegativeQty
--- PASS: TestHandleInventoryTransact_NegativeQty (0.00s)
=== RUN   TestHandleInventoryHistory_Empty
--- PASS: TestHandleInventoryHistory_Empty (0.00s)
=== RUN   TestHandleInventoryHistory_WithData
--- PASS: TestHandleInventoryHistory_WithData (0.00s)
=== RUN   TestHandleBulkDeleteInventory_Success
--- PASS: TestHandleBulkDeleteInventory_Success (0.00s)
=== RUN   TestHandleBulkDeleteInventory_EmptyList
--- PASS: TestHandleBulkDeleteInventory_EmptyList (0.00s)
=== RUN   TestHandleBulkDeleteInventory_NonexistentIPNs
--- PASS: TestHandleBulkDeleteInventory_NonexistentIPNs (0.00s)
=== RUN   TestCreateInvoiceFromSalesOrder
--- PASS: TestCreateInvoiceFromSalesOrder (0.00s)
=== RUN   TestCreateInvoiceFromNonShippedOrder
--- PASS: TestCreateInvoiceFromNonShippedOrder (0.00s)
=== RUN   TestCreateInvoiceAlreadyExists
--- PASS: TestCreateInvoiceAlreadyExists (0.00s)
=== RUN   TestListInvoices
--- PASS: TestListInvoices (0.00s)
=== RUN   TestGetInvoice
--- PASS: TestGetInvoice (0.00s)
=== RUN   TestSendInvoice
--- PASS: TestSendInvoice (0.00s)
=== RUN   TestMarkInvoicePaid
--- PASS: TestMarkInvoicePaid (0.00s)
=== RUN   TestUpdateInvoiceOverdueStatus
--- PASS: TestUpdateInvoiceOverdueStatus (0.00s)
=== RUN   TestGenerateInvoiceNumber
--- PASS: TestGenerateInvoiceNumber (0.00s)
=== RUN   TestInvoicePDFGeneration
--- PASS: TestInvoicePDFGeneration (0.00s)
=== RUN   TestLowStockAlerts_NoAlert_WhenAboveThreshold
--- PASS: TestLowStockAlerts_NoAlert_WhenAboveThreshold (0.00s)
=== RUN   TestLowStockAlerts_AlertGenerated_WhenBelowThreshold
--- PASS: TestLowStockAlerts_AlertGenerated_WhenBelowThreshold (0.00s)
=== RUN   TestLowStockAlerts_EndpointReturnsAlerts
--- PASS: TestLowStockAlerts_EndpointReturnsAlerts (0.00s)
=== RUN   TestLowStockAlerts_AlertClears_WhenReplenished
--- PASS: TestLowStockAlerts_AlertClears_WhenReplenished (0.00s)
=== RUN   TestLowStockAlerts_MultipleAlerts_MultipleParts
--- PASS: TestLowStockAlerts_MultipleAlerts_MultipleParts (0.00s)
=== RUN   TestLowStockAlerts_NoAlert_AtExactThreshold
--- PASS: TestLowStockAlerts_NoAlert_AtExactThreshold (0.00s)
=== RUN   TestLowStockAlerts_NoAlert_ZeroReorderPoint
--- PASS: TestLowStockAlerts_NoAlert_ZeroReorderPoint (0.00s)
=== RUN   TestLowStockAlerts_EmptyArray_NoLowStock
--- PASS: TestLowStockAlerts_EmptyArray_NoLowStock (0.00s)
=== RUN   TestLowStockAlerts_Sequential_ReplenishAndDeplete
--- PASS: TestLowStockAlerts_Sequential_ReplenishAndDeplete (0.00s)
=== RUN   TestHandleCreateCAPAFromNCR_Success
--- PASS: TestHandleCreateCAPAFromNCR_Success (0.00s)
=== RUN   TestHandleCreateCAPAFromNCR_AutoPopulate
--- PASS: TestHandleCreateCAPAFromNCR_AutoPopulate (0.00s)
=== RUN   TestHandleCreateCAPAFromNCR_EmptyBody
--- PASS: TestHandleCreateCAPAFromNCR_EmptyBody (0.00s)
=== RUN   TestHandleCreateCAPAFromNCR_NCRNotFound
--- PASS: TestHandleCreateCAPAFromNCR_NCRNotFound (0.00s)
=== RUN   TestHandleCreateCAPAFromNCR_InvalidJSON
--- PASS: TestHandleCreateCAPAFromNCR_InvalidJSON (0.00s)
=== RUN   TestHandleCreateECOFromNCR_Success
--- PASS: TestHandleCreateECOFromNCR_Success (0.00s)
=== RUN   TestHandleCreateECOFromNCR_AutoPopulate
--- PASS: TestHandleCreateECOFromNCR_AutoPopulate (0.00s)
=== RUN   TestHandleCreateECOFromNCR_PriorityMapping
=== RUN   TestHandleCreateECOFromNCR_PriorityMapping/Critical_severity_maps_to_critical_priority
=== RUN   TestHandleCreateECOFromNCR_PriorityMapping/Major_severity_maps_to_high_priority
=== RUN   TestHandleCreateECOFromNCR_PriorityMapping/Minor_severity_maps_to_normal_priority
--- PASS: TestHandleCreateECOFromNCR_PriorityMapping (0.00s)
    --- PASS: TestHandleCreateECOFromNCR_PriorityMapping/Critical_severity_maps_to_critical_priority (0.00s)
    --- PASS: TestHandleCreateECOFromNCR_PriorityMapping/Major_severity_maps_to_high_priority (0.00s)
    --- PASS: TestHandleCreateECOFromNCR_PriorityMapping/Minor_severity_maps_to_normal_priority (0.00s)
=== RUN   TestHandleCreateECOFromNCR_DescriptionFallback
--- PASS: TestHandleCreateECOFromNCR_DescriptionFallback (0.00s)
=== RUN   TestHandleCreateECOFromNCR_NCRNotFound
--- PASS: TestHandleCreateECOFromNCR_NCRNotFound (0.00s)
=== RUN   TestHandleCreateECOFromNCR_InvalidJSON
--- PASS: TestHandleCreateECOFromNCR_InvalidJSON (0.00s)
=== RUN   TestHandleCreateCAPAFromNCR_DataIntegrity
--- PASS: TestHandleCreateCAPAFromNCR_DataIntegrity (0.00s)
=== RUN   TestHandleCreateECOFromNCR_DataIntegrity
--- PASS: TestHandleCreateECOFromNCR_DataIntegrity (0.00s)
=== RUN   TestHandleCreateCAPAFromNCR_AuditLog
--- PASS: TestHandleCreateCAPAFromNCR_AuditLog (0.00s)
=== RUN   TestHandleCreateECOFromNCR_AuditLog
--- PASS: TestHandleCreateECOFromNCR_AuditLog (0.00s)
=== RUN   TestHandleCreateCAPAFromNCR_ChangeTracking
    handler_ncr_integration_test.go:827: Expected at least 1 part_changes entry for CAPA creation, got 0
--- FAIL: TestHandleCreateCAPAFromNCR_ChangeTracking (0.00s)
=== RUN   TestHandleCreateECOFromNCR_ChangeTracking
    handler_ncr_integration_test.go:858: Expected at least 1 part_changes entry for ECO creation, got 0
--- FAIL: TestHandleCreateECOFromNCR_ChangeTracking (0.00s)
=== RUN   TestHandleCreateCAPAFromNCR_StatusPropagation
--- PASS: TestHandleCreateCAPAFromNCR_StatusPropagation (0.00s)
=== RUN   TestHandleCreateECOFromNCR_StatusPropagation
--- PASS: TestHandleCreateECOFromNCR_StatusPropagation (0.00s)
=== RUN   TestHandleCreateCAPAFromNCR_MultipleFromSameNCR
--- PASS: TestHandleCreateCAPAFromNCR_MultipleFromSameNCR (0.00s)
=== RUN   TestHandleListNCRs_Empty
--- PASS: TestHandleListNCRs_Empty (0.00s)
=== RUN   TestHandleListNCRs_WithData
--- PASS: TestHandleListNCRs_WithData (0.00s)
=== RUN   TestHandleGetNCR_Success
--- PASS: TestHandleGetNCR_Success (0.00s)
=== RUN   TestHandleGetNCR_NotFound
--- PASS: TestHandleGetNCR_NotFound (0.00s)
=== RUN   TestHandleCreateNCR_Success
--- PASS: TestHandleCreateNCR_Success (0.00s)
=== RUN   TestHandleCreateNCR_MissingTitle
--- PASS: TestHandleCreateNCR_MissingTitle (0.00s)
=== RUN   TestHandleCreateNCR_InvalidSeverity
--- PASS: TestHandleCreateNCR_InvalidSeverity (0.00s)
=== RUN   TestHandleCreateNCR_DefaultValues
--- PASS: TestHandleCreateNCR_DefaultValues (0.00s)
=== RUN   TestHandleUpdateNCR_Success
--- PASS: TestHandleUpdateNCR_Success (0.00s)
=== RUN   TestHandleUpdateNCR_ResolveSetsTimestamp
--- PASS: TestHandleUpdateNCR_ResolveSetsTimestamp (0.00s)
=== RUN   TestHandleUpdateNCR_AutoCreateECO
--- PASS: TestHandleUpdateNCR_AutoCreateECO (0.00s)
=== RUN   TestHandleUpdateNCR_NoECOWithoutCreateFlag
--- PASS: TestHandleUpdateNCR_NoECOWithoutCreateFlag (0.00s)
=== RUN   TestHandleUpdateNCR_NoECOWithoutCorrectiveAction
--- PASS: TestHandleUpdateNCR_NoECOWithoutCorrectiveAction (0.00s)
=== RUN   TestHandleUpdateNCR_AllFields
--- PASS: TestHandleUpdateNCR_AllFields (0.00s)
=== RUN   TestNotificationDedup_SameAlertRapidFire_OnlyOneNotification
--- PASS: TestNotificationDedup_SameAlertRapidFire_OnlyOneNotification (0.00s)
=== RUN   TestNotificationDedup_DifferentAlertTypes_NoInterference
--- PASS: TestNotificationDedup_DifferentAlertTypes_NoInterference (0.00s)
=== RUN   TestNotificationDedup_AfterCooldownPeriod_NewNotificationSent
--- PASS: TestNotificationDedup_AfterCooldownPeriod_NewNotificationSent (0.00s)
=== RUN   TestNotificationDedup_WithinCooldownPeriod_NoNewNotification
--- PASS: TestNotificationDedup_WithinCooldownPeriod_NoNewNotification (0.00s)
=== RUN   TestNotificationDedup_NoRecordID_TitleBasedDedup
--- PASS: TestNotificationDedup_NoRecordID_TitleBasedDedup (0.00s)
=== RUN   TestNotificationDedup_UserPrefsDisabled_NoNotification
--- PASS: TestNotificationDedup_UserPrefsDisabled_NoNotification (0.00s)
=== RUN   TestNotificationDedup_UserPrefsEnabled_NotificationCreated
--- PASS: TestNotificationDedup_UserPrefsEnabled_NotificationCreated (0.00s)
=== RUN   TestNotificationDedup_MultipleUsers_IndependentPreferences
--- PASS: TestNotificationDedup_MultipleUsers_IndependentPreferences (0.00s)
=== RUN   TestNotificationDedup_CustomThreshold_RespectedInDedup
--- PASS: TestNotificationDedup_CustomThreshold_RespectedInDedup (0.00s)
=== RUN   TestNotificationDedup_RapidSequential_NoDuplicates
--- PASS: TestNotificationDedup_RapidSequential_NoDuplicates (0.00s)
=== RUN   TestNotificationDedup_OverdueWorkOrder_Deduplicated
--- PASS: TestNotificationDedup_OverdueWorkOrder_Deduplicated (0.00s)
=== RUN   TestNotificationDedup_OpenNCR_Deduplicated
--- PASS: TestNotificationDedup_OpenNCR_Deduplicated (0.00s)
=== RUN   TestNotificationDedup_CooldownPeriod_Exactly24Hours
--- PASS: TestNotificationDedup_CooldownPeriod_Exactly24Hours (0.00s)
=== RUN   TestNotificationDedup_EmailDeliveryMethod_FlagSet
--- PASS: TestNotificationDedup_EmailDeliveryMethod_FlagSet (0.00s)
=== RUN   TestNotificationDedup_InAppOnlyDelivery_NoEmail
--- PASS: TestNotificationDedup_InAppOnlyDelivery_NoEmail (0.00s)
=== RUN   TestListNotificationTypes
--- PASS: TestListNotificationTypes (0.00s)
=== RUN   TestGetNotificationPreferencesUnauthorized
--- PASS: TestGetNotificationPreferencesUnauthorized (0.00s)
=== RUN   TestGetNotificationPreferencesDefaults
--- PASS: TestGetNotificationPreferencesDefaults (0.00s)
=== RUN   TestUpdateNotificationPreferencesBulk
--- PASS: TestUpdateNotificationPreferencesBulk (0.05s)
=== RUN   TestUpdateSingleNotificationPreference
--- PASS: TestUpdateSingleNotificationPreference (0.05s)
=== RUN   TestUpdateSingleNotificationPreferenceInvalidType
--- PASS: TestUpdateSingleNotificationPreferenceInvalidType (0.00s)
=== RUN   TestGetUserNotifPrefDefault
--- PASS: TestGetUserNotifPrefDefault (0.00s)
=== RUN   TestGetUserNotifPrefCustom
--- PASS: TestGetUserNotifPrefCustom (0.00s)
=== RUN   TestGenerateNotificationsFilteredDisabled
--- PASS: TestGenerateNotificationsFilteredDisabled (0.00s)
=== RUN   TestGenerateNotificationsFilteredEnabled
2026/02/20 14:41:08 Failed to insert notification: SQL logic error: no such table: notifications (1)
    handler_notification_prefs_test.go:277: expected 1 low_stock notification, got 0
--- FAIL: TestGenerateNotificationsFilteredEnabled (0.00s)
=== RUN   TestGenerateNotificationsCustomThreshold
--- PASS: TestGenerateNotificationsCustomThreshold (0.00s)
=== RUN   TestValidDeliveryMethod
--- PASS: TestValidDeliveryMethod (0.00s)
=== RUN   TestValidNotificationType
--- PASS: TestValidNotificationType (0.00s)
=== RUN   TestHandleListNotifications_All
    handler_notifications_test.go:151: Failed to decode response: json: cannot unmarshal object into Go value of type []main.Notification
--- FAIL: TestHandleListNotifications_All (0.00s)
=== RUN   TestHandleListNotifications_UnreadOnly
    handler_notifications_test.go:196: Failed to decode response: json: cannot unmarshal object into Go value of type []main.Notification
--- FAIL: TestHandleListNotifications_UnreadOnly (0.00s)
=== RUN   TestHandleListNotifications_Empty
    handler_notifications_test.go:229: Failed to decode response: json: cannot unmarshal object into Go value of type []main.Notification
--- FAIL: TestHandleListNotifications_Empty (0.00s)
=== RUN   TestHandleListNotifications_Limit
    handler_notifications_test.go:262: Expected 50 notifications (limit), got 0
--- FAIL: TestHandleListNotifications_Limit (0.00s)
=== RUN   TestHandleMarkNotificationRead
--- PASS: TestHandleMarkNotificationRead (0.00s)
=== RUN   TestHandleMarkNotificationRead_AlreadyRead
--- PASS: TestHandleMarkNotificationRead_AlreadyRead (0.00s)
=== RUN   TestGenerateNotifications_LowStock
2026/02/20 14:41:08 Generating notifications...
2026/02/20 14:41:08 Notification check complete: 1 candidates
--- PASS: TestGenerateNotifications_LowStock (0.00s)
=== RUN   TestGenerateNotifications_OverdueWorkOrder
2026/02/20 14:41:08 Generating notifications...
2026/02/20 14:41:08 Notification check complete: 1 candidates
--- PASS: TestGenerateNotifications_OverdueWorkOrder (0.00s)
=== RUN   TestGenerateNotifications_OpenNCR
2026/02/20 14:41:08 Generating notifications...
2026/02/20 14:41:08 Notification check complete: 1 candidates
--- PASS: TestGenerateNotifications_OpenNCR (0.00s)
=== RUN   TestGenerateNotifications_NewRMA
2026/02/20 14:41:08 Generating notifications...
2026/02/20 14:41:08 Notification check complete: 0 candidates
    handler_notifications_test.go:489: Expected 1 new_rma notification for RMA-001, got 0
    handler_notifications_test.go:496: Message should contain serial number, got ''
    handler_notifications_test.go:499: Message should contain customer name, got ''
--- FAIL: TestGenerateNotifications_NewRMA (0.00s)
=== RUN   TestCreateNotificationIfNew_NoDuplicates
--- PASS: TestCreateNotificationIfNew_NoDuplicates (0.00s)
=== RUN   TestCreateNotificationIfNew_AllowsAfter24Hours
--- PASS: TestCreateNotificationIfNew_AllowsAfter24Hours (0.00s)
=== RUN   TestCreateNotificationIfNew_NoRecordID
--- PASS: TestCreateNotificationIfNew_NoRecordID (0.00s)
=== RUN   TestNotificationSeverityLevels
    handler_notifications_test.go:614: Expected 3 notifications with different severities, got 0
    handler_notifications_test.go:624: Severity 'info' not found in results
    handler_notifications_test.go:624: Severity 'warning' not found in results
    handler_notifications_test.go:624: Severity 'error' not found in results
--- FAIL: TestNotificationSeverityLevels (0.00s)
=== RUN   TestNotificationTypes
    handler_notifications_test.go:652: Expected 5 notifications with different types, got 0
--- FAIL: TestNotificationTypes (0.00s)
=== RUN   TestNotificationModuleField
    handler_notifications_test.go:686: Expected 4 different modules, got 0
--- FAIL: TestNotificationModuleField (0.00s)
=== RUN   TestNotificationUserIDField
    handler_notifications_test.go:718: Expected 2 notifications, got 0
--- FAIL: TestNotificationUserIDField (0.00s)
=== RUN   TestGenerateNotifications_MultipleIssues
2026/02/20 14:41:08 Generating notifications...
2026/02/20 14:41:08 Notification check complete: 3 candidates
    handler_notifications_test.go:756: Expected 1 open_ncr notification, got 0
--- FAIL: TestGenerateNotifications_MultipleIssues (0.00s)
=== RUN   TestNotificationPagination
--- PASS: TestNotificationPagination (0.00s)
=== RUN   TestNotificationReadState
    handler_notifications_test.go:817: read_at should be valid timestamp, got '2026-02-20T22:41:08Z'
--- FAIL: TestNotificationReadState (0.00s)
=== RUN   TestInventoryQuantityOverflow
=== RUN   TestInventoryQuantityOverflow/Normal_quantity
=== RUN   TestInventoryQuantityOverflow/Very_large_but_valid_quantity
=== RUN   TestInventoryQuantityOverflow/Maximum_safe_float64_(should_accept_or_handle_gracefully)
    handler_numeric_validation_test.go:209: Expected success for qty=1.7e+308, but got status 500: {"error":"SQL logic error: no such table: inventory (1)"}
=== RUN   TestInventoryQuantityOverflow/Negative_quantity_(violates_CHECK_constraint)
=== RUN   TestInventoryQuantityOverflow/Zero_quantity_(valid_-_empty_stock)
    handler_numeric_validation_test.go:209: Expected success for qty=0, but got status 500: {"error":"SQL logic error: no such table: inventory (1)"}
--- FAIL: TestInventoryQuantityOverflow (0.00s)
    --- PASS: TestInventoryQuantityOverflow/Normal_quantity (0.00s)
    --- PASS: TestInventoryQuantityOverflow/Very_large_but_valid_quantity (0.00s)
    --- FAIL: TestInventoryQuantityOverflow/Maximum_safe_float64_(should_accept_or_handle_gracefully) (0.00s)
    --- PASS: TestInventoryQuantityOverflow/Negative_quantity_(violates_CHECK_constraint) (0.00s)
    --- FAIL: TestInventoryQuantityOverflow/Zero_quantity_(valid_-_empty_stock) (0.00s)
=== RUN   TestPOLineQuantityOverflow
=== RUN   TestPOLineQuantityOverflow/Normal_quantity
=== RUN   TestPOLineQuantityOverflow/Very_large_quantity_(1_million)
    handler_numeric_validation_test.go:288: Expected error for qty_ordered=1e+06, but got success
=== RUN   TestPOLineQuantityOverflow/Zero_quantity_(violates_CHECK_qty_ordered_>_0)
=== RUN   TestPOLineQuantityOverflow/Negative_quantity
=== RUN   TestPOLineQuantityOverflow/Extremely_large_quantity_(overflow_risk)
--- FAIL: TestPOLineQuantityOverflow (0.00s)
    --- PASS: TestPOLineQuantityOverflow/Normal_quantity (0.00s)
    --- FAIL: TestPOLineQuantityOverflow/Very_large_quantity_(1_million) (0.00s)
    --- PASS: TestPOLineQuantityOverflow/Zero_quantity_(violates_CHECK_qty_ordered_>_0) (0.00s)
    --- PASS: TestPOLineQuantityOverflow/Negative_quantity (0.00s)
    --- PASS: TestPOLineQuantityOverflow/Extremely_large_quantity_(overflow_risk) (0.00s)
=== RUN   TestPriceFieldOverflow
=== RUN   TestPriceFieldOverflow/Normal_price
=== RUN   TestPriceFieldOverflow/Zero_price_(valid_-_free_item)
=== RUN   TestPriceFieldOverflow/Very_high_price
=== RUN   TestPriceFieldOverflow/Negative_price_(should_be_rejected)
=== RUN   TestPriceFieldOverflow/Extremely_large_price_(overflow_risk)
=== RUN   TestPriceFieldOverflow/Price_with_extreme_precision
--- PASS: TestPriceFieldOverflow (0.00s)
    --- PASS: TestPriceFieldOverflow/Normal_price (0.00s)
    --- PASS: TestPriceFieldOverflow/Zero_price_(valid_-_free_item) (0.00s)
    --- PASS: TestPriceFieldOverflow/Very_high_price (0.00s)
    --- PASS: TestPriceFieldOverflow/Negative_price_(should_be_rejected) (0.00s)
    --- PASS: TestPriceFieldOverflow/Extremely_large_price_(overflow_risk) (0.00s)
    --- PASS: TestPriceFieldOverflow/Price_with_extreme_precision (0.00s)
=== RUN   TestLeadTimeDaysOverflow
=== RUN   TestLeadTimeDaysOverflow/Normal_lead_time_(7_days)
=== RUN   TestLeadTimeDaysOverflow/Zero_lead_time_(same_day)
=== RUN   TestLeadTimeDaysOverflow/Long_but_reasonable_(90_days)
=== RUN   TestLeadTimeDaysOverflow/Very_long_lead_time_(1_year_=_365_days)
=== RUN   TestLeadTimeDaysOverflow/Unreasonably_long_(10000_days_=_27_years)
=== RUN   TestLeadTimeDaysOverflow/Negative_lead_time_(invalid)
=== RUN   TestLeadTimeDaysOverflow/INT_MAX_overflow_risk
--- PASS: TestLeadTimeDaysOverflow (0.00s)
    --- PASS: TestLeadTimeDaysOverflow/Normal_lead_time_(7_days) (0.00s)
    --- PASS: TestLeadTimeDaysOverflow/Zero_lead_time_(same_day) (0.00s)
    --- PASS: TestLeadTimeDaysOverflow/Long_but_reasonable_(90_days) (0.00s)
    --- PASS: TestLeadTimeDaysOverflow/Very_long_lead_time_(1_year_=_365_days) (0.00s)
    --- PASS: TestLeadTimeDaysOverflow/Unreasonably_long_(10000_days_=_27_years) (0.00s)
    --- PASS: TestLeadTimeDaysOverflow/Negative_lead_time_(invalid) (0.00s)
    --- PASS: TestLeadTimeDaysOverflow/INT_MAX_overflow_risk (0.00s)
=== RUN   TestQuoteLineQuantityOverflow
=== RUN   TestQuoteLineQuantityOverflow/Normal_quantity
=== RUN   TestQuoteLineQuantityOverflow/Large_quantity_(100k)
=== RUN   TestQuoteLineQuantityOverflow/Very_large_quantity_(1_million)
=== RUN   TestQuoteLineQuantityOverflow/Zero_quantity_(violates_CHECK_qty_>_0)
=== RUN   TestQuoteLineQuantityOverflow/Negative_quantity
--- PASS: TestQuoteLineQuantityOverflow (0.00s)
    --- PASS: TestQuoteLineQuantityOverflow/Normal_quantity (0.00s)
    --- PASS: TestQuoteLineQuantityOverflow/Large_quantity_(100k) (0.00s)
    --- PASS: TestQuoteLineQuantityOverflow/Very_large_quantity_(1_million) (0.00s)
    --- PASS: TestQuoteLineQuantityOverflow/Zero_quantity_(violates_CHECK_qty_>_0) (0.00s)
    --- PASS: TestQuoteLineQuantityOverflow/Negative_quantity (0.00s)
=== RUN   TestFloatingPointPrecision
=== RUN   TestFloatingPointPrecision/Repeating_decimal_(0.33333...)
=== RUN   TestFloatingPointPrecision/Very_precise_decimal
=== RUN   TestFloatingPointPrecision/Small_difference_test_(1.0000000001_vs_1.0)
--- PASS: TestFloatingPointPrecision (0.00s)
    --- PASS: TestFloatingPointPrecision/Repeating_decimal_(0.33333...) (0.00s)
    --- PASS: TestFloatingPointPrecision/Very_precise_decimal (0.00s)
    --- PASS: TestFloatingPointPrecision/Small_difference_test_(1.0000000001_vs_1.0) (0.00s)
=== RUN   TestPriceCalculationAccuracy
    handler_numeric_validation_test.go:646: Expected total: 10, Calculated total: 10, Difference: 0
--- PASS: TestPriceCalculationAccuracy (0.01s)
=== RUN   TestWorkOrderQuantityOverflow
=== RUN   TestWorkOrderQuantityOverflow/Normal_quantity
=== RUN   TestWorkOrderQuantityOverflow/Large_batch_(10k)
=== RUN   TestWorkOrderQuantityOverflow/Very_large_batch_(100k)
    handler_numeric_validation_test.go:703: Expected error for qty=100000, but insert succeeded
=== RUN   TestWorkOrderQuantityOverflow/Zero_quantity_(violates_CHECK_qty_>_0)
=== RUN   TestWorkOrderQuantityOverflow/Negative_quantity
--- FAIL: TestWorkOrderQuantityOverflow (0.00s)
    --- PASS: TestWorkOrderQuantityOverflow/Normal_quantity (0.00s)
    --- PASS: TestWorkOrderQuantityOverflow/Large_batch_(10k) (0.00s)
    --- FAIL: TestWorkOrderQuantityOverflow/Very_large_batch_(100k) (0.00s)
    --- PASS: TestWorkOrderQuantityOverflow/Zero_quantity_(violates_CHECK_qty_>_0) (0.00s)
    --- PASS: TestWorkOrderQuantityOverflow/Negative_quantity (0.00s)
=== RUN   TestPercentageFieldValidation
=== RUN   TestPercentageFieldValidation/0_percent
=== RUN   TestPercentageFieldValidation/50_percent
=== RUN   TestPercentageFieldValidation/100_percent
=== RUN   TestPercentageFieldValidation/Negative_percent
=== RUN   TestPercentageFieldValidation/Over_100_percent
--- PASS: TestPercentageFieldValidation (0.00s)
    --- PASS: TestPercentageFieldValidation/0_percent (0.00s)
    --- PASS: TestPercentageFieldValidation/50_percent (0.00s)
    --- PASS: TestPercentageFieldValidation/100_percent (0.00s)
    --- PASS: TestPercentageFieldValidation/Negative_percent (0.00s)
    --- PASS: TestPercentageFieldValidation/Over_100_percent (0.00s)
=== RUN   TestInventoryZeroValues
--- PASS: TestInventoryZeroValues (0.00s)
=== RUN   TestNegativeValueRejection
=== RUN   TestNegativeValueRejection/Negative_qty_on_hand
=== RUN   TestNegativeValueRejection/Negative_qty_reserved
=== RUN   TestNegativeValueRejection/Negative_reorder_point
--- PASS: TestNegativeValueRejection (0.00s)
    --- PASS: TestNegativeValueRejection/Negative_qty_on_hand (0.00s)
    --- PASS: TestNegativeValueRejection/Negative_qty_reserved (0.00s)
    --- PASS: TestNegativeValueRejection/Negative_reorder_point (0.00s)
=== RUN   TestCreatePartChanges
    handler_part_changes_test.go:49: expected 200, got 500: {"error":"SQL logic error: no such table: part_changes (1)"}
--- FAIL: TestCreatePartChanges (0.05s)
=== RUN   TestCreatePartChangesPartNotFound
--- PASS: TestCreatePartChangesPartNotFound (0.05s)
=== RUN   TestCreatePartChangesEmpty
--- PASS: TestCreatePartChangesEmpty (0.05s)
=== RUN   TestListPartChanges
    handler_part_changes_test.go:119: expected 200, got 500
--- FAIL: TestListPartChanges (0.05s)
=== RUN   TestDeletePartChange
    handler_part_changes_test.go:147: Failed to create part change, got 500: {"error":"SQL logic error: no such table: part_changes (1)"}
--- FAIL: TestDeletePartChange (0.05s)
=== RUN   TestDeletePartChangeNotDraft
    handler_part_changes_test.go:194: expected 400 for non-draft delete, got 404
--- FAIL: TestDeletePartChangeNotDraft (0.05s)
=== RUN   TestCreateECOFromChanges
    handler_part_changes_test.go:218: expected 200, got 500: {"error":"SQL logic error: no such table: part_changes (1)"}
--- FAIL: TestCreateECOFromChanges (0.05s)
=== RUN   TestCreateECOFromChangesNoDrafts
    handler_part_changes_test.go:261: expected 400, got 500
--- FAIL: TestCreateECOFromChangesNoDrafts (0.05s)
=== RUN   TestApplyPartChangesOnECOImplement
    handler_part_changes_test.go:286: Failed to create ECO from changes, got 500: {"error":"SQL logic error: no such table: part_changes (1)"}
--- FAIL: TestApplyPartChangesOnECOImplement (0.05s)
=== RUN   TestListECOPartChanges
    handler_part_changes_test.go:358: Failed to create ECO from changes, got 500: {"error":"SQL logic error: no such table: part_changes (1)"}
--- FAIL: TestListECOPartChanges (0.05s)
=== RUN   TestListAllPartChanges
    handler_part_changes_test.go:407: expected 200, got 500
--- FAIL: TestListAllPartChanges (0.05s)
=== RUN   TestCreatePart_Success
--- PASS: TestCreatePart_Success (0.00s)
=== RUN   TestCreatePart_DuplicateIPN
--- PASS: TestCreatePart_DuplicateIPN (0.00s)
=== RUN   TestCreatePart_DuplicateAcrossCategories
--- PASS: TestCreatePart_DuplicateAcrossCategories (0.00s)
=== RUN   TestCreatePart_MissingIPN
--- PASS: TestCreatePart_MissingIPN (0.00s)
=== RUN   TestCreatePart_InvalidCategory
--- PASS: TestCreatePart_InvalidCategory (0.00s)
=== RUN   TestCreateCategory_Success
--- PASS: TestCreateCategory_Success (0.00s)
=== RUN   TestCreateCategory_DuplicatePrefix
--- PASS: TestCreateCategory_DuplicatePrefix (0.00s)
=== RUN   TestCreateCategory_MissingFields
--- PASS: TestCreateCategory_MissingFields (0.00s)
=== RUN   TestCheckIPNExists
--- PASS: TestCheckIPNExists (0.00s)
=== RUN   TestHandleListParts
=== RUN   TestHandleListParts/List_all_parts
=== RUN   TestHandleListParts/Filter_by_category_-_resistors
=== RUN   TestHandleListParts/Filter_by_category_-_capacitors
=== RUN   TestHandleListParts/Filter_by_category_-_ics
=== RUN   TestHandleListParts/Search_by_IPN
=== RUN   TestHandleListParts/Search_by_description
=== RUN   TestHandleListParts/Search_by_manufacturer
=== RUN   TestHandleListParts/Search_with_no_results
=== RUN   TestHandleListParts/Pagination_-_page_1,_limit_3
=== RUN   TestHandleListParts/Pagination_-_page_2,_limit_3
=== RUN   TestHandleListParts/Pagination_-_page_3,_limit_3
--- PASS: TestHandleListParts (0.00s)
    --- PASS: TestHandleListParts/List_all_parts (0.00s)
    --- PASS: TestHandleListParts/Filter_by_category_-_resistors (0.00s)
    --- PASS: TestHandleListParts/Filter_by_category_-_capacitors (0.00s)
    --- PASS: TestHandleListParts/Filter_by_category_-_ics (0.00s)
    --- PASS: TestHandleListParts/Search_by_IPN (0.00s)
    --- PASS: TestHandleListParts/Search_by_description (0.00s)
    --- PASS: TestHandleListParts/Search_by_manufacturer (0.00s)
    --- PASS: TestHandleListParts/Search_with_no_results (0.00s)
    --- PASS: TestHandleListParts/Pagination_-_page_1,_limit_3 (0.00s)
    --- PASS: TestHandleListParts/Pagination_-_page_2,_limit_3 (0.00s)
    --- PASS: TestHandleListParts/Pagination_-_page_3,_limit_3 (0.00s)
=== RUN   TestHandleListParts_Deduplication
--- PASS: TestHandleListParts_Deduplication (0.00s)
=== RUN   TestHandleGetPart
=== RUN   TestHandleGetPart/Get_existing_resistor
=== RUN   TestHandleGetPart/Get_existing_capacitor
=== RUN   TestHandleGetPart/Get_existing_IC
=== RUN   TestHandleGetPart/Get_non-existent_part
--- PASS: TestHandleGetPart (0.00s)
    --- PASS: TestHandleGetPart/Get_existing_resistor (0.00s)
    --- PASS: TestHandleGetPart/Get_existing_capacitor (0.00s)
    --- PASS: TestHandleGetPart/Get_existing_IC (0.00s)
    --- PASS: TestHandleGetPart/Get_non-existent_part (0.00s)
=== RUN   TestHandleCreatePart
=== RUN   TestHandleCreatePart/Create_valid_part
=== RUN   TestHandleCreatePart/Create_part_without_IPN
=== RUN   TestHandleCreatePart/Create_part_without_category
=== RUN   TestHandleCreatePart/Create_duplicate_part
--- PASS: TestHandleCreatePart (0.00s)
    --- PASS: TestHandleCreatePart/Create_valid_part (0.00s)
    --- PASS: TestHandleCreatePart/Create_part_without_IPN (0.00s)
    --- PASS: TestHandleCreatePart/Create_part_without_category (0.00s)
    --- PASS: TestHandleCreatePart/Create_duplicate_part (0.00s)
=== RUN   TestHandleCheckIPN
=== RUN   TestHandleCheckIPN/Check_existing_IPN
=== RUN   TestHandleCheckIPN/Check_non-existent_IPN
--- PASS: TestHandleCheckIPN (0.00s)
    --- PASS: TestHandleCheckIPN/Check_existing_IPN (0.00s)
    --- PASS: TestHandleCheckIPN/Check_non-existent_IPN (0.00s)
=== RUN   TestHandleListCategories
--- PASS: TestHandleListCategories (0.00s)
=== RUN   TestHandleCreateCategory
=== RUN   TestHandleCreateCategory/Create_valid_category
=== RUN   TestHandleCreateCategory/Create_category_without_name
--- PASS: TestHandleCreateCategory (0.00s)
    --- PASS: TestHandleCreateCategory/Create_valid_category (0.00s)
    --- PASS: TestHandleCreateCategory/Create_category_without_name (0.00s)
=== RUN   TestHandlePartBOM
--- PASS: TestHandlePartBOM (0.00s)
=== RUN   TestHandlePartBOM_NonAssembly
--- PASS: TestHandlePartBOM_NonAssembly (0.00s)
=== RUN   TestHandleUpdatePart
--- PASS: TestHandleUpdatePart (0.00s)
=== RUN   TestHandleDeletePart
--- PASS: TestHandleDeletePart (0.00s)
=== RUN   TestHandleAddColumn
    handler_parts_test.go:883: Column addition not yet implemented - stub handler only
--- SKIP: TestHandleAddColumn (0.00s)
=== RUN   TestHandleDeleteColumn
    handler_parts_test.go:939: Column deletion not yet implemented - stub handler only
--- SKIP: TestHandleDeleteColumn (0.00s)
=== RUN   TestLoadPartsFromDir_EmptyDir
--- PASS: TestLoadPartsFromDir_EmptyDir (0.00s)
=== RUN   TestLoadPartsFromDir_NilPartsDir
--- PASS: TestLoadPartsFromDir_NilPartsDir (0.00s)
=== RUN   TestReadCSV_InvalidFile
--- PASS: TestReadCSV_InvalidFile (0.00s)
=== RUN   TestReadCSV_EmptyFile
--- PASS: TestReadCSV_EmptyFile (0.00s)
=== RUN   TestHandleDashboard
--- PASS: TestHandleDashboard (0.00s)
=== RUN   TestHandleListPermissions_EmptyDatabase
--- PASS: TestHandleListPermissions_EmptyDatabase (0.00s)
=== RUN   TestHandleListPermissions_AllRoles
--- PASS: TestHandleListPermissions_AllRoles (0.00s)
=== RUN   TestHandleListPermissions_FilterByRole
=== RUN   TestHandleListPermissions_FilterByRole/admin
=== RUN   TestHandleListPermissions_FilterByRole/user
=== RUN   TestHandleListPermissions_FilterByRole/readonly
=== RUN   TestHandleListPermissions_FilterByRole/invalid
--- PASS: TestHandleListPermissions_FilterByRole (0.00s)
    --- PASS: TestHandleListPermissions_FilterByRole/admin (0.00s)
    --- PASS: TestHandleListPermissions_FilterByRole/user (0.00s)
    --- PASS: TestHandleListPermissions_FilterByRole/readonly (0.00s)
    --- PASS: TestHandleListPermissions_FilterByRole/invalid (0.00s)
=== RUN   TestHandleListPermissions_OrderedByRoleModuleAction
--- PASS: TestHandleListPermissions_OrderedByRoleModuleAction (0.00s)
=== RUN   TestHandleListModules_Success
--- PASS: TestHandleListModules_Success (0.00s)
=== RUN   TestHandleListModules_ContainsExpectedModules
--- PASS: TestHandleListModules_ContainsExpectedModules (0.00s)
=== RUN   TestHandleMyPermissions_AdminRole
    handler_permissions_test.go:415: Failed to decode response: json: cannot unmarshal object into Go value of type []main.Permission
--- FAIL: TestHandleMyPermissions_AdminRole (0.00s)
=== RUN   TestHandleMyPermissions_UserRole
    handler_permissions_test.go:447: Failed to decode response: json: cannot unmarshal object into Go value of type []main.Permission
--- FAIL: TestHandleMyPermissions_UserRole (0.00s)
=== RUN   TestHandleMyPermissions_ReadonlyRole
    handler_permissions_test.go:486: Failed to decode response: json: cannot unmarshal object into Go value of type []main.Permission
--- FAIL: TestHandleMyPermissions_ReadonlyRole (0.00s)
=== RUN   TestHandleMyPermissions_BearerToken_NoRole
    handler_permissions_test.go:524: Failed to decode response: json: cannot unmarshal object into Go value of type []main.Permission
--- FAIL: TestHandleMyPermissions_BearerToken_NoRole (0.00s)
=== RUN   TestHandleMyPermissions_CustomRole
    handler_permissions_test.go:560: Failed to decode response: json: cannot unmarshal object into Go value of type []main.Permission
--- FAIL: TestHandleMyPermissions_CustomRole (0.00s)
=== RUN   TestHandleSetPermissions_Success
    handler_permissions_test.go:595: Expected status 200, got 403: {"error":"Forbidden: Only admins can modify permissions"}
    handler_permissions_test.go:604: Expected status 'updated', got ''
    handler_permissions_test.go:614: Expected 3 permissions saved, got 0
    handler_permissions_test.go:622: Expected parts:view permission to exist
--- FAIL: TestHandleSetPermissions_Success (0.00s)
=== RUN   TestHandleSetPermissions_ReplacesExisting
    handler_permissions_test.go:651: Expected status 200, got 403: {"error":"Forbidden: Only admins can modify permissions"}
    handler_permissions_test.go:658: Expected 2 permissions after replacement, got 3
    handler_permissions_test.go:666: Expected 2 ecos permissions after replacement
    handler_permissions_test.go:673: Expected old parts permissions to be deleted
--- FAIL: TestHandleSetPermissions_ReplacesExisting (0.00s)
=== RUN   TestHandleSetPermissions_EmptyPermissions
    handler_permissions_test.go:693: Expected status 200, got 403: {"error":"Forbidden: Only admins can modify permissions"}
    handler_permissions_test.go:700: Expected 0 permissions after setting empty array, got 90
--- FAIL: TestHandleSetPermissions_EmptyPermissions (0.00s)
=== RUN   TestHandleSetPermissions_MissingRole
--- PASS: TestHandleSetPermissions_MissingRole (0.00s)
=== RUN   TestHandleSetPermissions_InvalidJSON
    handler_permissions_test.go:736: Expected status 400 for invalid JSON, got 403
    handler_permissions_test.go:740: Expected 'Invalid request body' error, got: {"error":"Forbidden: Only admins can modify permissions"}
--- FAIL: TestHandleSetPermissions_InvalidJSON (0.00s)
=== RUN   TestHandleSetPermissions_InvalidModule
    handler_permissions_test.go:760: Expected status 400 for invalid module, got 403
    handler_permissions_test.go:764: Expected 'Invalid module' error, got: {"error":"Forbidden: Only admins can modify permissions"}
--- FAIL: TestHandleSetPermissions_InvalidModule (0.00s)
=== RUN   TestHandleSetPermissions_InvalidAction
    handler_permissions_test.go:784: Expected status 400 for invalid action, got 403
    handler_permissions_test.go:788: Expected 'Invalid action' error, got: {"error":"Forbidden: Only admins can modify permissions"}
--- FAIL: TestHandleSetPermissions_InvalidAction (0.00s)
=== RUN   TestHandleSetPermissions_MultipleInvalidFields
    handler_permissions_test.go:808: Expected status 400, got 403
    handler_permissions_test.go:813: Expected 'Invalid module' error, got: {"error":"Forbidden: Only admins can modify permissions"}
--- FAIL: TestHandleSetPermissions_MultipleInvalidFields (0.00s)
=== RUN   TestHandleSetPermissions_AllValidModulesAndActions
    handler_permissions_test.go:839: Expected status 200, got 403: {"error":"Forbidden: Only admins can modify permissions"}
    handler_permissions_test.go:847: Expected 95 permissions, got 0
--- FAIL: TestHandleSetPermissions_AllValidModulesAndActions (0.00s)
=== RUN   TestHandleSetPermissions_CannotEscalateOwnPrivileges
    handler_permissions_test.go:886: âš ï¸ SECURITY ISSUE: handleSetPermissions does not validate caller permissions
    handler_permissions_test.go:887: Expected: Only admin role can modify permissions
    handler_permissions_test.go:888: Actual: Any authenticated user can call this endpoint if middleware allows
    handler_permissions_test.go:889: Fix needed: Add role check in handler OR ensure middleware enforces admin-only access
--- PASS: TestHandleSetPermissions_CannotEscalateOwnPrivileges (0.00s)
=== RUN   TestHandleSetPermissions_ReadonlyCannotModify
--- PASS: TestHandleSetPermissions_ReadonlyCannotModify (0.00s)
=== RUN   TestHandleSetPermissions_SQLInjection_Prevention
    handler_permissions_test.go:953: Request failed (expected for malformed role), status: 403
    handler_permissions_test.go:964: âœ“ SQL injection prevented - table still exists with 204 rows
--- PASS: TestHandleSetPermissions_SQLInjection_Prevention (0.00s)
=== RUN   TestHandleSetPermissions_SQLInjection_ModuleAction
=== RUN   TestHandleSetPermissions_SQLInjection_ModuleAction/module_injection
=== RUN   TestHandleSetPermissions_SQLInjection_ModuleAction/action_injection
=== RUN   TestHandleSetPermissions_SQLInjection_ModuleAction/union_injection
=== NAME  TestHandleSetPermissions_SQLInjection_ModuleAction
    handler_permissions_test.go:1012: âœ“ SQL injection in module/action fields prevented
--- PASS: TestHandleSetPermissions_SQLInjection_ModuleAction (0.00s)
    --- PASS: TestHandleSetPermissions_SQLInjection_ModuleAction/module_injection (0.00s)
    --- PASS: TestHandleSetPermissions_SQLInjection_ModuleAction/action_injection (0.00s)
    --- PASS: TestHandleSetPermissions_SQLInjection_ModuleAction/union_injection (0.00s)
=== RUN   TestHandleSetPermissions_DuplicatePermissions
    handler_permissions_test.go:1036: Expected status 200, got 403: {"error":"Forbidden: Only admins can modify permissions"}
    handler_permissions_test.go:1043: Expected 1 permission (duplicates ignored), got 0
--- FAIL: TestHandleSetPermissions_DuplicatePermissions (0.00s)
=== RUN   TestHandleSetPermissions_CacheRefresh
    handler_permissions_test.go:1074: Failed to set permissions: 403
--- FAIL: TestHandleSetPermissions_CacheRefresh (0.00s)
=== RUN   TestHandleSetPermissions_DoesNotAffectOtherRoles
    handler_permissions_test.go:1110: Failed to set permissions: 403
--- FAIL: TestHandleSetPermissions_DoesNotAffectOtherRoles (0.00s)
=== RUN   TestHandleSetPermissions_NoCircularDependencies
    handler_permissions_test.go:1153: âœ“ No role hierarchy implemented - circular dependencies not possible
--- PASS: TestHandleSetPermissions_NoCircularDependencies (0.00s)
=== RUN   TestHandleSetPermissions_DefaultRoles_CanBeModified
    handler_permissions_test.go:1177: Expected status 200, got 403
    handler_permissions_test.go:1184: Expected 1 permission for modified admin role, got 95
    handler_permissions_test.go:1187: âš ï¸ DESIGN ISSUE: Default roles can be modified, potentially locking out all admins
    handler_permissions_test.go:1188: Consider: Protect default roles OR implement a 'system admin' that cannot be modified
--- FAIL: TestHandleSetPermissions_DefaultRoles_CanBeModified (0.00s)
=== RUN   TestHandleSetPermissions_ExtremelyLongRoleName
    handler_permissions_test.go:1212: Long role name rejected: 403
--- PASS: TestHandleSetPermissions_ExtremelyLongRoleName (0.00s)
=== RUN   TestHandleSetPermissions_SpecialCharactersInRole
=== RUN   TestHandleSetPermissions_SpecialCharactersInRole/role-with-dashes
    handler_permissions_test.go:1245: Role 'role-with-dashes' rejected: 403
=== RUN   TestHandleSetPermissions_SpecialCharactersInRole/role_with_underscores
    handler_permissions_test.go:1245: Role 'role_with_underscores' rejected: 403
=== RUN   TestHandleSetPermissions_SpecialCharactersInRole/role.with.dots
    handler_permissions_test.go:1245: Role 'role.with.dots' rejected: 403
=== RUN   TestHandleSetPermissions_SpecialCharactersInRole/role_with_spaces
    handler_permissions_test.go:1245: Role 'role with spaces' rejected: 403
=== RUN   TestHandleSetPermissions_SpecialCharactersInRole/role@with#special$chars
    handler_permissions_test.go:1245: Role 'role@with#special$chars' rejected: 403
=== RUN   TestHandleSetPermissions_SpecialCharactersInRole/role'with'quotes
    handler_permissions_test.go:1245: Role 'role'with'quotes' rejected: 403
--- PASS: TestHandleSetPermissions_SpecialCharactersInRole (0.00s)
    --- PASS: TestHandleSetPermissions_SpecialCharactersInRole/role-with-dashes (0.00s)
    --- PASS: TestHandleSetPermissions_SpecialCharactersInRole/role_with_underscores (0.00s)
    --- PASS: TestHandleSetPermissions_SpecialCharactersInRole/role.with.dots (0.00s)
    --- PASS: TestHandleSetPermissions_SpecialCharactersInRole/role_with_spaces (0.00s)
    --- PASS: TestHandleSetPermissions_SpecialCharactersInRole/role@with#special$chars (0.00s)
    --- PASS: TestHandleSetPermissions_SpecialCharactersInRole/role'with'quotes (0.00s)
=== RUN   TestHandleListPermissions_DatabaseError
--- PASS: TestHandleListPermissions_DatabaseError (0.00s)
=== RUN   TestHandleSetPermissions_DatabaseError
    handler_permissions_test.go:1283: Expected status 500 for database error, got 403
--- FAIL: TestHandleSetPermissions_DatabaseError (0.00s)
=== RUN   TestPOAutogen_BOMShortageDetection
--- PASS: TestPOAutogen_BOMShortageDetection (0.00s)
=== RUN   TestPOAutogen_MultiVendorSplitting
--- PASS: TestPOAutogen_MultiVendorSplitting (0.00s)
=== RUN   TestPOAutogen_SuggestedPOIncludesCorrectDetails
--- PASS: TestPOAutogen_SuggestedPOIncludesCorrectDetails (0.00s)
=== RUN   TestPOAutogen_ApproveRejectWorkflow
--- PASS: TestPOAutogen_ApproveRejectWorkflow (0.00s)
=== RUN   TestPOAutogen_ApprovedPOCreated
--- PASS: TestPOAutogen_ApprovedPOCreated (0.00s)
=== RUN   TestPOAutogen_NoSuggestionsWhenNoShortage
--- PASS: TestPOAutogen_NoSuggestionsWhenNoShortage (0.00s)
=== RUN   TestHandleListPrices_Empty
--- PASS: TestHandleListPrices_Empty (0.00s)
=== RUN   TestHandleListPrices_WithData
--- PASS: TestHandleListPrices_WithData (0.00s)
=== RUN   TestHandleCreatePrice_SuccessWithVendorID
--- PASS: TestHandleCreatePrice_SuccessWithVendorID (0.00s)
=== RUN   TestHandleCreatePrice_SuccessWithVendorName
--- PASS: TestHandleCreatePrice_SuccessWithVendorName (0.00s)
=== RUN   TestHandleCreatePrice_Defaults
--- PASS: TestHandleCreatePrice_Defaults (0.00s)
=== RUN   TestHandleCreatePrice_ValidationErrors
=== RUN   TestHandleCreatePrice_ValidationErrors/Missing_IPN
=== RUN   TestHandleCreatePrice_ValidationErrors/Missing_unit_price
=== RUN   TestHandleCreatePrice_ValidationErrors/Zero_unit_price
=== RUN   TestHandleCreatePrice_ValidationErrors/Negative_unit_price
--- PASS: TestHandleCreatePrice_ValidationErrors (0.00s)
    --- PASS: TestHandleCreatePrice_ValidationErrors/Missing_IPN (0.00s)
    --- PASS: TestHandleCreatePrice_ValidationErrors/Missing_unit_price (0.00s)
    --- PASS: TestHandleCreatePrice_ValidationErrors/Zero_unit_price (0.00s)
    --- PASS: TestHandleCreatePrice_ValidationErrors/Negative_unit_price (0.00s)
=== RUN   TestHandleDeletePrice_Success
--- PASS: TestHandleDeletePrice_Success (0.00s)
=== RUN   TestHandleDeletePrice_NotFound
--- PASS: TestHandleDeletePrice_NotFound (0.00s)
=== RUN   TestHandlePriceTrend_Empty
--- PASS: TestHandlePriceTrend_Empty (0.00s)
=== RUN   TestHandlePriceTrend_WithData
--- PASS: TestHandlePriceTrend_WithData (0.00s)
=== RUN   TestHandlePriceTrend_MultipleCurrencies
--- PASS: TestHandlePriceTrend_MultipleCurrencies (0.00s)
=== RUN   TestRecordPriceFromPO
--- PASS: TestRecordPriceFromPO (0.00s)
=== RUN   TestRecordPriceFromPO_InvalidPrice
--- PASS: TestRecordPriceFromPO_InvalidPrice (0.00s)
=== RUN   TestPriceHistory_ChronologicalOrdering
--- PASS: TestPriceHistory_ChronologicalOrdering (0.00s)
=== RUN   TestHandleListPOs_Empty
--- PASS: TestHandleListPOs_Empty (0.00s)
=== RUN   TestHandleListPOs_WithData
--- PASS: TestHandleListPOs_WithData (0.00s)
=== RUN   TestHandleGetPO_Success
--- PASS: TestHandleGetPO_Success (0.00s)
=== RUN   TestHandleGetPO_NotFound
--- PASS: TestHandleGetPO_NotFound (0.00s)
=== RUN   TestHandleCreatePO_Success
--- PASS: TestHandleCreatePO_Success (0.00s)
=== RUN   TestHandleCreatePO_DefaultStatus
--- PASS: TestHandleCreatePO_DefaultStatus (0.00s)
=== RUN   TestHandleCreatePO_InvalidVendor
--- PASS: TestHandleCreatePO_InvalidVendor (0.00s)
=== RUN   TestHandleCreatePO_NegativeQty
--- PASS: TestHandleCreatePO_NegativeQty (0.00s)
=== RUN   TestHandleCreatePO_NegativePrice
--- PASS: TestHandleCreatePO_NegativePrice (0.00s)
=== RUN   TestHandleUpdatePO_Success
--- PASS: TestHandleUpdatePO_Success (0.00s)
=== RUN   TestHandleGeneratePOFromWO_Success
--- PASS: TestHandleGeneratePOFromWO_Success (0.00s)
=== RUN   TestHandleGeneratePOFromWO_MissingWOID
--- PASS: TestHandleGeneratePOFromWO_MissingWOID (0.00s)
=== RUN   TestHandleGeneratePOFromWO_WONotFound
--- PASS: TestHandleGeneratePOFromWO_WONotFound (0.00s)
=== RUN   TestHandleGeneratePOFromWO_NoShortages
--- PASS: TestHandleGeneratePOFromWO_NoShortages (0.00s)
=== RUN   TestHandleListProductPricing
=== RUN   TestHandleListProductPricing/empty_list
    handler_product_pricing_granular_test.go:173: Failed to decode response: json: cannot unmarshal object into Go value of type []main.ProductPricing
=== RUN   TestHandleListProductPricing/multiple_pricing_tiers
    handler_product_pricing_granular_test.go:173: Failed to decode response: json: cannot unmarshal object into Go value of type []main.ProductPricing
=== RUN   TestHandleListProductPricing/filter_by_product_ipn
    handler_product_pricing_granular_test.go:173: Failed to decode response: json: cannot unmarshal object into Go value of type []main.ProductPricing
=== RUN   TestHandleListProductPricing/filter_by_pricing_tier
    handler_product_pricing_granular_test.go:173: Failed to decode response: json: cannot unmarshal object into Go value of type []main.ProductPricing
=== RUN   TestHandleListProductPricing/multiple_currencies
    handler_product_pricing_granular_test.go:173: Failed to decode response: json: cannot unmarshal object into Go value of type []main.ProductPricing
--- FAIL: TestHandleListProductPricing (0.00s)
    --- FAIL: TestHandleListProductPricing/empty_list (0.00s)
    --- FAIL: TestHandleListProductPricing/multiple_pricing_tiers (0.00s)
    --- FAIL: TestHandleListProductPricing/filter_by_product_ipn (0.00s)
    --- FAIL: TestHandleListProductPricing/filter_by_pricing_tier (0.00s)
    --- FAIL: TestHandleListProductPricing/multiple_currencies (0.00s)
=== RUN   TestHandleGetProductPricing
    handler_product_pricing_granular_test.go:211: Expected ID 1, got 0
    handler_product_pricing_granular_test.go:214: Expected ProductIPN PROD-001, got 
    handler_product_pricing_granular_test.go:217: Expected UnitPrice 100.0, got 0.00
--- FAIL: TestHandleGetProductPricing (0.00s)
=== RUN   TestHandleGetProductPricing_NotFound
--- PASS: TestHandleGetProductPricing_NotFound (0.00s)
=== RUN   TestHandleCreateProductPricing
=== RUN   TestHandleCreateProductPricing/valid_pricing
    handler_product_pricing_granular_test.go:320: Expected non-zero ID
=== RUN   TestHandleCreateProductPricing/defaults_applied
    handler_product_pricing_granular_test.go:320: Expected non-zero ID
    handler_product_pricing_granular_test.go:325: Expected default currency USD, got 
    handler_product_pricing_granular_test.go:328: Expected default tier standard, got 
=== RUN   TestHandleCreateProductPricing/missing_product_ipn
=== RUN   TestHandleCreateProductPricing/volume_tier
    handler_product_pricing_granular_test.go:320: Expected non-zero ID
    handler_product_pricing_granular_test.go:325: Expected default currency USD, got 
=== RUN   TestHandleCreateProductPricing/EUR_currency
    handler_product_pricing_granular_test.go:320: Expected non-zero ID
    handler_product_pricing_granular_test.go:328: Expected default tier standard, got 
--- FAIL: TestHandleCreateProductPricing (0.00s)
    --- FAIL: TestHandleCreateProductPricing/valid_pricing (0.00s)
    --- FAIL: TestHandleCreateProductPricing/defaults_applied (0.00s)
    --- PASS: TestHandleCreateProductPricing/missing_product_ipn (0.00s)
    --- FAIL: TestHandleCreateProductPricing/volume_tier (0.00s)
    --- FAIL: TestHandleCreateProductPricing/EUR_currency (0.00s)
=== RUN   TestHandleUpdateProductPricing
    handler_product_pricing_granular_test.go:364: Expected updated price 110.0, got 0.00
    handler_product_pricing_granular_test.go:367: ID should not change, expected 1, got 0
--- FAIL: TestHandleUpdateProductPricing (0.00s)
=== RUN   TestHandleUpdateProductPricing_NotFound
--- PASS: TestHandleUpdateProductPricing_NotFound (0.00s)
=== RUN   TestHandleDeleteProductPricing
--- PASS: TestHandleDeleteProductPricing (0.00s)
=== RUN   TestHandleDeleteProductPricing_NotFound
--- PASS: TestHandleDeleteProductPricing_NotFound (0.00s)
=== RUN   TestHandleListCostAnalysis
    handler_product_pricing_granular_test.go:464: Expected 1 item, got 0
--- FAIL: TestHandleListCostAnalysis (0.00s)
=== RUN   TestHandleCreateCostAnalysis
    handler_product_pricing_granular_test.go:507: Expected total cost 100.0, got 0.00
    handler_product_pricing_granular_test.go:512: Expected margin 50%, got 0.00%
--- FAIL: TestHandleCreateCostAnalysis (0.00s)
=== RUN   TestHandleCreateCostAnalysis_MissingIPN
--- PASS: TestHandleCreateCostAnalysis_MissingIPN (0.00s)
=== RUN   TestHandleProductPricingHistory
    handler_product_pricing_granular_test.go:566: Expected 2 items, got 0
--- FAIL: TestHandleProductPricingHistory (0.02s)
=== RUN   TestHandleBulkUpdateProductPricing
=== RUN   TestHandleBulkUpdateProductPricing/percentage_increase
    handler_product_pricing_granular_test.go:667: Response missing 'updated' field: map[data:map[total:2 updated:2]]
=== RUN   TestHandleBulkUpdateProductPricing/percentage_decrease
    handler_product_pricing_granular_test.go:667: Response missing 'updated' field: map[data:map[total:2 updated:2]]
=== RUN   TestHandleBulkUpdateProductPricing/absolute_increase
    handler_product_pricing_granular_test.go:667: Response missing 'updated' field: map[data:map[total:2 updated:2]]
=== RUN   TestHandleBulkUpdateProductPricing/absolute_decrease
    handler_product_pricing_granular_test.go:667: Response missing 'updated' field: map[data:map[total:2 updated:2]]
--- FAIL: TestHandleBulkUpdateProductPricing (0.00s)
    --- FAIL: TestHandleBulkUpdateProductPricing/percentage_increase (0.00s)
    --- FAIL: TestHandleBulkUpdateProductPricing/percentage_decrease (0.00s)
    --- FAIL: TestHandleBulkUpdateProductPricing/absolute_increase (0.00s)
    --- FAIL: TestHandleBulkUpdateProductPricing/absolute_decrease (0.00s)
=== RUN   TestHandleBulkUpdateProductPricing_InvalidType
--- PASS: TestHandleBulkUpdateProductPricing_InvalidType (0.00s)
=== RUN   TestHandleBulkUpdateProductPricing_EmptyIDs
--- PASS: TestHandleBulkUpdateProductPricing_EmptyIDs (0.00s)
=== RUN   TestProductPricing_MultipleCurrencies
    handler_product_pricing_granular_test.go:757: Expected 4 pricing records, got 0
--- FAIL: TestProductPricing_MultipleCurrencies (0.00s)
=== RUN   TestProductPricing_TierOrdering
    handler_product_pricing_granular_test.go:795: Expected 3 pricing records, got 0
--- FAIL: TestProductPricing_TierOrdering (0.00s)
=== RUN   TestCostAnalysis_ZeroSellingPrice
--- PASS: TestCostAnalysis_ZeroSellingPrice (0.00s)
=== RUN   TestProductPricingCRUD
    handler_product_pricing_test.go:19: create pricing: 500 {"error":"SQL logic error: no such table: product_pricing (1)"}
--- FAIL: TestProductPricingCRUD (0.05s)
=== RUN   TestProductPricingAnalysis
    handler_product_pricing_test.go:114: create: 500 {"error":"SQL logic error: no such table: product_pricing (1)"}
--- FAIL: TestProductPricingAnalysis (0.05s)
=== RUN   TestProductPricingHistory
    handler_product_pricing_test.go:165: create: 500 {"error":"SQL logic error: no such table: product_pricing (1)"}
--- FAIL: TestProductPricingHistory (0.05s)
=== RUN   TestProductPricingBulkUpdate
    handler_product_pricing_test.go:197: create: 500
--- FAIL: TestProductPricingBulkUpdate (0.05s)
=== RUN   TestQueryProfilerStats_Disabled
    handler_query_profiler_test.go:90: âœ“ Query profiler stats returns error when disabled
--- PASS: TestQueryProfilerStats_Disabled (0.00s)
=== RUN   TestQueryProfilerStats_Enabled
2026/02/20 14:41:09 [QueryProfiler] Enabled with threshold: 100ms
2026/02/20 14:41:09 [SLOW QUERY] SELECT * FROM test_data WHERE value > ? took 150ms
    handler_query_profiler_test.go:157: âœ“ Query profiler stats returns correct statistics: map[avg_duration:76.666666ms enabled:true max_duration:150ms min_duration:30ms slow_queries:1 threshold:100ms total_queries:3]
--- PASS: TestQueryProfilerStats_Enabled (0.00s)
=== RUN   TestQueryProfilerSlowQueries
2026/02/20 14:41:09 [QueryProfiler] Enabled with threshold: 100ms
2026/02/20 14:41:09 [SLOW QUERY] SELECT * FROM slow_table WHERE expensive_join took 250ms
2026/02/20 14:41:09 [SLOW QUERY] UPDATE slow_table SET value = ? took 180ms
    handler_query_profiler_test.go:233: âœ“ Query profiler correctly identifies 2 slow queries
--- PASS: TestQueryProfilerSlowQueries (0.00s)
=== RUN   TestQueryProfilerSlowQueries_Disabled
--- PASS: TestQueryProfilerSlowQueries_Disabled (0.00s)
=== RUN   TestQueryProfilerAllQueries
2026/02/20 14:41:09 [QueryProfiler] Enabled with threshold: 100ms
2026/02/20 14:41:09 [SLOW QUERY] UPDATE table3 SET x = ? took 150ms
    handler_query_profiler_test.go:345: âœ“ Query profiler returns all 4 queries
--- PASS: TestQueryProfilerAllQueries (0.00s)
=== RUN   TestQueryProfilerAllQueries_Disabled
--- PASS: TestQueryProfilerAllQueries_Disabled (0.00s)
=== RUN   TestQueryProfilerReset
2026/02/20 14:41:09 [QueryProfiler] Enabled with threshold: 100ms
2026/02/20 14:41:09 [QueryProfiler] Reset complete
    handler_query_profiler_test.go:413: âœ“ Query profiler reset successful
--- PASS: TestQueryProfilerReset (0.00s)
=== RUN   TestQueryProfilerReset_WrongMethod
2026/02/20 14:41:09 [QueryProfiler] Enabled with threshold: 100ms
--- PASS: TestQueryProfilerReset_WrongMethod (0.00s)
=== RUN   TestQueryProfilerReset_Disabled
--- PASS: TestQueryProfilerReset_Disabled (0.00s)
=== RUN   TestQueryProfilerCircularBuffer
2026/02/20 14:41:09 [QueryProfiler] Enabled with threshold: 100ms
    handler_query_profiler_test.go:471: âœ“ Circular buffer correctly limits query storage to 5
--- PASS: TestQueryProfilerCircularBuffer (0.00s)
=== RUN   TestQueryProfilerEmptyStats
2026/02/20 14:41:09 [QueryProfiler] Enabled with threshold: 100ms
    handler_query_profiler_test.go:510: âœ“ Empty profiler returns valid stats
--- PASS: TestQueryProfilerEmptyStats (0.00s)
=== RUN   TestQueryProfilerThresholdBoundary
2026/02/20 14:41:09 [QueryProfiler] Enabled with threshold: 100ms
2026/02/20 14:41:09 [SLOW QUERY] Exactly at threshold took 100ms
2026/02/20 14:41:09 [SLOW QUERY] Just above threshold took 101ms
    handler_query_profiler_test.go:532: âœ“ Threshold boundary testing passed
--- PASS: TestQueryProfilerThresholdBoundary (0.00s)
=== RUN   TestQueryProfilerConcurrentAccess
2026/02/20 14:41:09 [QueryProfiler] Enabled with threshold: 100ms
    handler_query_profiler_test.go:566: âœ“ Concurrent access handled correctly: 1000 queries recorded
--- PASS: TestQueryProfilerConcurrentAccess (0.00s)
=== RUN   TestQueryProfilerSQLSanitization
2026/02/20 14:41:09 [QueryProfiler] Enabled with threshold: 100ms
    handler_query_profiler_test.go:597: âœ“ Query sanitization works correctly
--- PASS: TestQueryProfilerSQLSanitization (0.00s)
=== RUN   TestQueryProfilerArgsCapture
2026/02/20 14:41:09 [QueryProfiler] Enabled with threshold: 100ms
    handler_query_profiler_test.go:631: âœ“ Query arguments captured: [42 test string 3.14]
--- PASS: TestQueryProfilerArgsCapture (0.00s)
=== RUN   TestHandleListQuotes_Empty
--- PASS: TestHandleListQuotes_Empty (0.00s)
=== RUN   TestHandleListQuotes_WithData
--- PASS: TestHandleListQuotes_WithData (0.00s)
=== RUN   TestHandleGetQuote_NotFound
--- PASS: TestHandleGetQuote_NotFound (0.00s)
=== RUN   TestHandleGetQuote_WithoutLines
--- PASS: TestHandleGetQuote_WithoutLines (0.00s)
=== RUN   TestHandleGetQuote_WithLines
--- PASS: TestHandleGetQuote_WithLines (0.00s)
=== RUN   TestHandleCreateQuote_MissingCustomer
--- PASS: TestHandleCreateQuote_MissingCustomer (0.00s)
=== RUN   TestHandleCreateQuote_InvalidStatus
--- PASS: TestHandleCreateQuote_InvalidStatus (0.00s)
=== RUN   TestHandleCreateQuote_InvalidDate
--- PASS: TestHandleCreateQuote_InvalidDate (0.00s)
=== RUN   TestHandleCreateQuote_InvalidLineQty
=== RUN   TestHandleCreateQuote_InvalidLineQty/zero_qty
=== RUN   TestHandleCreateQuote_InvalidLineQty/negative_qty
=== RUN   TestHandleCreateQuote_InvalidLineQty/valid_qty
--- PASS: TestHandleCreateQuote_InvalidLineQty (0.00s)
    --- PASS: TestHandleCreateQuote_InvalidLineQty/zero_qty (0.00s)
    --- PASS: TestHandleCreateQuote_InvalidLineQty/negative_qty (0.00s)
    --- PASS: TestHandleCreateQuote_InvalidLineQty/valid_qty (0.00s)
=== RUN   TestHandleCreateQuote_InvalidLinePrice
--- PASS: TestHandleCreateQuote_InvalidLinePrice (0.00s)
=== RUN   TestHandleCreateQuote_Success
--- PASS: TestHandleCreateQuote_Success (0.00s)
=== RUN   TestHandleCreateQuote_DefaultStatus
--- PASS: TestHandleCreateQuote_DefaultStatus (0.00s)
=== RUN   TestHandleUpdateQuote_Success
--- PASS: TestHandleUpdateQuote_Success (0.00s)
=== RUN   TestHandleUpdateQuote_StatusTransitions
=== RUN   TestHandleUpdateQuote_StatusTransitions/draft_to_sent
=== RUN   TestHandleUpdateQuote_StatusTransitions/sent_to_accepted
=== RUN   TestHandleUpdateQuote_StatusTransitions/sent_to_rejected
=== RUN   TestHandleUpdateQuote_StatusTransitions/draft_to_accepted
=== RUN   TestHandleUpdateQuote_StatusTransitions/sent_to_expired
=== RUN   TestHandleUpdateQuote_StatusTransitions/draft_to_cancelled
--- PASS: TestHandleUpdateQuote_StatusTransitions (0.00s)
    --- PASS: TestHandleUpdateQuote_StatusTransitions/draft_to_sent (0.00s)
    --- PASS: TestHandleUpdateQuote_StatusTransitions/sent_to_accepted (0.00s)
    --- PASS: TestHandleUpdateQuote_StatusTransitions/sent_to_rejected (0.00s)
    --- PASS: TestHandleUpdateQuote_StatusTransitions/draft_to_accepted (0.00s)
    --- PASS: TestHandleUpdateQuote_StatusTransitions/sent_to_expired (0.00s)
    --- PASS: TestHandleUpdateQuote_StatusTransitions/draft_to_cancelled (0.00s)
=== RUN   TestHandleQuoteCost_NoBOMData
--- PASS: TestHandleQuoteCost_NoBOMData (0.00s)
=== RUN   TestHandleQuoteCost_WithBOMData
    handler_quotes_test.go:800: BOM cost data not available in test environment (PO lookup may not be working)
--- SKIP: TestHandleQuoteCost_WithBOMData (0.00s)
=== RUN   TestHandleQuotePDF_NotFound
--- PASS: TestHandleQuotePDF_NotFound (0.00s)
=== RUN   TestHandleQuotePDF_Success
--- PASS: TestHandleQuotePDF_Success (0.00s)
=== RUN   TestHandleQuotePDF_EmptyLines
--- PASS: TestHandleQuotePDF_EmptyLines (0.00s)
=== RUN   TestHandleQuotePDF_XSS_Prevention
--- PASS: TestHandleQuotePDF_XSS_Prevention (0.00s)
=== RUN   TestQuoteValidation_MaxQty
--- PASS: TestQuoteValidation_MaxQty (0.00s)
=== RUN   TestQuoteValidation_MaxPrice
--- PASS: TestQuoteValidation_MaxPrice (0.00s)
=== RUN   TestHandleCreateQuote_MultipleValidationErrors
--- PASS: TestHandleCreateQuote_MultipleValidationErrors (0.00s)
=== RUN   TestHandleQuoteCost_EmptyQuote
--- PASS: TestHandleQuoteCost_EmptyQuote (0.00s)
=== RUN   TestHandleCreateQuote_InvalidJSON
--- PASS: TestHandleCreateQuote_InvalidJSON (0.00s)
=== RUN   TestHandleUpdateQuote_InvalidJSON
--- PASS: TestHandleUpdateQuote_InvalidJSON (0.00s)
=== RUN   TestHandleListReceiving_Empty
--- PASS: TestHandleListReceiving_Empty (0.00s)
=== RUN   TestHandleListReceiving_WithData
--- PASS: TestHandleListReceiving_WithData (0.00s)
=== RUN   TestHandleListReceiving_OrderByCreatedDesc
--- PASS: TestHandleListReceiving_OrderByCreatedDesc (0.00s)
=== RUN   TestHandleListReceiving_FilterPending
--- PASS: TestHandleListReceiving_FilterPending (0.00s)
=== RUN   TestHandleListReceiving_FilterInspected
--- PASS: TestHandleListReceiving_FilterInspected (0.00s)
=== RUN   TestHandleListReceiving_NoFilter
--- PASS: TestHandleListReceiving_NoFilter (0.00s)
=== RUN   TestHandleInspectReceiving_Success_AllPassed
--- PASS: TestHandleInspectReceiving_Success_AllPassed (0.00s)
=== RUN   TestHandleInspectReceiving_Success_AllFailed
--- PASS: TestHandleInspectReceiving_Success_AllFailed (0.00s)
=== RUN   TestHandleInspectReceiving_Success_Mixed
--- PASS: TestHandleInspectReceiving_Success_Mixed (0.00s)
=== RUN   TestHandleInspectReceiving_InvalidID
--- PASS: TestHandleInspectReceiving_InvalidID (0.00s)
=== RUN   TestHandleInspectReceiving_NotFound
--- PASS: TestHandleInspectReceiving_NotFound (0.00s)
=== RUN   TestHandleInspectReceiving_QuantityValidation_ExceedsReceived
=== RUN   TestHandleInspectReceiving_QuantityValidation_ExceedsReceived/total_exceeds_by_1
=== RUN   TestHandleInspectReceiving_QuantityValidation_ExceedsReceived/total_exceeds_by_50
=== RUN   TestHandleInspectReceiving_QuantityValidation_ExceedsReceived/total_exceeds_all_high
=== RUN   TestHandleInspectReceiving_QuantityValidation_ExceedsReceived/exact_match
=== RUN   TestHandleInspectReceiving_QuantityValidation_ExceedsReceived/partial_match
    handler_receiving_test.go:635: Expected status 200, got 404: {"error":"inspection record not found or already completed"}
=== RUN   TestHandleInspectReceiving_QuantityValidation_ExceedsReceived/under_received
    handler_receiving_test.go:635: Expected status 200, got 404: {"error":"inspection record not found or already completed"}
--- FAIL: TestHandleInspectReceiving_QuantityValidation_ExceedsReceived (0.00s)
    --- PASS: TestHandleInspectReceiving_QuantityValidation_ExceedsReceived/total_exceeds_by_1 (0.00s)
    --- PASS: TestHandleInspectReceiving_QuantityValidation_ExceedsReceived/total_exceeds_by_50 (0.00s)
    --- PASS: TestHandleInspectReceiving_QuantityValidation_ExceedsReceived/total_exceeds_all_high (0.00s)
    --- PASS: TestHandleInspectReceiving_QuantityValidation_ExceedsReceived/exact_match (0.00s)
    --- FAIL: TestHandleInspectReceiving_QuantityValidation_ExceedsReceived/partial_match (0.00s)
    --- FAIL: TestHandleInspectReceiving_QuantityValidation_ExceedsReceived/under_received (0.00s)
=== RUN   TestHandleInspectReceiving_NegativeQuantities
--- PASS: TestHandleInspectReceiving_NegativeQuantities (0.00s)
=== RUN   TestHandleInspectReceiving_InspectorFromUsername
--- PASS: TestHandleInspectReceiving_InspectorFromUsername (0.00s)
=== RUN   TestHandleInspectReceiving_InvalidJSON
--- PASS: TestHandleInspectReceiving_InvalidJSON (0.00s)
=== RUN   TestHandleInspectReceiving_InventoryNotExists_ShouldCreate
--- PASS: TestHandleInspectReceiving_InventoryNotExists_ShouldCreate (0.00s)
=== RUN   TestHandleInspectReceiving_MultipleInspections_InventoryAccumulation
--- PASS: TestHandleInspectReceiving_MultipleInspections_InventoryAccumulation (0.00s)
=== RUN   TestHandleInspectReceiving_Concurrency_RaceCondition
    handler_receiving_test.go:811: Concurrency test - requires special setup for race detection
--- SKIP: TestHandleInspectReceiving_Concurrency_RaceCondition (0.00s)
=== RUN   TestHandleInspectReceiving_ZeroQuantities
--- PASS: TestHandleInspectReceiving_ZeroQuantities (0.00s)
=== RUN   TestHandleInspectReceiving_DuplicateInspection
--- PASS: TestHandleInspectReceiving_DuplicateInspection (0.00s)
=== RUN   TestHandleInspectReceiving_AuditTrail
--- PASS: TestHandleInspectReceiving_AuditTrail (0.00s)
=== RUN   TestHandleInspectReceiving_XSS_Prevention
--- PASS: TestHandleInspectReceiving_XSS_Prevention (0.00s)
=== RUN   TestHandleWhereUsed_NotInThisFile
    handler_receiving_test.go:1034: handleWhereUsed tests require file system BOM files - out of scope for this critical receiving test
--- SKIP: TestHandleWhereUsed_NotInThisFile (0.00s)
=== RUN   TestHandleInspectReceiving_CompleteWorkflow
--- PASS: TestHandleInspectReceiving_CompleteWorkflow (0.00s)
=== RUN   TestHandleListReceiving_NullFields
--- PASS: TestHandleListReceiving_NullFields (0.00s)
=== RUN   TestReportInventoryValuation_Empty
--- PASS: TestReportInventoryValuation_Empty (0.00s)
=== RUN   TestReportInventoryValuation_WithData
    handler_reports_test.go:277: Expected 3 categories, got 0
    handler_reports_test.go:288: Expected grand total 980.00, got 0.00
    handler_reports_test.go:301: Expected to find RES category group
--- FAIL: TestReportInventoryValuation_WithData (0.00s)
=== RUN   TestReportInventoryValuation_NoPricing
    handler_reports_test.go:354: Expected 1 group, got 0
--- FAIL: TestReportInventoryValuation_NoPricing (0.00s)
=== RUN   TestReportInventoryValuation_CSV
--- PASS: TestReportInventoryValuation_CSV (0.00s)
=== RUN   TestReportInventoryValuation_CategoryGrouping
    handler_reports_test.go:483: Expected category 'RES' to be present for IPN 'RES-001'
    handler_reports_test.go:483: Expected category 'CAP' to be present for IPN 'CAP-ABC-123'
    handler_reports_test.go:483: Expected category 'IC' to be present for IPN 'IC-ATmega'
    handler_reports_test.go:483: Expected category 'CONN' to be present for IPN 'CONN-USB-TypeC'
    handler_reports_test.go:483: Expected category 'NoHyphen' to be present for IPN 'NoHyphen'
--- FAIL: TestReportInventoryValuation_CategoryGrouping (0.00s)
=== RUN   TestReportInventoryValuation_LatestPOPrice
    handler_reports_test.go:516: Expected 1 group with 1 item
--- FAIL: TestReportInventoryValuation_LatestPOPrice (0.00s)
=== RUN   TestReportInventoryValuation_ZeroQty
    handler_reports_test.go:548: Expected 1 group with 1 item
--- FAIL: TestReportInventoryValuation_ZeroQty (0.00s)
=== RUN   TestReportOpenECOs_Empty
--- PASS: TestReportOpenECOs_Empty (0.00s)
=== RUN   TestReportOpenECOs_WithData
--- PASS: TestReportOpenECOs_WithData (0.00s)
=== RUN   TestReportOpenECOs_PriorityOrdering
--- PASS: TestReportOpenECOs_PriorityOrdering (0.00s)
=== RUN   TestReportOpenECOs_AgeDaysCalculation
    handler_reports_test.go:718: Expected 1 item, got 0
--- FAIL: TestReportOpenECOs_AgeDaysCalculation (0.00s)
=== RUN   TestReportOpenECOs_CSV
--- PASS: TestReportOpenECOs_CSV (0.00s)
=== RUN   TestReportOpenECOs_OnlyDraftAndReview
    handler_reports_test.go:794: Expected 2 items (draft+review), got 0
--- FAIL: TestReportOpenECOs_OnlyDraftAndReview (0.00s)
=== RUN   TestReportWOThroughput_Empty
    handler_reports_test.go:828: Expected default days=30, got 0
--- FAIL: TestReportWOThroughput_Empty (0.00s)
=== RUN   TestReportWOThroughput_WithData
    handler_reports_test.go:881: Expected total_completed=3, got 0
    handler_reports_test.go:887: Expected avg_cycle_time=2.00, got 0.00
    handler_reports_test.go:891: Expected count_by_status['completed']=3, got 0
--- FAIL: TestReportWOThroughput_WithData (0.00s)
=== RUN   TestReportWOThroughput_DateFiltering
=== RUN   TestReportWOThroughput_DateFiltering/default_30_days
    handler_reports_test.go:938: Expected 1 completed WOs, got 0
=== RUN   TestReportWOThroughput_DateFiltering/30_days_explicit
    handler_reports_test.go:938: Expected 1 completed WOs, got 0
=== RUN   TestReportWOThroughput_DateFiltering/60_days
    handler_reports_test.go:938: Expected 1 completed WOs, got 0
=== RUN   TestReportWOThroughput_DateFiltering/90_days
    handler_reports_test.go:938: Expected 1 completed WOs, got 0
--- FAIL: TestReportWOThroughput_DateFiltering (0.00s)
    --- FAIL: TestReportWOThroughput_DateFiltering/default_30_days (0.00s)
    --- FAIL: TestReportWOThroughput_DateFiltering/30_days_explicit (0.00s)
    --- FAIL: TestReportWOThroughput_DateFiltering/60_days (0.00s)
    --- FAIL: TestReportWOThroughput_DateFiltering/90_days (0.00s)
=== RUN   TestReportWOThroughput_DaysParameter
=== RUN   TestReportWOThroughput_DaysParameter/default
    handler_reports_test.go:980: Expected days=30, got 0
=== RUN   TestReportWOThroughput_DaysParameter/30_days
    handler_reports_test.go:980: Expected days=30, got 0
=== RUN   TestReportWOThroughput_DaysParameter/60_days
    handler_reports_test.go:980: Expected days=60, got 0
=== RUN   TestReportWOThroughput_DaysParameter/90_days
    handler_reports_test.go:980: Expected days=90, got 0
=== RUN   TestReportWOThroughput_DaysParameter/invalid_number
    handler_reports_test.go:980: Expected days=30, got 0
=== RUN   TestReportWOThroughput_DaysParameter/invalid_value
    handler_reports_test.go:980: Expected days=30, got 0
=== RUN   TestReportWOThroughput_DaysParameter/negative
    handler_reports_test.go:980: Expected days=30, got 0
=== RUN   TestReportWOThroughput_DaysParameter/zero
    handler_reports_test.go:980: Expected days=30, got 0
--- FAIL: TestReportWOThroughput_DaysParameter (0.00s)
    --- FAIL: TestReportWOThroughput_DaysParameter/default (0.00s)
    --- FAIL: TestReportWOThroughput_DaysParameter/30_days (0.00s)
    --- FAIL: TestReportWOThroughput_DaysParameter/60_days (0.00s)
    --- FAIL: TestReportWOThroughput_DaysParameter/90_days (0.00s)
    --- FAIL: TestReportWOThroughput_DaysParameter/invalid_number (0.00s)
    --- FAIL: TestReportWOThroughput_DaysParameter/invalid_value (0.00s)
    --- FAIL: TestReportWOThroughput_DaysParameter/negative (0.00s)
    --- FAIL: TestReportWOThroughput_DaysParameter/zero (0.00s)
=== RUN   TestReportWOThroughput_CycleTimeCalculation
    handler_reports_test.go:1019: Expected avg_cycle_time=1.75, got 0.00
    handler_reports_test.go:1023: Expected 4 completed WOs, got 0
--- FAIL: TestReportWOThroughput_CycleTimeCalculation (0.00s)
=== RUN   TestReportWOThroughput_MissingTimestamps
    handler_reports_test.go:1050: Expected total_completed=2, got 0
    handler_reports_test.go:1056: Expected avg_cycle_time=1.00 (only WO-002), got 0.00
--- FAIL: TestReportWOThroughput_MissingTimestamps (0.00s)
=== RUN   TestReportWOThroughput_CSV
    handler_reports_test.go:1086: Failed to parse CSV: record on line 4: wrong number of fields
--- FAIL: TestReportWOThroughput_CSV (0.00s)
=== RUN   TestReportWOThroughput_MultipleStatuses
    handler_reports_test.go:1133: Expected total_completed=3, got 0
    handler_reports_test.go:1137: Expected 2 completed status, got 0
    handler_reports_test.go:1141: Expected 1 cancelled status, got 0
--- FAIL: TestReportWOThroughput_MultipleStatuses (0.00s)
=== RUN   TestReportLowStock_Empty
    handler_reports_test.go:1165: Failed to decode response: json: cannot unmarshal object into Go value of type []main.LowStockItem
--- FAIL: TestReportLowStock_Empty (0.00s)
=== RUN   TestReportLowStock_WithData
    handler_reports_test.go:1201: Failed to decode response: json: cannot unmarshal object into Go value of type []main.LowStockItem
--- FAIL: TestReportLowStock_WithData (0.00s)
=== RUN   TestReportLowStock_SuggestedOrderCalculation
    handler_reports_test.go:1252: Expected 2 items, got 0
--- FAIL: TestReportLowStock_SuggestedOrderCalculation (0.00s)
=== RUN   TestReportLowStock_OrderingByShortage
    handler_reports_test.go:1289: Failed to decode response: json: cannot unmarshal object into Go value of type []main.LowStockItem
--- FAIL: TestReportLowStock_OrderingByShortage (0.00s)
=== RUN   TestReportLowStock_CSV
--- PASS: TestReportLowStock_CSV (0.00s)
=== RUN   TestReportLowStock_ZeroReorderPoint
    handler_reports_test.go:1379: Expected 1 item (excluding zero reorder_point), got 0
--- FAIL: TestReportLowStock_ZeroReorderPoint (0.00s)
=== RUN   TestReportNCRSummary_Empty
--- PASS: TestReportNCRSummary_Empty (0.00s)
=== RUN   TestReportNCRSummary_WithData
    handler_reports_test.go:1459: Expected total_open=4, got 0
    handler_reports_test.go:1464: Expected 2 critical NCRs, got 0
    handler_reports_test.go:1467: Expected 1 major NCR, got 0
    handler_reports_test.go:1470: Expected 1 minor NCR, got 0
    handler_reports_test.go:1475: Expected 2 dimensional NCRs, got 0
    handler_reports_test.go:1478: Expected 1 cosmetic NCR, got 0
    handler_reports_test.go:1481: Expected 1 electrical NCR, got 0
--- FAIL: TestReportNCRSummary_WithData (0.00s)
=== RUN   TestReportNCRSummary_AvgResolveTime
    handler_reports_test.go:1510: Expected avg_resolve_days=3.00, got 0.00
--- FAIL: TestReportNCRSummary_AvgResolveTime (0.00s)
=== RUN   TestReportNCRSummary_NullSeverityAndDefectType
    handler_reports_test.go:1532: Expected total_open=1, got 0
    handler_reports_test.go:1537: Expected 1 'unknown' severity, got 0
    handler_reports_test.go:1541: Expected 1 'unknown' defect_type, got 0
--- FAIL: TestReportNCRSummary_NullSeverityAndDefectType (0.00s)
=== RUN   TestReportNCRSummary_OnlyOpenNCRs
    handler_reports_test.go:1577: Expected total_open=2, got 0
--- FAIL: TestReportNCRSummary_OnlyOpenNCRs (0.00s)
=== RUN   TestReportNCRSummary_CSV
--- PASS: TestReportNCRSummary_CSV (0.00s)
=== RUN   TestReportNCRSummary_ResolveTimeWithMissingTimestamps
    handler_reports_test.go:1645: Expected avg_resolve_days=2.00 (only NCR-001), got 0.00
--- FAIL: TestReportNCRSummary_ResolveTimeWithMissingTimestamps (0.00s)
=== RUN   TestReports_XSS_Prevention
=== RUN   TestReports_XSS_Prevention/inventory_valuation
=== RUN   TestReports_XSS_Prevention/open_ecos
--- PASS: TestReports_XSS_Prevention (0.00s)
    --- PASS: TestReports_XSS_Prevention/inventory_valuation (0.00s)
    --- PASS: TestReports_XSS_Prevention/open_ecos (0.00s)
=== RUN   TestReports_SQLInjection_Prevention
=== RUN   TestReports_SQLInjection_Prevention/days_sql_injection
=== RUN   TestReports_SQLInjection_Prevention/format_sql_injection
=== RUN   TestReports_SQLInjection_Prevention/days_or_injection
--- PASS: TestReports_SQLInjection_Prevention (0.00s)
    --- PASS: TestReports_SQLInjection_Prevention/days_sql_injection (0.00s)
    --- PASS: TestReports_SQLInjection_Prevention/format_sql_injection (0.00s)
    --- PASS: TestReports_SQLInjection_Prevention/days_or_injection (0.00s)
=== RUN   TestReports_ConcurrentAccess
    handler_reports_test.go:1757: Concurrent request failed
    handler_reports_test.go:1757: Concurrent request failed
    handler_reports_test.go:1757: Concurrent request failed
    handler_reports_test.go:1757: Concurrent request failed
    handler_reports_test.go:1757: Concurrent request failed
    handler_reports_test.go:1757: Concurrent request failed
    handler_reports_test.go:1757: Concurrent request failed
    handler_reports_test.go:1757: Concurrent request failed
    handler_reports_test.go:1757: Concurrent request failed
--- FAIL: TestReports_ConcurrentAccess (0.00s)
=== RUN   TestReports_LargeDataset
    handler_reports_test.go:1792: Expected 100 items in report, got 0
--- FAIL: TestReports_LargeDataset (0.00s)
=== RUN   TestInventoryValuation_CalculationAccuracy
    handler_reports_test.go:1821: Expected groups in report, got none
--- FAIL: TestInventoryValuation_CalculationAccuracy (0.00s)
=== RUN   TestWOThroughput_CycleTimeRounding
    handler_reports_test.go:1865: Expected cycle time 1.04, got 0.00
--- FAIL: TestWOThroughput_CycleTimeRounding (0.00s)
=== RUN   TestNCRSummary_ResolveTimeRounding
    handler_reports_test.go:1889: Expected resolve time 1.04, got 0.00
--- FAIL: TestNCRSummary_ResolveTimeRounding (0.00s)
=== RUN   TestCSV_SpecialCharacters
    handler_reports_test.go:1919: Expected at least 2 rows
--- FAIL: TestCSV_SpecialCharacters (0.00s)
=== RUN   TestCSV_Encoding
    handler_reports_test.go:1946: CSV lost Unicode characters
--- FAIL: TestCSV_Encoding (0.00s)
=== RUN   TestHandleListRFQs_Empty
--- PASS: TestHandleListRFQs_Empty (0.00s)
=== RUN   TestHandleListRFQs_WithData
--- PASS: TestHandleListRFQs_WithData (0.00s)
=== RUN   TestHandleGetRFQ_Success
--- PASS: TestHandleGetRFQ_Success (0.00s)
=== RUN   TestHandleGetRFQ_NotFound
--- PASS: TestHandleGetRFQ_NotFound (0.00s)
=== RUN   TestHandleCreateRFQ_Success
--- PASS: TestHandleCreateRFQ_Success (0.00s)
=== RUN   TestHandleCreateRFQ_Validation
--- PASS: TestHandleCreateRFQ_Validation (0.00s)
=== RUN   TestHandleUpdateRFQ_Success
--- PASS: TestHandleUpdateRFQ_Success (0.00s)
=== RUN   TestHandleDeleteRFQ_Success
--- PASS: TestHandleDeleteRFQ_Success (0.00s)
=== RUN   TestHandleSendRFQ_Success
--- PASS: TestHandleSendRFQ_Success (0.00s)
=== RUN   TestHandleSendRFQ_InvalidStatus
--- PASS: TestHandleSendRFQ_InvalidStatus (0.00s)
=== RUN   TestHandleAwardRFQ_Success
--- PASS: TestHandleAwardRFQ_Success (0.00s)
=== RUN   TestHandleAwardRFQ_MissingVendor
--- PASS: TestHandleAwardRFQ_MissingVendor (0.00s)
=== RUN   TestHandleCloseRFQ_Success
--- PASS: TestHandleCloseRFQ_Success (0.00s)
=== RUN   TestHandleCloseRFQ_InvalidStatus
--- PASS: TestHandleCloseRFQ_InvalidStatus (0.00s)
=== RUN   TestHandleCreateRFQQuote_Success
--- PASS: TestHandleCreateRFQQuote_Success (0.00s)
=== RUN   TestHandleUpdateRFQQuote_Success
    handler_rfq_test.go:770: Expected unit_price 12.50, got 10.00
--- FAIL: TestHandleUpdateRFQQuote_Success (0.00s)
=== RUN   TestHandleCompareRFQ
--- PASS: TestHandleCompareRFQ (0.00s)
=== RUN   TestRFQWorkflow_StateTransitions
--- PASS: TestRFQWorkflow_StateTransitions (0.00s)
=== RUN   TestHandleListRMAs_Empty
--- PASS: TestHandleListRMAs_Empty (0.00s)
=== RUN   TestHandleListRMAs_WithData
--- PASS: TestHandleListRMAs_WithData (0.00s)
=== RUN   TestHandleListRMAs_OrderByCreatedDesc
--- PASS: TestHandleListRMAs_OrderByCreatedDesc (0.00s)
=== RUN   TestHandleGetRMA_Success
--- PASS: TestHandleGetRMA_Success (0.00s)
=== RUN   TestHandleGetRMA_NotFound
--- PASS: TestHandleGetRMA_NotFound (0.00s)
=== RUN   TestHandleGetRMA_WithTimestamps
--- PASS: TestHandleGetRMA_WithTimestamps (0.00s)
=== RUN   TestHandleCreateRMA_Success
--- PASS: TestHandleCreateRMA_Success (0.00s)
=== RUN   TestHandleCreateRMA_DefaultStatus
--- PASS: TestHandleCreateRMA_DefaultStatus (0.00s)
=== RUN   TestHandleCreateRMA_MissingSerialNumber
--- PASS: TestHandleCreateRMA_MissingSerialNumber (0.00s)
=== RUN   TestHandleCreateRMA_MissingReason
--- PASS: TestHandleCreateRMA_MissingReason (0.00s)
=== RUN   TestHandleCreateRMA_InvalidStatus
--- PASS: TestHandleCreateRMA_InvalidStatus (0.00s)
=== RUN   TestHandleCreateRMA_MaxLengthValidation
=== RUN   TestHandleCreateRMA_MaxLengthValidation/serial_number_too_long
=== RUN   TestHandleCreateRMA_MaxLengthValidation/customer_too_long
=== RUN   TestHandleCreateRMA_MaxLengthValidation/reason_too_long
=== RUN   TestHandleCreateRMA_MaxLengthValidation/defect_description_too_long
=== RUN   TestHandleCreateRMA_MaxLengthValidation/resolution_too_long
=== RUN   TestHandleCreateRMA_MaxLengthValidation/valid_max_lengths
--- PASS: TestHandleCreateRMA_MaxLengthValidation (0.00s)
    --- PASS: TestHandleCreateRMA_MaxLengthValidation/serial_number_too_long (0.00s)
    --- PASS: TestHandleCreateRMA_MaxLengthValidation/customer_too_long (0.00s)
    --- PASS: TestHandleCreateRMA_MaxLengthValidation/reason_too_long (0.00s)
    --- PASS: TestHandleCreateRMA_MaxLengthValidation/defect_description_too_long (0.00s)
    --- PASS: TestHandleCreateRMA_MaxLengthValidation/resolution_too_long (0.00s)
    --- PASS: TestHandleCreateRMA_MaxLengthValidation/valid_max_lengths (0.00s)
=== RUN   TestHandleCreateRMA_InvalidJSON
--- PASS: TestHandleCreateRMA_InvalidJSON (0.00s)
=== RUN   TestHandleCreateRMA_MultipleValidationErrors
--- PASS: TestHandleCreateRMA_MultipleValidationErrors (0.00s)
=== RUN   TestHandleUpdateRMA_Success
--- PASS: TestHandleUpdateRMA_Success (0.00s)
=== RUN   TestHandleUpdateRMA_StatusTransitions
=== RUN   TestHandleUpdateRMA_StatusTransitions/open_to_received
=== RUN   TestHandleUpdateRMA_StatusTransitions/received_to_diagnosing
=== RUN   TestHandleUpdateRMA_StatusTransitions/diagnosing_to_repairing
=== RUN   TestHandleUpdateRMA_StatusTransitions/repairing_to_resolved
=== RUN   TestHandleUpdateRMA_StatusTransitions/resolved_to_closed
=== RUN   TestHandleUpdateRMA_StatusTransitions/open_to_closed
=== RUN   TestHandleUpdateRMA_StatusTransitions/received_to_scrapped
--- PASS: TestHandleUpdateRMA_StatusTransitions (0.00s)
    --- PASS: TestHandleUpdateRMA_StatusTransitions/open_to_received (0.00s)
    --- PASS: TestHandleUpdateRMA_StatusTransitions/received_to_diagnosing (0.00s)
    --- PASS: TestHandleUpdateRMA_StatusTransitions/diagnosing_to_repairing (0.00s)
    --- PASS: TestHandleUpdateRMA_StatusTransitions/repairing_to_resolved (0.00s)
    --- PASS: TestHandleUpdateRMA_StatusTransitions/resolved_to_closed (0.00s)
    --- PASS: TestHandleUpdateRMA_StatusTransitions/open_to_closed (0.00s)
    --- PASS: TestHandleUpdateRMA_StatusTransitions/received_to_scrapped (0.00s)
=== RUN   TestHandleUpdateRMA_ReceivedAtTimestamp
    handler_rma_test.go:752: Warning: Timestamp 2026-02-20 14:41:09 +0000 UTC seems unexpected (now=2026-02-20 14:41:09.434398 -0800 PST m=+7.073371917), but may be due to timezone handling
--- PASS: TestHandleUpdateRMA_ReceivedAtTimestamp (0.00s)
=== RUN   TestHandleUpdateRMA_ResolvedAtTimestamp
    handler_rma_test.go:790: resolved_at timestamp: 2026-02-20T14:41:09Z
--- PASS: TestHandleUpdateRMA_ResolvedAtTimestamp (0.00s)
=== RUN   TestHandleUpdateRMA_ShippedTimestamp_BUG
    handler_rma_test.go:799: BUG: 'shipped' status is referenced in code but not in validRMAStatuses - this test documents the issue
--- SKIP: TestHandleUpdateRMA_ShippedTimestamp_BUG (0.00s)
=== RUN   TestHandleUpdateRMA_InvalidJSON
--- PASS: TestHandleUpdateRMA_InvalidJSON (0.00s)
=== RUN   TestHandleUpdateRMA_MaxLengthValidation
=== RUN   TestHandleUpdateRMA_MaxLengthValidation/serial_number_too_long
=== RUN   TestHandleUpdateRMA_MaxLengthValidation/customer_too_long
=== RUN   TestHandleUpdateRMA_MaxLengthValidation/valid_update
--- PASS: TestHandleUpdateRMA_MaxLengthValidation (0.00s)
    --- PASS: TestHandleUpdateRMA_MaxLengthValidation/serial_number_too_long (0.00s)
    --- PASS: TestHandleUpdateRMA_MaxLengthValidation/customer_too_long (0.00s)
    --- PASS: TestHandleUpdateRMA_MaxLengthValidation/valid_update (0.00s)
=== RUN   TestHandleCreateRMA_EmptyFields
--- PASS: TestHandleCreateRMA_EmptyFields (0.00s)
=== RUN   TestHandleCreateRMA_XSS_Prevention
--- PASS: TestHandleCreateRMA_XSS_Prevention (0.00s)
=== RUN   TestHandleCreateRMA_SQLInjection_Prevention
=== RUN   TestHandleCreateRMA_SQLInjection_Prevention/payload_';_DROP_TABLE_rmas;_--
=== RUN   TestHandleCreateRMA_SQLInjection_Prevention/payload_'_OR_'1'='1
=== RUN   TestHandleCreateRMA_SQLInjection_Prevention/payload_';_UPDATE_rmas_SET_status='closed';_--
=== RUN   TestHandleCreateRMA_SQLInjection_Prevention/payload_1'_UNION_SELECT_*_FROM_audit_log--
--- PASS: TestHandleCreateRMA_SQLInjection_Prevention (0.00s)
    --- PASS: TestHandleCreateRMA_SQLInjection_Prevention/payload_';_DROP_TABLE_rmas;_-- (0.00s)
    --- PASS: TestHandleCreateRMA_SQLInjection_Prevention/payload_'_OR_'1'='1 (0.00s)
    --- PASS: TestHandleCreateRMA_SQLInjection_Prevention/payload_';_UPDATE_rmas_SET_status='closed';_-- (0.00s)
    --- PASS: TestHandleCreateRMA_SQLInjection_Prevention/payload_1'_UNION_SELECT_*_FROM_audit_log-- (0.00s)
=== RUN   TestHandleListRMAs_NullFields
--- PASS: TestHandleListRMAs_NullFields (0.00s)
=== RUN   TestHandleUpdateRMA_PreserveExistingTimestamps
--- PASS: TestHandleUpdateRMA_PreserveExistingTimestamps (0.00s)
=== RUN   TestHandleCreateRMA_AllValidStatuses
=== RUN   TestHandleCreateRMA_AllValidStatuses/status_open
=== RUN   TestHandleCreateRMA_AllValidStatuses/status_received
=== RUN   TestHandleCreateRMA_AllValidStatuses/status_diagnosing
=== RUN   TestHandleCreateRMA_AllValidStatuses/status_repairing
=== RUN   TestHandleCreateRMA_AllValidStatuses/status_resolved
=== RUN   TestHandleCreateRMA_AllValidStatuses/status_closed
=== RUN   TestHandleCreateRMA_AllValidStatuses/status_scrapped
--- PASS: TestHandleCreateRMA_AllValidStatuses (0.00s)
    --- PASS: TestHandleCreateRMA_AllValidStatuses/status_open (0.00s)
    --- PASS: TestHandleCreateRMA_AllValidStatuses/status_received (0.00s)
    --- PASS: TestHandleCreateRMA_AllValidStatuses/status_diagnosing (0.00s)
    --- PASS: TestHandleCreateRMA_AllValidStatuses/status_repairing (0.00s)
    --- PASS: TestHandleCreateRMA_AllValidStatuses/status_resolved (0.00s)
    --- PASS: TestHandleCreateRMA_AllValidStatuses/status_closed (0.00s)
    --- PASS: TestHandleCreateRMA_AllValidStatuses/status_scrapped (0.00s)
=== RUN   TestHandleUpdateRMA_CompleteWorkflow
--- PASS: TestHandleUpdateRMA_CompleteWorkflow (0.00s)
=== RUN   TestHandleCreateRMA_MinimalData
--- PASS: TestHandleCreateRMA_MinimalData (0.00s)
=== RUN   TestHandleGetRMA_WithAllFields
--- PASS: TestHandleGetRMA_WithAllFields (0.00s)
=== RUN   TestHandleCreateRMA_IDGeneration
--- PASS: TestHandleCreateRMA_IDGeneration (0.00s)
=== RUN   TestSalesOrderCRUD
--- PASS: TestSalesOrderCRUD (0.05s)
=== RUN   TestSalesOrderStatusFilter
--- PASS: TestSalesOrderStatusFilter (0.05s)
=== RUN   TestConvertQuoteToOrder
    handler_sales_orders_test.go:135: create quote: 500 {"error":"SQL logic error: table quotes has no column named valid_until (1)"}
--- FAIL: TestConvertQuoteToOrder (0.05s)
=== RUN   TestConvertDraftQuoteFails
    handler_sales_orders_test.go:189: expected 400, got 404
--- FAIL: TestConvertDraftQuoteFails (0.05s)
=== RUN   TestSalesOrderWorkflow
    handler_sales_orders_test.go:267: expected shipment_id
--- FAIL: TestSalesOrderWorkflow (0.05s)
=== RUN   TestAllocateInsufficientInventory
--- PASS: TestAllocateInsufficientInventory (0.05s)
=== RUN   TestSalesOrderInvalidTransition
--- PASS: TestSalesOrderInvalidTransition (0.05s)
=== RUN   TestHandleScanLookup_EmptyCode
--- PASS: TestHandleScanLookup_EmptyCode (0.00s)
=== RUN   TestHandleScanLookup_InventoryMatch
=== RUN   TestHandleScanLookup_InventoryMatch/Exact_inventory_match
=== RUN   TestHandleScanLookup_InventoryMatch/Partial_inventory_match
=== RUN   TestHandleScanLookup_InventoryMatch/Case_insensitive_match
--- PASS: TestHandleScanLookup_InventoryMatch (0.00s)
    --- PASS: TestHandleScanLookup_InventoryMatch/Exact_inventory_match (0.00s)
    --- PASS: TestHandleScanLookup_InventoryMatch/Partial_inventory_match (0.00s)
    --- PASS: TestHandleScanLookup_InventoryMatch/Case_insensitive_match (0.00s)
=== RUN   TestHandleScanLookup_DeviceMatch
=== RUN   TestHandleScanLookup_DeviceMatch/Exact_device_serial_match
=== RUN   TestHandleScanLookup_DeviceMatch/Partial_device_serial_match
=== RUN   TestHandleScanLookup_DeviceMatch/Case_insensitive_device_match
--- PASS: TestHandleScanLookup_DeviceMatch (0.00s)
    --- PASS: TestHandleScanLookup_DeviceMatch/Exact_device_serial_match (0.00s)
    --- PASS: TestHandleScanLookup_DeviceMatch/Partial_device_serial_match (0.00s)
    --- PASS: TestHandleScanLookup_DeviceMatch/Case_insensitive_device_match (0.00s)
=== RUN   TestHandleScanLookup_NoMatch
--- PASS: TestHandleScanLookup_NoMatch (0.00s)
=== RUN   TestHandleScanLookup_MultipleMatches
--- PASS: TestHandleScanLookup_MultipleMatches (0.00s)
=== RUN   TestHandleScanLookup_SQLInjection
=== RUN   TestHandleScanLookup_SQLInjection/SQL_Injection_';_DROP_TABLE_inventory;_--
=== RUN   TestHandleScanLookup_SQLInjection/SQL_Injection_'_OR_'1'='1
=== RUN   TestHandleScanLookup_SQLInjection/SQL_Injection_1'_UNION_SELECT_*_FROM_devices_--
=== RUN   TestHandleScanLookup_SQLInjection/SQL_Injection_';_DELETE_FROM_devices;_--
=== RUN   TestHandleScanLookup_SQLInjection/SQL_Injection_SN12345';_UPDATE_devices_SET_status='hacked'_WHERE_'1'='1
--- PASS: TestHandleScanLookup_SQLInjection (0.00s)
    --- PASS: TestHandleScanLookup_SQLInjection/SQL_Injection_';_DROP_TABLE_inventory;_-- (0.00s)
    --- PASS: TestHandleScanLookup_SQLInjection/SQL_Injection_'_OR_'1'='1 (0.00s)
    --- PASS: TestHandleScanLookup_SQLInjection/SQL_Injection_1'_UNION_SELECT_*_FROM_devices_-- (0.00s)
    --- PASS: TestHandleScanLookup_SQLInjection/SQL_Injection_';_DELETE_FROM_devices;_-- (0.00s)
    --- PASS: TestHandleScanLookup_SQLInjection/SQL_Injection_SN12345';_UPDATE_devices_SET_status='hacked'_WHERE_'1'='1 (0.00s)
=== RUN   TestHandleScanLookup_MalformedBarcodes
=== RUN   TestHandleScanLookup_MalformedBarcodes/Malformed_0
=== RUN   TestHandleScanLookup_MalformedBarcodes/Malformed_1
=== RUN   TestHandleScanLookup_MalformedBarcodes/Malformed_2
=== RUN   TestHandleScanLookup_MalformedBarcodes/Malformed_3
=== RUN   TestHandleScanLookup_MalformedBarcodes/Malformed_4
=== RUN   TestHandleScanLookup_MalformedBarcodes/Malformed_5
=== RUN   TestHandleScanLookup_MalformedBarcodes/Malformed_6
--- PASS: TestHandleScanLookup_MalformedBarcodes (0.00s)
    --- PASS: TestHandleScanLookup_MalformedBarcodes/Malformed_0 (0.00s)
    --- PASS: TestHandleScanLookup_MalformedBarcodes/Malformed_1 (0.00s)
    --- PASS: TestHandleScanLookup_MalformedBarcodes/Malformed_2 (0.00s)
    --- PASS: TestHandleScanLookup_MalformedBarcodes/Malformed_3 (0.00s)
    --- PASS: TestHandleScanLookup_MalformedBarcodes/Malformed_4 (0.00s)
    --- PASS: TestHandleScanLookup_MalformedBarcodes/Malformed_5 (0.00s)
    --- PASS: TestHandleScanLookup_MalformedBarcodes/Malformed_6 (0.00s)
=== RUN   TestHandleScanLookup_XSSInResults
--- PASS: TestHandleScanLookup_XSSInResults (0.00s)
=== RUN   TestHandleScanLookup_ResultStructure
--- PASS: TestHandleScanLookup_ResultStructure (0.00s)
=== RUN   TestHandleScanLookup_DeduplicationInventory
--- PASS: TestHandleScanLookup_DeduplicationInventory (0.00s)
=== RUN   TestHandleScanLookup_ContentTypeJSON
--- PASS: TestHandleScanLookup_ContentTypeJSON (0.00s)
=== RUN   TestHandleScanLookup_EmptyResultsArray
--- PASS: TestHandleScanLookup_EmptyResultsArray (0.00s)
=== RUN   TestHandleGlobalSearch_EmptyQuery
--- PASS: TestHandleGlobalSearch_EmptyQuery (0.00s)
=== RUN   TestHandleGlobalSearch_BasicSearch
=== RUN   TestHandleGlobalSearch_BasicSearch/Search_by_ECO_ID
=== RUN   TestHandleGlobalSearch_BasicSearch/Search_by_Work_Order_ID
=== RUN   TestHandleGlobalSearch_BasicSearch/Search_by_Device_Serial
=== RUN   TestHandleGlobalSearch_BasicSearch/Search_by_Customer
=== RUN   TestHandleGlobalSearch_BasicSearch/Search_by_description_content
--- PASS: TestHandleGlobalSearch_BasicSearch (0.00s)
    --- PASS: TestHandleGlobalSearch_BasicSearch/Search_by_ECO_ID (0.00s)
    --- PASS: TestHandleGlobalSearch_BasicSearch/Search_by_Work_Order_ID (0.00s)
    --- PASS: TestHandleGlobalSearch_BasicSearch/Search_by_Device_Serial (0.00s)
    --- PASS: TestHandleGlobalSearch_BasicSearch/Search_by_Customer (0.00s)
    --- PASS: TestHandleGlobalSearch_BasicSearch/Search_by_description_content (0.00s)
=== RUN   TestHandleGlobalSearch_Limit
=== RUN   TestHandleGlobalSearch_Limit/Default_limit_(20)
=== RUN   TestHandleGlobalSearch_Limit/Custom_limit_(5)
=== RUN   TestHandleGlobalSearch_Limit/Large_limit_(100)
--- PASS: TestHandleGlobalSearch_Limit (0.00s)
    --- PASS: TestHandleGlobalSearch_Limit/Default_limit_(20) (0.00s)
    --- PASS: TestHandleGlobalSearch_Limit/Custom_limit_(5) (0.00s)
    --- PASS: TestHandleGlobalSearch_Limit/Large_limit_(100) (0.00s)
=== RUN   TestHandleGlobalSearch_SQLInjection
=== RUN   TestHandleGlobalSearch_SQLInjection/SQL_Injection_';_DROP_TABLE_ecos;_--
=== RUN   TestHandleGlobalSearch_SQLInjection/SQL_Injection_'_OR_'1'='1
=== RUN   TestHandleGlobalSearch_SQLInjection/SQL_Injection_1'_UNION_SELECT_*_FROM_users_--
=== RUN   TestHandleGlobalSearch_SQLInjection/SQL_Injection_<script>alert('xss')</script>
=== RUN   TestHandleGlobalSearch_SQLInjection/SQL_Injection_';_DELETE_FROM_work_orders;_--
--- PASS: TestHandleGlobalSearch_SQLInjection (0.00s)
    --- PASS: TestHandleGlobalSearch_SQLInjection/SQL_Injection_';_DROP_TABLE_ecos;_-- (0.00s)
    --- PASS: TestHandleGlobalSearch_SQLInjection/SQL_Injection_'_OR_'1'='1 (0.00s)
    --- PASS: TestHandleGlobalSearch_SQLInjection/SQL_Injection_1'_UNION_SELECT_*_FROM_users_-- (0.00s)
    --- PASS: TestHandleGlobalSearch_SQLInjection/SQL_Injection_<script>alert('xss')</script> (0.00s)
    --- PASS: TestHandleGlobalSearch_SQLInjection/SQL_Injection_';_DELETE_FROM_work_orders;_-- (0.00s)
=== RUN   TestHandleGlobalSearch_CaseInsensitive
=== RUN   TestHandleGlobalSearch_CaseInsensitive/Lowercase
=== RUN   TestHandleGlobalSearch_CaseInsensitive/Uppercase
=== RUN   TestHandleGlobalSearch_CaseInsensitive/Mixed_case
--- PASS: TestHandleGlobalSearch_CaseInsensitive (0.00s)
    --- PASS: TestHandleGlobalSearch_CaseInsensitive/Lowercase (0.00s)
    --- PASS: TestHandleGlobalSearch_CaseInsensitive/Uppercase (0.00s)
    --- PASS: TestHandleGlobalSearch_CaseInsensitive/Mixed_case (0.00s)
=== RUN   TestHandleGlobalSearch_PartialMatch
=== RUN   TestHandleGlobalSearch_PartialMatch/Partial_ECO_ID
=== RUN   TestHandleGlobalSearch_PartialMatch/Partial_Work_Order
=== RUN   TestHandleGlobalSearch_PartialMatch/Partial_Device_Serial
=== RUN   TestHandleGlobalSearch_PartialMatch/Partial_Customer
=== RUN   TestHandleGlobalSearch_PartialMatch/No_match
--- PASS: TestHandleGlobalSearch_PartialMatch (0.00s)
    --- PASS: TestHandleGlobalSearch_PartialMatch/Partial_ECO_ID (0.00s)
    --- PASS: TestHandleGlobalSearch_PartialMatch/Partial_Work_Order (0.00s)
    --- PASS: TestHandleGlobalSearch_PartialMatch/Partial_Device_Serial (0.00s)
    --- PASS: TestHandleGlobalSearch_PartialMatch/Partial_Customer (0.00s)
    --- PASS: TestHandleGlobalSearch_PartialMatch/No_match (0.00s)
=== RUN   TestHandleGlobalSearch_MetadataResponse
--- PASS: TestHandleGlobalSearch_MetadataResponse (0.00s)
=== RUN   TestHandleGlobalSearch_XSSInResults
--- PASS: TestHandleGlobalSearch_XSSInResults (0.00s)
=== RUN   TestSerialNumberAutoGeneration
--- PASS: TestSerialNumberAutoGeneration (0.00s)
=== RUN   TestSerialNumberFormat
--- PASS: TestSerialNumberFormat (0.00s)
=== RUN   TestSerialTraceability
--- PASS: TestSerialTraceability (0.00s)
=== RUN   TestReverseSerialTraceability
--- PASS: TestReverseSerialTraceability (0.00s)
=== RUN   TestDuplicateSerialNumberRejection
--- PASS: TestDuplicateSerialNumberRejection (0.00s)
=== RUN   TestSerialStatusTransitions
--- PASS: TestSerialStatusTransitions (0.00s)
=== RUN   TestSerialWorkOrderCascadeDelete
--- PASS: TestSerialWorkOrderCascadeDelete (0.00s)
=== RUN   TestSerialNumberUniqueness
--- PASS: TestSerialNumberUniqueness (0.00s)
=== RUN   TestWorkOrderCompletionWithSerials
--- PASS: TestWorkOrderCompletionWithSerials (0.00s)
=== RUN   TestSerialSearchAndLookup
--- PASS: TestSerialSearchAndLookup (0.00s)
=== RUN   TestHandleListShipments
=== RUN   TestHandleListShipments/empty_list
    handler_shipments_granular_test.go:204: Failed to decode response: json: cannot unmarshal object into Go value of type []main.Shipment
=== RUN   TestHandleListShipments/multiple_shipments
    handler_shipments_granular_test.go:204: Failed to decode response: json: cannot unmarshal object into Go value of type []main.Shipment
--- FAIL: TestHandleListShipments (0.00s)
    --- FAIL: TestHandleListShipments/empty_list (0.00s)
    --- FAIL: TestHandleListShipments/multiple_shipments (0.00s)
=== RUN   TestHandleGetShipment
    handler_shipments_granular_test.go:238: Expected ID SHP-0001, got 
    handler_shipments_granular_test.go:241: Expected type outbound, got 
    handler_shipments_granular_test.go:244: Expected 2 lines, got 0
--- FAIL: TestHandleGetShipment (0.00s)
=== RUN   TestHandleGetShipment_NotFound
--- PASS: TestHandleGetShipment_NotFound (0.00s)
=== RUN   TestHandleCreateShipment
=== RUN   TestHandleCreateShipment/valid_outbound_shipment
    handler_shipments_granular_test.go:381: Expected non-empty ID
    handler_shipments_granular_test.go:384: Expected ID to start with SHP-, got 
    handler_shipments_granular_test.go:387: Expected type outbound, got 
    handler_shipments_granular_test.go:390: Expected status draft, got 
    handler_shipments_granular_test.go:398: Expected 2 lines, got 0
=== RUN   TestHandleCreateShipment/defaults_applied
    handler_shipments_granular_test.go:381: Expected non-empty ID
    handler_shipments_granular_test.go:384: Expected ID to start with SHP-, got 
    handler_shipments_granular_test.go:387: Expected type outbound, got 
    handler_shipments_granular_test.go:390: Expected status draft, got 
=== RUN   TestHandleCreateShipment/inbound_shipment
    handler_shipments_granular_test.go:381: Expected non-empty ID
    handler_shipments_granular_test.go:384: Expected ID to start with SHP-, got 
    handler_shipments_granular_test.go:387: Expected type inbound, got 
    handler_shipments_granular_test.go:390: Expected status draft, got 
=== RUN   TestHandleCreateShipment/with_tracking_info
    handler_shipments_granular_test.go:381: Expected non-empty ID
    handler_shipments_granular_test.go:384: Expected ID to start with SHP-, got 
    handler_shipments_granular_test.go:387: Expected type outbound, got 
    handler_shipments_granular_test.go:390: Expected status draft, got 
=== RUN   TestHandleCreateShipment/invalid_type
=== RUN   TestHandleCreateShipment/invalid_status
=== RUN   TestHandleCreateShipment/invalid_qty_-_zero
=== RUN   TestHandleCreateShipment/invalid_qty_-_negative
--- FAIL: TestHandleCreateShipment (0.00s)
    --- FAIL: TestHandleCreateShipment/valid_outbound_shipment (0.00s)
    --- FAIL: TestHandleCreateShipment/defaults_applied (0.00s)
    --- FAIL: TestHandleCreateShipment/inbound_shipment (0.00s)
    --- FAIL: TestHandleCreateShipment/with_tracking_info (0.00s)
    --- PASS: TestHandleCreateShipment/invalid_type (0.00s)
    --- PASS: TestHandleCreateShipment/invalid_status (0.00s)
    --- PASS: TestHandleCreateShipment/invalid_qty_-_zero (0.00s)
    --- PASS: TestHandleCreateShipment/invalid_qty_-_negative (0.00s)
=== RUN   TestHandleUpdateShipment
    handler_shipments_granular_test.go:443: Expected status packed, got 
    handler_shipments_granular_test.go:446: Expected tracking TRACK123, got 
    handler_shipments_granular_test.go:449: Expected 2 lines after update, got 0
--- FAIL: TestHandleUpdateShipment (0.00s)
=== RUN   TestHandleShipShipment
=== RUN   TestHandleShipShipment/ship_from_draft
    handler_shipments_granular_test.go:525: Expected status shipped, got 
    handler_shipments_granular_test.go:528: Expected tracking TRACK123, got 
    handler_shipments_granular_test.go:531: Expected carrier FedEx, got 
    handler_shipments_granular_test.go:534: Expected ship_date to be set
=== RUN   TestHandleShipShipment/ship_from_packed
    handler_shipments_granular_test.go:525: Expected status shipped, got 
    handler_shipments_granular_test.go:528: Expected tracking TRACK456, got 
    handler_shipments_granular_test.go:531: Expected carrier UPS, got 
    handler_shipments_granular_test.go:534: Expected ship_date to be set
=== RUN   TestHandleShipShipment/already_shipped
=== RUN   TestHandleShipShipment/already_delivered
--- FAIL: TestHandleShipShipment (0.00s)
    --- FAIL: TestHandleShipShipment/ship_from_draft (0.00s)
    --- FAIL: TestHandleShipShipment/ship_from_packed (0.00s)
    --- PASS: TestHandleShipShipment/already_shipped (0.00s)
    --- PASS: TestHandleShipShipment/already_delivered (0.00s)
=== RUN   TestHandleShipShipment_NotFound
--- PASS: TestHandleShipShipment_NotFound (0.00s)
=== RUN   TestHandleDeliverShipment
=== RUN   TestHandleDeliverShipment/deliver_outbound
    handler_shipments_granular_test.go:622: Expected status delivered, got 
    handler_shipments_granular_test.go:625: Expected delivery_date to be set
=== RUN   TestHandleDeliverShipment/deliver_inbound
    handler_shipments_granular_test.go:622: Expected status delivered, got 
    handler_shipments_granular_test.go:625: Expected delivery_date to be set
=== RUN   TestHandleDeliverShipment/already_delivered
=== RUN   TestHandleDeliverShipment/deliver_from_draft_(allowed)
    handler_shipments_granular_test.go:622: Expected status delivered, got 
    handler_shipments_granular_test.go:625: Expected delivery_date to be set
--- FAIL: TestHandleDeliverShipment (0.00s)
    --- FAIL: TestHandleDeliverShipment/deliver_outbound (0.00s)
    --- FAIL: TestHandleDeliverShipment/deliver_inbound (0.00s)
    --- PASS: TestHandleDeliverShipment/already_delivered (0.00s)
    --- FAIL: TestHandleDeliverShipment/deliver_from_draft_(allowed) (0.00s)
=== RUN   TestHandleDeliverShipment_InboundInventoryUpdate
--- PASS: TestHandleDeliverShipment_InboundInventoryUpdate (0.00s)
=== RUN   TestHandleDeliverShipment_OutboundNoInventoryChange
--- PASS: TestHandleDeliverShipment_OutboundNoInventoryChange (0.00s)
=== RUN   TestHandleShipmentPackList
    handler_shipments_granular_test.go:735: Expected shipment_id SHP-0001, got 
    handler_shipments_granular_test.go:738: Expected 2 lines, got 0
--- FAIL: TestHandleShipmentPackList (0.00s)
=== RUN   TestHandleShipmentPackList_NotFound
--- PASS: TestHandleShipmentPackList_NotFound (0.00s)
=== RUN   TestShipment_TypeValidation
=== RUN   TestShipment_TypeValidation/valid_type_inbound
=== RUN   TestShipment_TypeValidation/valid_type_outbound
=== RUN   TestShipment_TypeValidation/valid_type_transfer
--- PASS: TestShipment_TypeValidation (0.00s)
    --- PASS: TestShipment_TypeValidation/valid_type_inbound (0.00s)
    --- PASS: TestShipment_TypeValidation/valid_type_outbound (0.00s)
    --- PASS: TestShipment_TypeValidation/valid_type_transfer (0.00s)
=== RUN   TestShipment_StatusValidation
=== RUN   TestShipment_StatusValidation/valid_status_draft
=== RUN   TestShipment_StatusValidation/valid_status_packed
=== RUN   TestShipment_StatusValidation/valid_status_shipped
=== RUN   TestShipment_StatusValidation/valid_status_delivered
=== RUN   TestShipment_StatusValidation/valid_status_cancelled
--- PASS: TestShipment_StatusValidation (0.00s)
    --- PASS: TestShipment_StatusValidation/valid_status_draft (0.00s)
    --- PASS: TestShipment_StatusValidation/valid_status_packed (0.00s)
    --- PASS: TestShipment_StatusValidation/valid_status_shipped (0.00s)
    --- PASS: TestShipment_StatusValidation/valid_status_delivered (0.00s)
    --- PASS: TestShipment_StatusValidation/valid_status_cancelled (0.00s)
=== RUN   TestShipment_CarrierData
=== RUN   TestShipment_CarrierData/carrier_FedEx
    handler_shipments_granular_test.go:857: Expected carrier FedEx, got 
=== RUN   TestShipment_CarrierData/carrier_UPS
    handler_shipments_granular_test.go:857: Expected carrier UPS, got 
=== RUN   TestShipment_CarrierData/carrier_USPS
    handler_shipments_granular_test.go:857: Expected carrier USPS, got 
=== RUN   TestShipment_CarrierData/carrier_DHL
    handler_shipments_granular_test.go:857: Expected carrier DHL, got 
=== RUN   TestShipment_CarrierData/carrier_OnTrac
    handler_shipments_granular_test.go:857: Expected carrier OnTrac, got 
=== RUN   TestShipment_CarrierData/carrier_Custom_Carrier
    handler_shipments_granular_test.go:857: Expected carrier Custom Carrier, got 
--- FAIL: TestShipment_CarrierData (0.00s)
    --- FAIL: TestShipment_CarrierData/carrier_FedEx (0.00s)
    --- FAIL: TestShipment_CarrierData/carrier_UPS (0.00s)
    --- FAIL: TestShipment_CarrierData/carrier_USPS (0.00s)
    --- FAIL: TestShipment_CarrierData/carrier_DHL (0.00s)
    --- FAIL: TestShipment_CarrierData/carrier_OnTrac (0.00s)
    --- FAIL: TestShipment_CarrierData/carrier_Custom_Carrier (0.00s)
=== RUN   TestShipment_SerialNumberTracking
    handler_shipments_granular_test.go:894: Expected 2 lines, got 0
--- FAIL: TestShipment_SerialNumberTracking (0.00s)
=== RUN   TestShipment_WorkOrderRMALinks
    handler_shipments_granular_test.go:947: Expected work order link to be preserved
    handler_shipments_granular_test.go:950: Expected RMA link to be preserved
--- FAIL: TestShipment_WorkOrderRMALinks (0.00s)
=== RUN   TestShipment_AuditLogging
--- PASS: TestShipment_AuditLogging (0.00s)
=== RUN   TestShipment_CascadeDelete
--- PASS: TestShipment_CascadeDelete (0.00s)
=== RUN   TestShipment_ConcurrentOperations
    handler_shipments_granular_test.go:1052: Expected final status shipped, got 
--- FAIL: TestShipment_ConcurrentOperations (0.00s)
=== RUN   TestShipmentCRUD
    handler_shipments_test.go:21: create shipment: 500 {"error":"SQL logic error: no such table: shipments (1)"}
--- FAIL: TestShipmentCRUD (0.05s)
=== RUN   TestShipShipment
    handler_shipments_test.go:88: create shipment: 500 {"error":"SQL logic error: no such table: shipments (1)"}
--- FAIL: TestShipShipment (0.05s)
=== RUN   TestDeliverShipment
    handler_shipments_test.go:143: create shipment: 500 {"error":"SQL logic error: no such table: shipments (1)"}
--- FAIL: TestDeliverShipment (0.05s)
=== RUN   TestShipmentPackList
    handler_shipments_test.go:196: create shipment: 500 {"error":"SQL logic error: no such table: shipments (1)"}
--- FAIL: TestShipmentPackList (0.05s)
=== RUN   TestShipmentNotFound
--- PASS: TestShipmentNotFound (0.05s)
=== RUN   TestShipmentWithWorkOrderAndRMA
    handler_shipments_test.go:267: create: 500 {"error":"SQL logic error: no such table: shipments (1)"}
--- FAIL: TestShipmentWithWorkOrderAndRMA (0.05s)
=== RUN   TestShipmentListHTTP
    handler_shipments_test.go:295: list: 500
--- FAIL: TestShipmentListHTTP (0.00s)
=== RUN   TestHandleListTests_Empty
    handler_testing_test.go:135: âœ“ List tests returns empty array when no tests exist
--- PASS: TestHandleListTests_Empty (0.00s)
=== RUN   TestHandleListTests_WithData
    handler_testing_test.go:196: âœ“ List tests returns all test records in DESC order
--- PASS: TestHandleListTests_WithData (0.00s)
=== RUN   TestHandleCreateTest_Success
    handler_testing_test.go:246: âœ“ Create test successful with ID: 1
--- PASS: TestHandleCreateTest_Success (0.00s)
=== RUN   TestHandleCreateTest_InvalidJSON
    handler_testing_test.go:269: âœ“ Create test rejects invalid JSON
--- PASS: TestHandleCreateTest_InvalidJSON (0.00s)
=== RUN   TestSnapshotEntity_ECO
--- PASS: TestSnapshotEntity_ECO (0.00s)
=== RUN   TestSnapshotEntity_UnsupportedType
--- PASS: TestSnapshotEntity_UnsupportedType (0.00s)
=== RUN   TestCreateUndoEntry_Success
--- PASS: TestCreateUndoEntry_Success (0.00s)
=== RUN   TestHandleListUndo_Success
--- PASS: TestHandleListUndo_Success (0.00s)
=== RUN   TestRestoreECO_Success
--- PASS: TestRestoreECO_Success (0.00s)
=== RUN   TestGetRowAsMap_Success
--- PASS: TestGetRowAsMap_Success (0.00s)
=== RUN   TestUndoEntry_24HourExpiration
    handler_undo_test.go:157: Expected ~24 hour expiration, got -2562047h47m16.854775808s
--- FAIL: TestUndoEntry_24HourExpiration (0.00s)
=== RUN   TestHandleListUsers_AsAdmin
--- PASS: TestHandleListUsers_AsAdmin (0.15s)
=== RUN   TestHandleListUsers_AsNonAdmin
--- PASS: TestHandleListUsers_AsNonAdmin (0.05s)
=== RUN   TestHandleListUsers_Unauthorized
--- PASS: TestHandleListUsers_Unauthorized (0.00s)
=== RUN   TestHandleCreateUser_Success
    handler_users_test.go:208: Expected status 201, got 400: {"error":"password must be at least 12 characters"}
    handler_users_test.go:218: Expected user ID in response
    handler_users_test.go:225: Expected user to be created: sql: no rows in result set
--- FAIL: TestHandleCreateUser_Success (0.05s)
=== RUN   TestHandleCreateUser_MissingUsername
--- PASS: TestHandleCreateUser_MissingUsername (0.05s)
=== RUN   TestHandleCreateUser_MissingPassword
--- PASS: TestHandleCreateUser_MissingPassword (0.05s)
=== RUN   TestHandleCreateUser_DefaultRole
    handler_users_test.go:301: Expected default role 'user', got 
--- FAIL: TestHandleCreateUser_DefaultRole (0.05s)
=== RUN   TestHandleUpdateUser_Success
--- PASS: TestHandleUpdateUser_Success (0.10s)
=== RUN   TestHandleUpdateUser_Deactivate
--- PASS: TestHandleUpdateUser_Deactivate (0.10s)
=== RUN   TestHandleUpdateUser_NotFound
--- PASS: TestHandleUpdateUser_NotFound (0.05s)
=== RUN   TestHandleDeleteUser_Success
--- PASS: TestHandleDeleteUser_Success (0.10s)
=== RUN   TestHandleDeleteUser_NotFound
--- PASS: TestHandleDeleteUser_NotFound (0.05s)
=== RUN   TestHandleResetPassword_Success
--- PASS: TestHandleResetPassword_Success (0.20s)
=== RUN   TestHandleResetPassword_MissingPassword
--- PASS: TestHandleResetPassword_MissingPassword (0.10s)
=== RUN   TestHandleResetPassword_NotFound
--- PASS: TestHandleResetPassword_NotFound (0.10s)
=== RUN   TestHandleListVendors
--- PASS: TestHandleListVendors (0.00s)
=== RUN   TestHandleListVendors_Empty
--- PASS: TestHandleListVendors_Empty (0.00s)
=== RUN   TestHandleGetVendor
--- PASS: TestHandleGetVendor (0.00s)
=== RUN   TestHandleGetVendor_NotFound
--- PASS: TestHandleGetVendor_NotFound (0.00s)
=== RUN   TestHandleCreateVendor
--- PASS: TestHandleCreateVendor (0.00s)
=== RUN   TestHandleCreateVendor_DefaultStatus
--- PASS: TestHandleCreateVendor_DefaultStatus (0.00s)
=== RUN   TestHandleCreateVendor_AutoIncrementID
--- PASS: TestHandleCreateVendor_AutoIncrementID (0.00s)
=== RUN   TestHandleCreateVendor_MissingName
--- PASS: TestHandleCreateVendor_MissingName (0.00s)
=== RUN   TestHandleCreateVendor_InvalidEmail
--- PASS: TestHandleCreateVendor_InvalidEmail (0.00s)
=== RUN   TestHandleCreateVendor_NegativeLeadTime
--- PASS: TestHandleCreateVendor_NegativeLeadTime (0.00s)
=== RUN   TestHandleCreateVendor_InvalidJSON
--- PASS: TestHandleCreateVendor_InvalidJSON (0.00s)
=== RUN   TestHandleUpdateVendor
--- PASS: TestHandleUpdateVendor (0.00s)
=== RUN   TestHandleDeleteVendor
--- PASS: TestHandleDeleteVendor (0.00s)
=== RUN   TestHandleDeleteVendor_WithPurchaseOrders
--- PASS: TestHandleDeleteVendor_WithPurchaseOrders (0.00s)
=== RUN   TestHandleDeleteVendor_WithRFQs
--- PASS: TestHandleDeleteVendor_WithRFQs (0.00s)
=== RUN   TestHandleGetDashboardWidgets_Empty
--- PASS: TestHandleGetDashboardWidgets_Empty (0.00s)
=== RUN   TestHandleGetDashboardWidgets_WithData
--- PASS: TestHandleGetDashboardWidgets_WithData (0.00s)
=== RUN   TestHandleGetDashboardWidgets_Ordering
--- PASS: TestHandleGetDashboardWidgets_Ordering (0.00s)
=== RUN   TestHandleUpdateDashboardWidgets_Success
--- PASS: TestHandleUpdateDashboardWidgets_Success (0.00s)
=== RUN   TestHandleUpdateDashboardWidgets_PartialUpdate
--- PASS: TestHandleUpdateDashboardWidgets_PartialUpdate (0.00s)
=== RUN   TestHandleUpdateDashboardWidgets_ToggleEnabled
=== RUN   TestHandleUpdateDashboardWidgets_ToggleEnabled/Disable_widget
=== RUN   TestHandleUpdateDashboardWidgets_ToggleEnabled/Enable_widget
=== RUN   TestHandleUpdateDashboardWidgets_ToggleEnabled/Disable_again
--- PASS: TestHandleUpdateDashboardWidgets_ToggleEnabled (0.00s)
    --- PASS: TestHandleUpdateDashboardWidgets_ToggleEnabled/Disable_widget (0.00s)
    --- PASS: TestHandleUpdateDashboardWidgets_ToggleEnabled/Enable_widget (0.00s)
    --- PASS: TestHandleUpdateDashboardWidgets_ToggleEnabled/Disable_again (0.00s)
=== RUN   TestHandleUpdateDashboardWidgets_EmptyUpdate
--- PASS: TestHandleUpdateDashboardWidgets_EmptyUpdate (0.00s)
=== RUN   TestHandleUpdateDashboardWidgets_InvalidJSON
--- PASS: TestHandleUpdateDashboardWidgets_InvalidJSON (0.00s)
=== RUN   TestWidgetPersistence
--- PASS: TestWidgetPersistence (0.00s)
=== RUN   TestValidWidgetTypes
--- PASS: TestValidWidgetTypes (0.00s)
=== RUN   TestUserIDFiltering
--- PASS: TestUserIDFiltering (0.00s)
=== RUN   TestLayoutReordering
--- PASS: TestLayoutReordering (0.00s)
=== RUN   TestMixedEnabledDisabled
--- PASS: TestMixedEnabledDisabled (0.00s)
=== RUN   TestWorkOrderKit
    handler_workorders_test.go:121: Expected wo_id WO001, got <nil>
    handler_workorders_test.go:125: Expected status kitted, got <nil>
--- FAIL: TestWorkOrderKit (0.00s)
=== RUN   TestWorkOrderSerials
--- PASS: TestWorkOrderSerials (0.00s)
=== RUN   TestWorkOrderStatusTransitions
--- PASS: TestWorkOrderStatusTransitions (0.00s)
=== RUN   TestWorkOrderCompletion
    handler_workorders_test.go:297: Expected 2.0 remaining on hand, got 6.000000
--- FAIL: TestWorkOrderCompletion (0.00s)
=== RUN   TestGenerateSerialNumber
--- PASS: TestGenerateSerialNumber (0.00s)
=== RUN   TestIntegration_PO_Receipt_Updates_Inventory
    integration_bom_po_test.go:202: === Integration Test: PO Receipt â†’ Inventory Update ===
    integration_bom_po_test.go:205: Step 1: Insert vendor into database
    integration_bom_po_test.go:216: Step 2: Create inventory records with low stock
    integration_bom_po_test.go:230:    Created inventory: RES-INT-001 with qty_on_hand=5
    integration_bom_po_test.go:230:    Created inventory: CAP-INT-001 with qty_on_hand=2
    integration_bom_po_test.go:234: Step 3: Create purchase order with shortage line items
    integration_bom_po_test.go:258:    Added PO line: RES-INT-001 qty=95
    integration_bom_po_test.go:258:    Added PO line: CAP-INT-001 qty=48
    integration_bom_po_test.go:262: Step 4: Record initial inventory levels
    integration_bom_po_test.go:277: Step 5: Mark PO as received
    integration_bom_po_test.go:290: Step 6: Verify if inventory was automatically updated
    integration_bom_po_test.go:301:    RES-INT-001: qty_on_hand = 5 (initial=5, expected=100)
    integration_bom_po_test.go:307:    âœ— WORKFLOW GAP DETECTED: Inventory NOT updated
    integration_bom_po_test.go:308:       Expected 100, got 5 (unchanged)
    integration_bom_po_test.go:301:    CAP-INT-001: qty_on_hand = 2 (initial=2, expected=50)
    integration_bom_po_test.go:307:    âœ— WORKFLOW GAP DETECTED: Inventory NOT updated
    integration_bom_po_test.go:308:       Expected 50, got 2 (unchanged)
    integration_bom_po_test.go:316: Step 7: Verify inventory transactions were created
    integration_bom_po_test.go:327:    âœ— NO inventory transactions created for PO receipt
    integration_bom_po_test.go:332: === Test Results ===
    integration_bom_po_test.go:334: âœ—âœ— CRITICAL WORKFLOW GAP CONFIRMED:
    integration_bom_po_test.go:335:    PO receiving does NOT automatically update inventory
    integration_bom_po_test.go:336:    This must be implemented for production use
    integration_bom_po_test.go:337: 
    integration_bom_po_test.go:338: Required implementation:
    integration_bom_po_test.go:339:    1. When PO is received, iterate through po_lines
    integration_bom_po_test.go:340:    2. For each line, UPDATE inventory SET qty_onhand = qty_onhand + line.qty
    integration_bom_po_test.go:341:    3. INSERT inventory_transactions record for audit trail
    integration_bom_po_test.go:346: === Integration Test Complete ===
--- FAIL: TestIntegration_PO_Receipt_Updates_Inventory (0.00s)
=== RUN   TestIntegration_WorkOrder_Completion_Updates_Inventory
    integration_bom_po_test.go:359: === Integration Test: WO Completion â†’ Inventory Update ===
    integration_bom_po_test.go:362: Step 1: Create component and assembly inventory
    integration_bom_po_test.go:382:    Created: RES-WO-001 with qty_on_hand=200
    integration_bom_po_test.go:383:    Created: ASY-WO-001 with qty_on_hand=0
    integration_bom_po_test.go:386: Step 2: Create work order for 10x ASY-WO-001
    integration_bom_po_test.go:397: Step 3: Mark work order as completed
    integration_bom_po_test.go:404:    âœ“ Work order status set to 'completed'
    integration_bom_po_test.go:407: Step 4: Verify finished goods added to inventory
    integration_bom_po_test.go:415:    ASY-WO-001: qty_on_hand = 0 (expected 10)
    integration_bom_po_test.go:421:    âœ— WORKFLOW GAP: Finished goods NOT added to inventory
    integration_bom_po_test.go:426: Step 5: Verify inventory transactions created
    integration_bom_po_test.go:437:    âœ— NO inventory transactions created
    integration_bom_po_test.go:442: === Test Results ===
    integration_bom_po_test.go:444: âœ—âœ— CRITICAL WORKFLOW GAP CONFIRMED:
    integration_bom_po_test.go:445:    Work order completion does NOT update inventory
    integration_bom_po_test.go:446: 
    integration_bom_po_test.go:447: Required implementation:
    integration_bom_po_test.go:448:    1. When WO status â†’ 'completed', query WO qty and ipn
    integration_bom_po_test.go:449:    2. UPDATE inventory SET qty_onhand = qty_onhand + wo.qty WHERE ipn = wo.ipn
    integration_bom_po_test.go:450:    3. INSERT inventory_transactions for audit trail
    integration_bom_po_test.go:451:    4. (Optional) Deduct component materials from inventory
    integration_bom_po_test.go:456: === Integration Test Complete ===
--- FAIL: TestIntegration_WorkOrder_Completion_Updates_Inventory (0.00s)
=== RUN   TestIntegration_Real_PO_Receive_Direct
    integration_real_test.go:86: Created PO: PO-2026-0001 with line ID: 1
    integration_real_test.go:119: âœ“ Inventory updated correctly: 105
    integration_real_test.go:132: âœ“ Inventory transaction created
    integration_real_test.go:145: âœ“ PO status updated to 'received'
    integration_real_test.go:148: âœ“âœ“ SUCCESS: PO receive with skip_inspection=true works correctly
--- PASS: TestIntegration_Real_PO_Receive_Direct (0.00s)
=== RUN   TestIntegration_Real_PO_Receive_WithInspection
    integration_real_test.go:231: âœ“ Receiving inspection created with ID: 1
    integration_real_test.go:242: âœ“ Inventory not updated yet (waiting for inspection): 2
    integration_real_test.go:274: âœ“ Inventory updated after inspection passed: 52
    integration_real_test.go:286: âœ“ Inventory transaction created
    integration_real_test.go:289: âœ“âœ“ SUCCESS: PO receive with inspection workflow works correctly
--- PASS: TestIntegration_Real_PO_Receive_WithInspection (0.00s)
=== RUN   TestIntegration_Real_WorkOrder_Completion
    integration_real_test.go:340: Created work order: WO-2026-0001
    integration_real_test.go:347: Initial state: ASY-TEST-001 qty=0, COMP-001 qty=100 reserved=20
    integration_real_test.go:396: âœ“ Finished goods added to inventory: 10
    integration_real_test.go:408: âš  Material consumption: expected -100, got 80 (may be OK if BOM integration not complete)
    integration_real_test.go:414: âœ“ Material reservations released
    integration_real_test.go:425: âœ“ Inventory transactions created: 2
    integration_real_test.go:438: âœ“ Work order marked as completed
    integration_real_test.go:441: âœ“âœ“ SUCCESS: Work order completion updates inventory correctly
--- PASS: TestIntegration_Real_WorkOrder_Completion (0.10s)
=== RUN   TestIntegration_BOM_Shortage_Procurement_PO_Inventory
    integration_workflow_test.go:47: Failed to login: Post "http://localhost:9000/auth/login": dial tcp [::1]:9000: connect: connection refused
--- FAIL: TestIntegration_BOM_Shortage_Procurement_PO_Inventory (0.00s)
=== RUN   TestIntegration_ECO_Part_Update_BOM_Impact
    integration_workflow_test.go:47: Failed to login: Post "http://localhost:9000/auth/login": dial tcp [::1]:9000: connect: connection refused
--- FAIL: TestIntegration_ECO_Part_Update_BOM_Impact (0.00s)
=== RUN   TestIntegration_NCR_RMA_ECO_Flow
    integration_workflow_test.go:47: Failed to login: Post "http://localhost:9000/auth/login": dial tcp [::1]:9000: connect: connection refused
--- FAIL: TestIntegration_NCR_RMA_ECO_Flow (0.00s)
=== RUN   TestIntegration_WorkOrder_Inventory_Consumption
    integration_workflow_test.go:47: Failed to login: Post "http://localhost:9000/auth/login": dial tcp [::1]:9000: connect: connection refused
--- FAIL: TestIntegration_WorkOrder_Inventory_Consumption (0.00s)
=== RUN   TestLoadLargeDatasets
=== RUN   TestLoadLargeDatasets/Search_Performance_with_10k+_Parts
    load_large_dataset_test.go:28: Inserting 10000 parts for search testing...
    load_large_dataset_test.go:83: âœ“ Inserted 10000 parts in 53.675209ms (186306 parts/sec)
=== RUN   TestLoadLargeDatasets/Search_Performance_with_10k+_Parts/Exact_IPN_Match
    load_large_dataset_test.go:153: âœ“ Search completed in 2.723333ms, returned 1 results (target: <100ms)
=== RUN   TestLoadLargeDatasets/Search_Performance_with_10k+_Parts/IPN_Prefix_Search
    load_large_dataset_test.go:153: âœ“ Search completed in 143.417Âµs, returned 100 results (target: <500ms)
=== RUN   TestLoadLargeDatasets/Search_Performance_with_10k+_Parts/Description_Search
    load_large_dataset_test.go:153: âœ“ Search completed in 2.324958ms, returned 1 results (target: <500ms)
=== RUN   TestLoadLargeDatasets/Search_Performance_with_10k+_Parts/Category_Filter
    load_large_dataset_test.go:153: âœ“ Search completed in 107.833Âµs, returned 100 results (target: <500ms)
=== RUN   TestLoadLargeDatasets/Search_Performance_with_10k+_Parts/Combined_Search
    load_large_dataset_test.go:153: âœ“ Search completed in 138.875Âµs, returned 100 results (target: <500ms)
=== RUN   TestLoadLargeDatasets/Search_Performance_with_10k+_Parts/Wildcard_Search
    load_large_dataset_test.go:153: âœ“ Search completed in 112.291Âµs, returned 100 results (target: <500ms)
=== RUN   TestLoadLargeDatasets/Pagination_with_Large_Result_Sets
    load_large_dataset_test.go:170: Setting up 10000 parts for pagination testing...
    load_large_dataset_test.go:200: âœ“ Inserted 10000 inventory items
    load_large_dataset_test.go:239: âœ“ Page 0 loaded in 95.417Âµs
    load_large_dataset_test.go:239: âœ“ Page 5 loaded in 44.625Âµs
    load_large_dataset_test.go:239: âœ“ Page 10 loaded in 50.792Âµs
    load_large_dataset_test.go:239: âœ“ Page 15 loaded in 56.75Âµs
    load_large_dataset_test.go:244: âœ“ Pagination test complete: 20 pages, avg 57.91Âµs per page, total 1.158208ms
=== RUN   TestLoadLargeDatasets/Work_Order_with_1000+_Serial_Numbers
    load_large_dataset_test.go:262: Creating work order with 1000 serial numbers...
    load_large_dataset_test.go:299: âœ“ Created work order with 1000 serials in 4.936833ms
    load_large_dataset_test.go:323: âœ“ Retrieved work order with 1000 serials in 200.791Âµs
    load_large_dataset_test.go:353: âœ“ Paginated first 100 serials in 210.542Âµs
=== RUN   TestLoadLargeDatasets/CSV_Export_10k_Records
    load_large_dataset_test.go:364: Setting up 10000 parts for CSV export test...
    load_large_dataset_test.go:413: âœ“ Inserted 10000 parts for export
    load_large_dataset_test.go:456: âœ“ Exported 10000 parts to CSV in 12.0355ms (830875 parts/sec)
    load_large_dataset_test.go:462: âœ“ CSV size: 1.35 MB
=== RUN   TestLoadLargeDatasets/Dashboard_with_Large_Data_Volumes
    load_large_dataset_test.go:475: Setting up large dataset for dashboard testing...
    load_large_dataset_test.go:549: âœ“ Inserted dashboard test data: 10000 inventory, 1000 POs, 500 WOs
=== RUN   TestLoadLargeDatasets/Dashboard_with_Large_Data_Volumes/Total_Inventory_Value
    load_large_dataset_test.go:613: âœ“ Dashboard query 'Total Inventory Value' completed in 488.125Âµs
=== RUN   TestLoadLargeDatasets/Dashboard_with_Large_Data_Volumes/Low_Stock_Count
    load_large_dataset_test.go:613: âœ“ Dashboard query 'Low Stock Count' completed in 30.083Âµs
=== RUN   TestLoadLargeDatasets/Dashboard_with_Large_Data_Volumes/PO_Status_Summary
    load_large_dataset_test.go:613: âœ“ Dashboard query 'PO Status Summary' completed in 274.416Âµs
=== RUN   TestLoadLargeDatasets/Dashboard_with_Large_Data_Volumes/WO_Status_Summary
    load_large_dataset_test.go:613: âœ“ Dashboard query 'WO Status Summary' completed in 165.75Âµs
=== RUN   TestLoadLargeDatasets/Dashboard_with_Large_Data_Volumes/Inventory_by_Location
    load_large_dataset_test.go:613: âœ“ Dashboard query 'Inventory by Location' completed in 2.510584ms
=== RUN   TestLoadLargeDatasets/Dashboard_with_Large_Data_Volumes/Dashboard_API_Response
    load_large_dataset_test.go:663: âœ“ Dashboard API response generated in 589.042Âµs
--- PASS: TestLoadLargeDatasets (0.41s)
    --- PASS: TestLoadLargeDatasets/Search_Performance_with_10k+_Parts (0.10s)
        --- PASS: TestLoadLargeDatasets/Search_Performance_with_10k+_Parts/Exact_IPN_Match (0.00s)
        --- PASS: TestLoadLargeDatasets/Search_Performance_with_10k+_Parts/IPN_Prefix_Search (0.00s)
        --- PASS: TestLoadLargeDatasets/Search_Performance_with_10k+_Parts/Description_Search (0.00s)
        --- PASS: TestLoadLargeDatasets/Search_Performance_with_10k+_Parts/Category_Filter (0.00s)
        --- PASS: TestLoadLargeDatasets/Search_Performance_with_10k+_Parts/Combined_Search (0.00s)
        --- PASS: TestLoadLargeDatasets/Search_Performance_with_10k+_Parts/Wildcard_Search (0.00s)
    --- PASS: TestLoadLargeDatasets/Pagination_with_Large_Result_Sets (0.09s)
    --- PASS: TestLoadLargeDatasets/Work_Order_with_1000+_Serial_Numbers (0.03s)
    --- PASS: TestLoadLargeDatasets/CSV_Export_10k_Records (0.08s)
    --- PASS: TestLoadLargeDatasets/Dashboard_with_Large_Data_Volumes (0.11s)
        --- PASS: TestLoadLargeDatasets/Dashboard_with_Large_Data_Volumes/Total_Inventory_Value (0.00s)
        --- PASS: TestLoadLargeDatasets/Dashboard_with_Large_Data_Volumes/Low_Stock_Count (0.00s)
        --- PASS: TestLoadLargeDatasets/Dashboard_with_Large_Data_Volumes/PO_Status_Summary (0.00s)
        --- PASS: TestLoadLargeDatasets/Dashboard_with_Large_Data_Volumes/WO_Status_Summary (0.00s)
        --- PASS: TestLoadLargeDatasets/Dashboard_with_Large_Data_Volumes/Inventory_by_Location (0.00s)
        --- PASS: TestLoadLargeDatasets/Dashboard_with_Large_Data_Volumes/Dashboard_API_Response (0.00s)
=== RUN   TestDistributorClientInterface
--- PASS: TestDistributorClientInterface (0.00s)
=== RUN   TestDigikeyClientName
--- PASS: TestDigikeyClientName (0.00s)
=== RUN   TestMouserClientName
--- PASS: TestMouserClientName (0.00s)
=== RUN   TestParseMouserPrice
--- PASS: TestParseMouserPrice (0.00s)
=== RUN   TestParseMouserAvailability
--- PASS: TestParseMouserAvailability (0.00s)
=== RUN   TestParseMouserLeadTime
--- PASS: TestParseMouserLeadTime (0.00s)
=== RUN   TestMarketPricingCache
    market_pricing_test.go:103: SQL logic error: no such table: market_pricing (1)
--- FAIL: TestMarketPricingCache (0.00s)
=== RUN   TestMarketPricingCacheExpiry
--- PASS: TestMarketPricingCacheExpiry (0.00s)
=== RUN   TestDistributorSettingsHandlers
--- PASS: TestDistributorSettingsHandlers (0.05s)
=== RUN   TestGetDistributorClientsUnconfigured
--- PASS: TestGetDistributorClientsUnconfigured (0.00s)
=== RUN   TestGetDistributorClientsPartialConfig
--- PASS: TestGetDistributorClientsPartialConfig (0.00s)
=== RUN   TestMaskSetting
--- PASS: TestMaskSetting (0.00s)
=== RUN   TestMarketPricingHandlerNoMPN
--- PASS: TestMarketPricingHandlerNoMPN (0.05s)
=== RUN   TestRound2
--- PASS: TestRound2 (0.00s)
=== RUN   TestTruncate
--- PASS: TestTruncate (0.00s)
=== RUN   TestLoggingMiddleware_CORS
2026/02/20 14:41:11 GET /api/v1/parts 1.583Âµs
--- PASS: TestLoggingMiddleware_CORS (0.00s)
=== RUN   TestLoggingMiddleware_OPTIONS
--- PASS: TestLoggingMiddleware_OPTIONS (0.00s)
=== RUN   TestRequireAuth_NoAuth
--- PASS: TestRequireAuth_NoAuth (0.00s)
=== RUN   TestRequireAuth_ValidSession
--- PASS: TestRequireAuth_ValidSession (0.05s)
=== RUN   TestRequireAuth_ExpiredSession
--- PASS: TestRequireAuth_ExpiredSession (0.05s)
=== RUN   TestRequireAuth_InactiveUser
--- PASS: TestRequireAuth_InactiveUser (0.05s)
=== RUN   TestRequireAuth_ValidBearerToken
--- PASS: TestRequireAuth_ValidBearerToken (0.00s)
=== RUN   TestRequireAuth_InvalidBearerToken
--- PASS: TestRequireAuth_InvalidBearerToken (0.00s)
=== RUN   TestRequireAuth_OpenAPIExempted
--- PASS: TestRequireAuth_OpenAPIExempted (0.00s)
=== RUN   TestRequireAuth_NonAPIExempted
--- PASS: TestRequireAuth_NonAPIExempted (0.00s)
=== RUN   TestRequireAuth_SessionExtension
--- PASS: TestRequireAuth_SessionExtension (1.05s)
=== RUN   TestRequireRBAC_NoRole
--- PASS: TestRequireRBAC_NoRole (0.00s)
=== RUN   TestRequireRBAC_NonAPIExempted
--- PASS: TestRequireRBAC_NonAPIExempted (0.00s)
=== RUN   TestIsAdminOnly_Users
--- PASS: TestIsAdminOnly_Users (0.00s)
=== RUN   TestIsAdminOnly_APIKeys
--- PASS: TestIsAdminOnly_APIKeys (0.00s)
=== RUN   TestIsAdminOnly_Email
--- PASS: TestIsAdminOnly_Email (0.00s)
=== RUN   TestIsAdminOnly_NotAdminPath
--- PASS: TestIsAdminOnly_NotAdminPath (0.00s)
=== RUN   TestSeedDefaultPermissions
--- PASS: TestSeedDefaultPermissions (0.20s)
=== RUN   TestMapAPIPathToPermission
=== RUN   TestMapAPIPathToPermission/GET_parts
=== RUN   TestMapAPIPathToPermission/POST_parts
=== RUN   TestMapAPIPathToPermission/PUT_parts/123
=== RUN   TestMapAPIPathToPermission/DELETE_parts/123
=== RUN   TestMapAPIPathToPermission/GET_ecos
=== RUN   TestMapAPIPathToPermission/POST_ecos/123/approve
=== RUN   TestMapAPIPathToPermission/POST_ecos/123/implement
=== RUN   TestMapAPIPathToPermission/GET_inventory
=== RUN   TestMapAPIPathToPermission/POST_inventory/transact
=== RUN   TestMapAPIPathToPermission/GET_users
=== RUN   TestMapAPIPathToPermission/POST_users
=== RUN   TestMapAPIPathToPermission/GET_apikeys
=== RUN   TestMapAPIPathToPermission/DELETE_api-keys
=== RUN   TestMapAPIPathToPermission/PUT_email/config
=== RUN   TestMapAPIPathToPermission/GET_settings/email
=== RUN   TestMapAPIPathToPermission/PUT_settings/general
=== RUN   TestMapAPIPathToPermission/POST_workorders
=== RUN   TestMapAPIPathToPermission/GET_ncrs
=== RUN   TestMapAPIPathToPermission/POST_rmas
=== RUN   TestMapAPIPathToPermission/PUT_vendors
=== RUN   TestMapAPIPathToPermission/GET_pos
=== RUN   TestMapAPIPathToPermission/POST_quotes
=== RUN   TestMapAPIPathToPermission/GET_pricing
=== RUN   TestMapAPIPathToPermission/GET_devices
=== RUN   TestMapAPIPathToPermission/POST_campaigns
=== RUN   TestMapAPIPathToPermission/GET_shipments
=== RUN   TestMapAPIPathToPermission/POST_field-reports
=== RUN   TestMapAPIPathToPermission/GET_rfqs
=== RUN   TestMapAPIPathToPermission/GET_reports/inventory-valuation
=== RUN   TestMapAPIPathToPermission/POST_tests
=== RUN   TestMapAPIPathToPermission/GET_docs
=== RUN   TestMapAPIPathToPermission/POST_docs/123/approve
=== RUN   TestMapAPIPathToPermission/POST_categories
=== RUN   TestMapAPIPathToPermission/GET_receiving
=== RUN   TestMapAPIPathToPermission/POST_prices
=== RUN   TestMapAPIPathToPermission/GET_dashboard
=== RUN   TestMapAPIPathToPermission/GET_search
=== RUN   TestMapAPIPathToPermission/GET_scan/123
=== RUN   TestMapAPIPathToPermission/GET_audit
=== RUN   TestMapAPIPathToPermission/GET_calendar
=== RUN   TestMapAPIPathToPermission/GET_notifications
=== RUN   TestMapAPIPathToPermission/GET_config
=== RUN   TestMapAPIPathToPermission/POST_attachments
--- PASS: TestMapAPIPathToPermission (0.00s)
    --- PASS: TestMapAPIPathToPermission/GET_parts (0.00s)
    --- PASS: TestMapAPIPathToPermission/POST_parts (0.00s)
    --- PASS: TestMapAPIPathToPermission/PUT_parts/123 (0.00s)
    --- PASS: TestMapAPIPathToPermission/DELETE_parts/123 (0.00s)
    --- PASS: TestMapAPIPathToPermission/GET_ecos (0.00s)
    --- PASS: TestMapAPIPathToPermission/POST_ecos/123/approve (0.00s)
    --- PASS: TestMapAPIPathToPermission/POST_ecos/123/implement (0.00s)
    --- PASS: TestMapAPIPathToPermission/GET_inventory (0.00s)
    --- PASS: TestMapAPIPathToPermission/POST_inventory/transact (0.00s)
    --- PASS: TestMapAPIPathToPermission/GET_users (0.00s)
    --- PASS: TestMapAPIPathToPermission/POST_users (0.00s)
    --- PASS: TestMapAPIPathToPermission/GET_apikeys (0.00s)
    --- PASS: TestMapAPIPathToPermission/DELETE_api-keys (0.00s)
    --- PASS: TestMapAPIPathToPermission/PUT_email/config (0.00s)
    --- PASS: TestMapAPIPathToPermission/GET_settings/email (0.00s)
    --- PASS: TestMapAPIPathToPermission/PUT_settings/general (0.00s)
    --- PASS: TestMapAPIPathToPermission/POST_workorders (0.00s)
    --- PASS: TestMapAPIPathToPermission/GET_ncrs (0.00s)
    --- PASS: TestMapAPIPathToPermission/POST_rmas (0.00s)
    --- PASS: TestMapAPIPathToPermission/PUT_vendors (0.00s)
    --- PASS: TestMapAPIPathToPermission/GET_pos (0.00s)
    --- PASS: TestMapAPIPathToPermission/POST_quotes (0.00s)
    --- PASS: TestMapAPIPathToPermission/GET_pricing (0.00s)
    --- PASS: TestMapAPIPathToPermission/GET_devices (0.00s)
    --- PASS: TestMapAPIPathToPermission/POST_campaigns (0.00s)
    --- PASS: TestMapAPIPathToPermission/GET_shipments (0.00s)
    --- PASS: TestMapAPIPathToPermission/POST_field-reports (0.00s)
    --- PASS: TestMapAPIPathToPermission/GET_rfqs (0.00s)
    --- PASS: TestMapAPIPathToPermission/GET_reports/inventory-valuation (0.00s)
    --- PASS: TestMapAPIPathToPermission/POST_tests (0.00s)
    --- PASS: TestMapAPIPathToPermission/GET_docs (0.00s)
    --- PASS: TestMapAPIPathToPermission/POST_docs/123/approve (0.00s)
    --- PASS: TestMapAPIPathToPermission/POST_categories (0.00s)
    --- PASS: TestMapAPIPathToPermission/GET_receiving (0.00s)
    --- PASS: TestMapAPIPathToPermission/POST_prices (0.00s)
    --- PASS: TestMapAPIPathToPermission/GET_dashboard (0.00s)
    --- PASS: TestMapAPIPathToPermission/GET_search (0.00s)
    --- PASS: TestMapAPIPathToPermission/GET_scan/123 (0.00s)
    --- PASS: TestMapAPIPathToPermission/GET_audit (0.00s)
    --- PASS: TestMapAPIPathToPermission/GET_calendar (0.00s)
    --- PASS: TestMapAPIPathToPermission/GET_notifications (0.00s)
    --- PASS: TestMapAPIPathToPermission/GET_config (0.00s)
    --- PASS: TestMapAPIPathToPermission/POST_attachments (0.00s)
=== RUN   TestPermissionBasedRBAC
=== RUN   TestPermissionBasedRBAC/admin_GET_parts
=== RUN   TestPermissionBasedRBAC/admin_POST_parts
=== RUN   TestPermissionBasedRBAC/admin_GET_users
=== RUN   TestPermissionBasedRBAC/admin_POST_users
=== RUN   TestPermissionBasedRBAC/admin_PUT_email_config
=== RUN   TestPermissionBasedRBAC/user_GET_parts
=== RUN   TestPermissionBasedRBAC/user_POST_parts
=== RUN   TestPermissionBasedRBAC/user_PUT_ecos
=== RUN   TestPermissionBasedRBAC/user_DELETE_parts
=== RUN   TestPermissionBasedRBAC/user_GET_users_DENIED
=== RUN   TestPermissionBasedRBAC/user_POST_users_DENIED
=== RUN   TestPermissionBasedRBAC/user_PUT_users_DENIED
=== RUN   TestPermissionBasedRBAC/user_GET_apikeys_DENIED
=== RUN   TestPermissionBasedRBAC/user_POST_apikeys_DENIED
=== RUN   TestPermissionBasedRBAC/user_DELETE_apikeys_DENIED
=== RUN   TestPermissionBasedRBAC/user_GET_email_config_DENIED
=== RUN   TestPermissionBasedRBAC/user_PUT_email_config_DENIED
=== RUN   TestPermissionBasedRBAC/user_POST_email_test_DENIED
=== RUN   TestPermissionBasedRBAC/user_GET_settings_email_DENIED
=== RUN   TestPermissionBasedRBAC/user_PUT_settings_email_DENIED
=== RUN   TestPermissionBasedRBAC/user_GET_email-log_allowed
=== RUN   TestPermissionBasedRBAC/readonly_GET_parts
=== RUN   TestPermissionBasedRBAC/readonly_GET_users
=== RUN   TestPermissionBasedRBAC/readonly_POST_parts_DENIED
=== RUN   TestPermissionBasedRBAC/readonly_PUT_ecos_DENIED
=== RUN   TestPermissionBasedRBAC/readonly_DELETE_parts_DENIED
=== RUN   TestPermissionBasedRBAC/no_role_GET
=== RUN   TestPermissionBasedRBAC/no_role_POST_users
=== RUN   TestPermissionBasedRBAC/non-api_path
=== RUN   TestPermissionBasedRBAC/user_GET_dashboard
=== RUN   TestPermissionBasedRBAC/readonly_GET_dashboard
=== RUN   TestPermissionBasedRBAC/user_GET_search
=== RUN   TestPermissionBasedRBAC/user_GET_audit
--- PASS: TestPermissionBasedRBAC (0.16s)
    --- PASS: TestPermissionBasedRBAC/admin_GET_parts (0.00s)
    --- PASS: TestPermissionBasedRBAC/admin_POST_parts (0.00s)
    --- PASS: TestPermissionBasedRBAC/admin_GET_users (0.00s)
    --- PASS: TestPermissionBasedRBAC/admin_POST_users (0.00s)
    --- PASS: TestPermissionBasedRBAC/admin_PUT_email_config (0.00s)
    --- PASS: TestPermissionBasedRBAC/user_GET_parts (0.00s)
    --- PASS: TestPermissionBasedRBAC/user_POST_parts (0.00s)
    --- PASS: TestPermissionBasedRBAC/user_PUT_ecos (0.00s)
    --- PASS: TestPermissionBasedRBAC/user_DELETE_parts (0.00s)
    --- PASS: TestPermissionBasedRBAC/user_GET_users_DENIED (0.00s)
    --- PASS: TestPermissionBasedRBAC/user_POST_users_DENIED (0.00s)
    --- PASS: TestPermissionBasedRBAC/user_PUT_users_DENIED (0.00s)
    --- PASS: TestPermissionBasedRBAC/user_GET_apikeys_DENIED (0.00s)
    --- PASS: TestPermissionBasedRBAC/user_POST_apikeys_DENIED (0.00s)
    --- PASS: TestPermissionBasedRBAC/user_DELETE_apikeys_DENIED (0.00s)
    --- PASS: TestPermissionBasedRBAC/user_GET_email_config_DENIED (0.00s)
    --- PASS: TestPermissionBasedRBAC/user_PUT_email_config_DENIED (0.00s)
    --- PASS: TestPermissionBasedRBAC/user_POST_email_test_DENIED (0.00s)
    --- PASS: TestPermissionBasedRBAC/user_GET_settings_email_DENIED (0.00s)
    --- PASS: TestPermissionBasedRBAC/user_PUT_settings_email_DENIED (0.00s)
    --- PASS: TestPermissionBasedRBAC/user_GET_email-log_allowed (0.00s)
    --- PASS: TestPermissionBasedRBAC/readonly_GET_parts (0.00s)
    --- PASS: TestPermissionBasedRBAC/readonly_GET_users (0.00s)
    --- PASS: TestPermissionBasedRBAC/readonly_POST_parts_DENIED (0.00s)
    --- PASS: TestPermissionBasedRBAC/readonly_PUT_ecos_DENIED (0.00s)
    --- PASS: TestPermissionBasedRBAC/readonly_DELETE_parts_DENIED (0.00s)
    --- PASS: TestPermissionBasedRBAC/no_role_GET (0.00s)
    --- PASS: TestPermissionBasedRBAC/no_role_POST_users (0.00s)
    --- PASS: TestPermissionBasedRBAC/non-api_path (0.00s)
    --- PASS: TestPermissionBasedRBAC/user_GET_dashboard (0.00s)
    --- PASS: TestPermissionBasedRBAC/readonly_GET_dashboard (0.00s)
    --- PASS: TestPermissionBasedRBAC/user_GET_search (0.00s)
    --- PASS: TestPermissionBasedRBAC/user_GET_audit (0.00s)
=== RUN   TestCustomRolePermissions
--- PASS: TestCustomRolePermissions (0.16s)
=== RUN   TestPermissionAPIEndpoints
    permissions_test.go:322: set permissions: got 403, body: {"error":"Forbidden: Only admins can modify permissions"}
--- FAIL: TestPermissionAPIEndpoints (0.16s)
=== RUN   TestPermissionSetInvalidInput
    permissions_test.go:346: invalid module: got 403, want 400
    permissions_test.go:355: invalid action: got 403, want 400
--- FAIL: TestPermissionSetInvalidInput (0.16s)
=== RUN   TestQualityWorkflowIntegration
=== RUN   TestQualityWorkflowIntegration/NCR_Creation_with_created_by
    quality_workflow_test.go:86: Expected created_by to be 'test_qe', got ''
    quality_workflow_test.go:93: Failed to query created_by from database: sql: no rows in result set
    quality_workflow_test.go:96: Database created_by should be 'test_qe', got ''
=== RUN   TestQualityWorkflowIntegration/Create_CAPA_from_NCR_via_API
    quality_workflow_test.go:136: Expected linked_ncr_id to be 'NCR-2026-TEST1', got ''
    quality_workflow_test.go:142: Expected title to be 'CAPA for NCR NCR-2026-TEST1: Test NCR', got ''
=== RUN   TestQualityWorkflowIntegration/Create_ECO_from_NCR_via_API
    quality_workflow_test.go:175: Expected ncr_id to be 'NCR-2026-TEST2', got '<nil>'
    quality_workflow_test.go:181: Expected title to be '[NCR NCR-2026-TEST2] Test NCR for ECO â€” Corrective Action', got '%!s(<nil>)'
    quality_workflow_test.go:185: Expected affected_ipns to be 'TEST-001', got '<nil>'
=== RUN   TestQualityWorkflowIntegration/CAPA_Approval_Security
=== RUN   TestQualityWorkflowIntegration/CAPA_Approval_Security/QE_approval_by_non-QE_user_should_fail
=== RUN   TestQualityWorkflowIntegration/CAPA_Approval_Security/QE_approval_by_QE_user_should_succeed
=== RUN   TestQualityWorkflowIntegration/CAPA_Approval_Security/Manager_approval_by_non-manager_should_fail
=== RUN   TestQualityWorkflowIntegration/CAPA_Status_Auto-advancement
    quality_workflow_test.go:307: Expected status to auto-advance to 'approved', got ''
    quality_workflow_test.go:317: Database status should be 'approved', got 'pending_review'
--- FAIL: TestQualityWorkflowIntegration (0.01s)
    --- FAIL: TestQualityWorkflowIntegration/NCR_Creation_with_created_by (0.00s)
    --- FAIL: TestQualityWorkflowIntegration/Create_CAPA_from_NCR_via_API (0.00s)
    --- FAIL: TestQualityWorkflowIntegration/Create_ECO_from_NCR_via_API (0.00s)
    --- PASS: TestQualityWorkflowIntegration/CAPA_Approval_Security (0.00s)
        --- PASS: TestQualityWorkflowIntegration/CAPA_Approval_Security/QE_approval_by_non-QE_user_should_fail (0.00s)
        --- PASS: TestQualityWorkflowIntegration/CAPA_Approval_Security/QE_approval_by_QE_user_should_succeed (0.00s)
        --- PASS: TestQualityWorkflowIntegration/CAPA_Approval_Security/Manager_approval_by_non-manager_should_fail (0.00s)
    --- FAIL: TestQualityWorkflowIntegration/CAPA_Status_Auto-advancement (0.00s)
=== RUN   TestRBAC
=== RUN   TestRBAC/admin_GET_parts
=== RUN   TestRBAC/admin_POST_parts
=== RUN   TestRBAC/admin_GET_users
=== RUN   TestRBAC/admin_POST_users
=== RUN   TestRBAC/admin_GET_apikeys
=== RUN   TestRBAC/admin_PUT_email_config
=== RUN   TestRBAC/admin_PUT_settings_email
=== RUN   TestRBAC/user_GET_parts
=== RUN   TestRBAC/user_POST_parts
=== RUN   TestRBAC/user_PUT_ecos
=== RUN   TestRBAC/user_DELETE_parts
=== RUN   TestRBAC/user_GET_workorders
=== RUN   TestRBAC/user_POST_workorders
=== RUN   TestRBAC/user_GET_users_DENIED
=== RUN   TestRBAC/user_POST_users_DENIED
=== RUN   TestRBAC/user_PUT_users_DENIED
=== RUN   TestRBAC/user_GET_apikeys_DENIED
=== RUN   TestRBAC/user_POST_apikeys_DENIED
=== RUN   TestRBAC/user_DELETE_apikeys_DENIED
=== RUN   TestRBAC/user_GET_email_config_DENIED
=== RUN   TestRBAC/user_PUT_email_config_DENIED
=== RUN   TestRBAC/user_POST_email_test_DENIED
=== RUN   TestRBAC/user_GET_settings_email_DENIED
=== RUN   TestRBAC/user_PUT_settings_email_DENIED
=== RUN   TestRBAC/user_GET_email-log_allowed
=== RUN   TestRBAC/readonly_GET_parts
=== RUN   TestRBAC/readonly_GET_users
=== RUN   TestRBAC/readonly_POST_parts_DENIED
=== RUN   TestRBAC/readonly_PUT_ecos_DENIED
=== RUN   TestRBAC/readonly_DELETE_parts_DENIED
=== RUN   TestRBAC/no_role_GET
=== RUN   TestRBAC/no_role_POST_users
=== RUN   TestRBAC/non-api_path
--- PASS: TestRBAC (0.16s)
    --- PASS: TestRBAC/admin_GET_parts (0.00s)
    --- PASS: TestRBAC/admin_POST_parts (0.00s)
    --- PASS: TestRBAC/admin_GET_users (0.00s)
    --- PASS: TestRBAC/admin_POST_users (0.00s)
    --- PASS: TestRBAC/admin_GET_apikeys (0.00s)
    --- PASS: TestRBAC/admin_PUT_email_config (0.00s)
    --- PASS: TestRBAC/admin_PUT_settings_email (0.00s)
    --- PASS: TestRBAC/user_GET_parts (0.00s)
    --- PASS: TestRBAC/user_POST_parts (0.00s)
    --- PASS: TestRBAC/user_PUT_ecos (0.00s)
    --- PASS: TestRBAC/user_DELETE_parts (0.00s)
    --- PASS: TestRBAC/user_GET_workorders (0.00s)
    --- PASS: TestRBAC/user_POST_workorders (0.00s)
    --- PASS: TestRBAC/user_GET_users_DENIED (0.00s)
    --- PASS: TestRBAC/user_POST_users_DENIED (0.00s)
    --- PASS: TestRBAC/user_PUT_users_DENIED (0.00s)
    --- PASS: TestRBAC/user_GET_apikeys_DENIED (0.00s)
    --- PASS: TestRBAC/user_POST_apikeys_DENIED (0.00s)
    --- PASS: TestRBAC/user_DELETE_apikeys_DENIED (0.00s)
    --- PASS: TestRBAC/user_GET_email_config_DENIED (0.00s)
    --- PASS: TestRBAC/user_PUT_email_config_DENIED (0.00s)
    --- PASS: TestRBAC/user_POST_email_test_DENIED (0.00s)
    --- PASS: TestRBAC/user_GET_settings_email_DENIED (0.00s)
    --- PASS: TestRBAC/user_PUT_settings_email_DENIED (0.00s)
    --- PASS: TestRBAC/user_GET_email-log_allowed (0.00s)
    --- PASS: TestRBAC/readonly_GET_parts (0.00s)
    --- PASS: TestRBAC/readonly_GET_users (0.00s)
    --- PASS: TestRBAC/readonly_POST_parts_DENIED (0.00s)
    --- PASS: TestRBAC/readonly_PUT_ecos_DENIED (0.00s)
    --- PASS: TestRBAC/readonly_DELETE_parts_DENIED (0.00s)
    --- PASS: TestRBAC/no_role_GET (0.00s)
    --- PASS: TestRBAC/no_role_POST_users (0.00s)
    --- PASS: TestRBAC/non-api_path (0.00s)
=== RUN   TestListReceivingAll
    receiving_eco_test.go:72: Failed to create vendor: SQL logic error: no such table: vendors (1)
--- FAIL: TestListReceivingAll (0.00s)
=== RUN   TestListReceivingPending
    receiving_eco_test.go:93: Failed to create vendor: SQL logic error: no such table: vendors (1)
--- FAIL: TestListReceivingPending (0.00s)
=== RUN   TestListReceivingInspected
    receiving_eco_test.go:113: Failed to create vendor: SQL logic error: no such table: vendors (1)
--- FAIL: TestListReceivingInspected (0.00s)
=== RUN   TestInspectPass
    receiving_eco_test.go:133: Failed to create vendor: SQL logic error: no such table: vendors (1)
--- FAIL: TestInspectPass (0.00s)
=== RUN   TestInspectFail
    receiving_eco_test.go:180: Failed to create vendor: SQL logic error: no such table: vendors (1)
--- FAIL: TestInspectFail (0.00s)
=== RUN   TestInspectHold
    receiving_eco_test.go:212: Failed to create vendor: SQL logic error: no such table: vendors (1)
--- FAIL: TestInspectHold (0.00s)
=== RUN   TestInspectExceedsReceived
    receiving_eco_test.go:246: Failed to create vendor: SQL logic error: no such table: vendors (1)
--- FAIL: TestInspectExceedsReceived (0.00s)
=== RUN   TestInspectNotFound
--- PASS: TestInspectNotFound (0.00s)
=== RUN   TestInspectInvalidID
--- PASS: TestInspectInvalidID (0.00s)
=== RUN   TestECOCreateHasInitialRevision
    receiving_eco_test.go:313: create ECO failed: 500 {"error":"SQL logic error: table ecos has no column named affected_ipns (1)"}
--- FAIL: TestECOCreateHasInitialRevision (0.00s)
=== RUN   TestCreateECORevision
    receiving_eco_test.go:340: create ECO failed: 500 {"error":"SQL logic error: table ecos has no column named affected_ipns (1)"}
--- FAIL: TestCreateECORevision (0.00s)
=== RUN   TestGetSpecificRevision
    receiving_eco_test.go:366: create ECO failed: 500 {"error":"SQL logic error: table ecos has no column named affected_ipns (1)"}
--- FAIL: TestGetSpecificRevision (0.00s)
=== RUN   TestGetRevisionNotFound
    receiving_eco_test.go:387: create ECO failed: 500 {"error":"SQL logic error: table ecos has no column named affected_ipns (1)"}
--- FAIL: TestGetRevisionNotFound (0.00s)
=== RUN   TestRevisionAutoIncrements
    receiving_eco_test.go:401: create ECO failed: 500 {"error":"SQL logic error: table ecos has no column named affected_ipns (1)"}
--- FAIL: TestRevisionAutoIncrements (0.00s)
=== RUN   TestApproveECOUpdatesRevision
    receiving_eco_test.go:431: create ECO failed: 500 {"error":"SQL logic error: table ecos has no column named affected_ipns (1)"}
--- FAIL: TestApproveECOUpdatesRevision (0.00s)
=== RUN   TestImplementECOUpdatesRevision
    receiving_eco_test.go:461: create ECO failed: 500 {"error":"SQL logic error: table ecos has no column named affected_ipns (1)"}
--- FAIL: TestImplementECOUpdatesRevision (0.00s)
=== RUN   TestWhereUsedEmpty
--- PASS: TestWhereUsedEmpty (0.00s)
=== RUN   TestWhereUsedFindsParentAssembly
--- PASS: TestWhereUsedFindsParentAssembly (0.00s)
=== RUN   TestWhereUsedMultipleAssemblies
--- PASS: TestWhereUsedMultipleAssemblies (0.00s)
=== RUN   TestBuildSearchSQL
=== RUN   TestBuildSearchSQL/Simple_equals_filter
    search_test.go:93: BuildSearchSQL() whereClause =  WHERE "status" = ?, want to contain status = ?
=== RUN   TestBuildSearchSQL/Multiple_AND_filters
    search_test.go:93: BuildSearchSQL() whereClause =  WHERE "status" = ? AND "priority" = ?, want to contain status = ?
=== RUN   TestBuildSearchSQL/Contains_filter_with_wildcard
    search_test.go:93: BuildSearchSQL() whereClause =  WHERE "title" LIKE ?, want to contain title LIKE ?
=== RUN   TestBuildSearchSQL/Greater_than_filter
    search_test.go:93: BuildSearchSQL() whereClause =  WHERE "qty_on_hand" > ?, want to contain qty_on_hand > ?
=== RUN   TestBuildSearchSQL/Between_filter
=== RUN   TestBuildSearchSQL/IN_filter
=== RUN   TestBuildSearchSQL/Multi-field_text_search
--- FAIL: TestBuildSearchSQL (0.00s)
    --- FAIL: TestBuildSearchSQL/Simple_equals_filter (0.00s)
    --- FAIL: TestBuildSearchSQL/Multiple_AND_filters (0.00s)
    --- FAIL: TestBuildSearchSQL/Contains_filter_with_wildcard (0.00s)
    --- FAIL: TestBuildSearchSQL/Greater_than_filter (0.00s)
    --- PASS: TestBuildSearchSQL/Between_filter (0.00s)
    --- PASS: TestBuildSearchSQL/IN_filter (0.00s)
    --- PASS: TestBuildSearchSQL/Multi-field_text_search (0.00s)
=== RUN   TestGetQuickFilters
=== RUN   TestGetQuickFilters/Parts_quick_filters
=== RUN   TestGetQuickFilters/Work_orders_quick_filters
=== RUN   TestGetQuickFilters/Inventory_quick_filters
=== RUN   TestGetQuickFilters/ECOs_quick_filters
=== RUN   TestGetQuickFilters/Unknown_entity_type
--- PASS: TestGetQuickFilters (0.00s)
    --- PASS: TestGetQuickFilters/Parts_quick_filters (0.00s)
    --- PASS: TestGetQuickFilters/Work_orders_quick_filters (0.00s)
    --- PASS: TestGetQuickFilters/Inventory_quick_filters (0.00s)
    --- PASS: TestGetQuickFilters/ECOs_quick_filters (0.00s)
    --- PASS: TestGetQuickFilters/Unknown_entity_type (0.00s)
=== RUN   TestParseSearchOperators
=== RUN   TestParseSearchOperators/Field_equals_operator
=== RUN   TestParseSearchOperators/Field_greater_than
=== RUN   TestParseSearchOperators/Field_less_than
=== RUN   TestParseSearchOperators/Multiple_operators
=== RUN   TestParseSearchOperators/No_operators
=== RUN   TestParseSearchOperators/Wildcard_in_value
--- PASS: TestParseSearchOperators (0.00s)
    --- PASS: TestParseSearchOperators/Field_equals_operator (0.00s)
    --- PASS: TestParseSearchOperators/Field_greater_than (0.00s)
    --- PASS: TestParseSearchOperators/Field_less_than (0.00s)
    --- PASS: TestParseSearchOperators/Multiple_operators (0.00s)
    --- PASS: TestParseSearchOperators/No_operators (0.00s)
    --- PASS: TestParseSearchOperators/Wildcard_in_value (0.00s)
=== RUN   TestInitSearchTables
--- PASS: TestInitSearchTables (0.01s)
=== RUN   TestSavedSearchWorkflow
--- PASS: TestSavedSearchWorkflow (0.01s)
=== RUN   TestAuthBypass_NoAuthProvided
=== RUN   TestAuthBypass_NoAuthProvided/GET_/api/v1/parts
=== RUN   TestAuthBypass_NoAuthProvided/POST_/api/v1/parts
=== RUN   TestAuthBypass_NoAuthProvided/GET_/api/v1/parts/123
=== RUN   TestAuthBypass_NoAuthProvided/PUT_/api/v1/parts/123
=== RUN   TestAuthBypass_NoAuthProvided/DELETE_/api/v1/parts/123
=== RUN   TestAuthBypass_NoAuthProvided/GET_/api/v1/ecos
=== RUN   TestAuthBypass_NoAuthProvided/POST_/api/v1/ecos
=== RUN   TestAuthBypass_NoAuthProvided/GET_/api/v1/ecos/1
=== RUN   TestAuthBypass_NoAuthProvided/PUT_/api/v1/ecos/1
=== RUN   TestAuthBypass_NoAuthProvided/GET_/api/v1/vendors
=== RUN   TestAuthBypass_NoAuthProvided/POST_/api/v1/vendors
=== RUN   TestAuthBypass_NoAuthProvided/GET_/api/v1/inventory
=== RUN   TestAuthBypass_NoAuthProvided/POST_/api/v1/inventory/transact
=== RUN   TestAuthBypass_NoAuthProvided/GET_/api/v1/pos
=== RUN   TestAuthBypass_NoAuthProvided/POST_/api/v1/pos
=== RUN   TestAuthBypass_NoAuthProvided/GET_/api/v1/workorders
=== RUN   TestAuthBypass_NoAuthProvided/POST_/api/v1/workorders
=== RUN   TestAuthBypass_NoAuthProvided/GET_/api/v1/docs
=== RUN   TestAuthBypass_NoAuthProvided/POST_/api/v1/docs
=== RUN   TestAuthBypass_NoAuthProvided/GET_/api/v1/ncrs
=== RUN   TestAuthBypass_NoAuthProvided/POST_/api/v1/ncrs
=== RUN   TestAuthBypass_NoAuthProvided/GET_/api/v1/capas
=== RUN   TestAuthBypass_NoAuthProvided/POST_/api/v1/capas
=== RUN   TestAuthBypass_NoAuthProvided/GET_/api/v1/rmas
=== RUN   TestAuthBypass_NoAuthProvided/POST_/api/v1/rmas
=== RUN   TestAuthBypass_NoAuthProvided/GET_/api/v1/quotes
=== RUN   TestAuthBypass_NoAuthProvided/POST_/api/v1/quotes
=== RUN   TestAuthBypass_NoAuthProvided/GET_/api/v1/devices
=== RUN   TestAuthBypass_NoAuthProvided/POST_/api/v1/devices
--- PASS: TestAuthBypass_NoAuthProvided (0.00s)
    --- PASS: TestAuthBypass_NoAuthProvided/GET_/api/v1/parts (0.00s)
    --- PASS: TestAuthBypass_NoAuthProvided/POST_/api/v1/parts (0.00s)
    --- PASS: TestAuthBypass_NoAuthProvided/GET_/api/v1/parts/123 (0.00s)
    --- PASS: TestAuthBypass_NoAuthProvided/PUT_/api/v1/parts/123 (0.00s)
    --- PASS: TestAuthBypass_NoAuthProvided/DELETE_/api/v1/parts/123 (0.00s)
    --- PASS: TestAuthBypass_NoAuthProvided/GET_/api/v1/ecos (0.00s)
    --- PASS: TestAuthBypass_NoAuthProvided/POST_/api/v1/ecos (0.00s)
    --- PASS: TestAuthBypass_NoAuthProvided/GET_/api/v1/ecos/1 (0.00s)
    --- PASS: TestAuthBypass_NoAuthProvided/PUT_/api/v1/ecos/1 (0.00s)
    --- PASS: TestAuthBypass_NoAuthProvided/GET_/api/v1/vendors (0.00s)
    --- PASS: TestAuthBypass_NoAuthProvided/POST_/api/v1/vendors (0.00s)
    --- PASS: TestAuthBypass_NoAuthProvided/GET_/api/v1/inventory (0.00s)
    --- PASS: TestAuthBypass_NoAuthProvided/POST_/api/v1/inventory/transact (0.00s)
    --- PASS: TestAuthBypass_NoAuthProvided/GET_/api/v1/pos (0.00s)
    --- PASS: TestAuthBypass_NoAuthProvided/POST_/api/v1/pos (0.00s)
    --- PASS: TestAuthBypass_NoAuthProvided/GET_/api/v1/workorders (0.00s)
    --- PASS: TestAuthBypass_NoAuthProvided/POST_/api/v1/workorders (0.00s)
    --- PASS: TestAuthBypass_NoAuthProvided/GET_/api/v1/docs (0.00s)
    --- PASS: TestAuthBypass_NoAuthProvided/POST_/api/v1/docs (0.00s)
    --- PASS: TestAuthBypass_NoAuthProvided/GET_/api/v1/ncrs (0.00s)
    --- PASS: TestAuthBypass_NoAuthProvided/POST_/api/v1/ncrs (0.00s)
    --- PASS: TestAuthBypass_NoAuthProvided/GET_/api/v1/capas (0.00s)
    --- PASS: TestAuthBypass_NoAuthProvided/POST_/api/v1/capas (0.00s)
    --- PASS: TestAuthBypass_NoAuthProvided/GET_/api/v1/rmas (0.00s)
    --- PASS: TestAuthBypass_NoAuthProvided/POST_/api/v1/rmas (0.00s)
    --- PASS: TestAuthBypass_NoAuthProvided/GET_/api/v1/quotes (0.00s)
    --- PASS: TestAuthBypass_NoAuthProvided/POST_/api/v1/quotes (0.00s)
    --- PASS: TestAuthBypass_NoAuthProvided/GET_/api/v1/devices (0.00s)
    --- PASS: TestAuthBypass_NoAuthProvided/POST_/api/v1/devices (0.00s)
=== RUN   TestAuthBypass_ExpiredSession
=== RUN   TestAuthBypass_ExpiredSession//api/v1/parts
=== RUN   TestAuthBypass_ExpiredSession//api/v1/ecos
=== RUN   TestAuthBypass_ExpiredSession//api/v1/vendors
=== RUN   TestAuthBypass_ExpiredSession//api/v1/inventory
=== RUN   TestAuthBypass_ExpiredSession//api/v1/workorders
--- PASS: TestAuthBypass_ExpiredSession (0.05s)
    --- PASS: TestAuthBypass_ExpiredSession//api/v1/parts (0.00s)
    --- PASS: TestAuthBypass_ExpiredSession//api/v1/ecos (0.00s)
    --- PASS: TestAuthBypass_ExpiredSession//api/v1/vendors (0.00s)
    --- PASS: TestAuthBypass_ExpiredSession//api/v1/inventory (0.00s)
    --- PASS: TestAuthBypass_ExpiredSession//api/v1/workorders (0.00s)
=== RUN   TestAuthBypass_InvalidSession
=== RUN   TestAuthBypass_InvalidSession/Token:_invalid-token-12345
=== RUN   TestAuthBypass_InvalidSession/Token:_forged-session-token
=== RUN   TestAuthBypass_InvalidSession/Token:_';_DROP_TABLE_sessions;_--
2026/02/20 14:41:14 net/http: invalid byte ';' in Cookie.Value; dropping invalid bytes
=== RUN   TestAuthBypass_InvalidSession/Token:_../../../etc/passwd
=== RUN   TestAuthBypass_InvalidSession/Token:_<script>alert('xss')</script>
=== RUN   TestAuthBypass_InvalidSession/Token:_
=== RUN   TestAuthBypass_InvalidSession/Token:_aaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
--- PASS: TestAuthBypass_InvalidSession (0.00s)
    --- PASS: TestAuthBypass_InvalidSession/Token:_invalid-token-12345 (0.00s)
    --- PASS: TestAuthBypass_InvalidSession/Token:_forged-session-token (0.00s)
    --- PASS: TestAuthBypass_InvalidSession/Token:_';_DROP_TABLE_sessions;_-- (0.00s)
    --- PASS: TestAuthBypass_InvalidSession/Token:_../../../etc/passwd (0.00s)
    --- PASS: TestAuthBypass_InvalidSession/Token:_<script>alert('xss')</script> (0.00s)
    --- PASS: TestAuthBypass_InvalidSession/Token:_ (0.00s)
    --- PASS: TestAuthBypass_InvalidSession/Token:_aaaaaaaaaaaaaaaaaaaaaaaaaaaaaa (0.00s)
=== RUN   TestAuthBypass_InactiveUser
    security_auth_bypass_test.go:308: Expected 403 Forbidden for inactive user, got 401
    security_auth_bypass_test.go:314: Expected error about deactivated account, got Unauthorized
--- FAIL: TestAuthBypass_InactiveUser (0.05s)
=== RUN   TestAuthBypass_CrossUserSession
    security_auth_bypass_test.go:350: Expected 200 with valid session, got 401
--- FAIL: TestAuthBypass_CrossUserSession (0.10s)
=== RUN   TestAuthBypass_AdminEndpoints
=== RUN   TestAuthBypass_AdminEndpoints/RegularUser_GET_/api/v1/users
=== RUN   TestAuthBypass_AdminEndpoints/Admin_GET_/api/v1/users
=== RUN   TestAuthBypass_AdminEndpoints/RegularUser_POST_/api/v1/users
=== RUN   TestAuthBypass_AdminEndpoints/Admin_POST_/api/v1/users
=== RUN   TestAuthBypass_AdminEndpoints/RegularUser_PUT_/api/v1/users/1
=== RUN   TestAuthBypass_AdminEndpoints/Admin_PUT_/api/v1/users/1
=== RUN   TestAuthBypass_AdminEndpoints/RegularUser_DELETE_/api/v1/users/1
=== RUN   TestAuthBypass_AdminEndpoints/Admin_DELETE_/api/v1/users/1
=== RUN   TestAuthBypass_AdminEndpoints/RegularUser_PUT_/api/v1/users/1/password
=== RUN   TestAuthBypass_AdminEndpoints/Admin_PUT_/api/v1/users/1/password
=== RUN   TestAuthBypass_AdminEndpoints/RegularUser_GET_/api/v1/apikeys
=== RUN   TestAuthBypass_AdminEndpoints/Admin_GET_/api/v1/apikeys
=== RUN   TestAuthBypass_AdminEndpoints/RegularUser_POST_/api/v1/apikeys
=== RUN   TestAuthBypass_AdminEndpoints/Admin_POST_/api/v1/apikeys
=== RUN   TestAuthBypass_AdminEndpoints/RegularUser_DELETE_/api/v1/apikeys/1
=== RUN   TestAuthBypass_AdminEndpoints/Admin_DELETE_/api/v1/apikeys/1
=== RUN   TestAuthBypass_AdminEndpoints/RegularUser_GET_/api/v1/api-keys
=== RUN   TestAuthBypass_AdminEndpoints/Admin_GET_/api/v1/api-keys
=== RUN   TestAuthBypass_AdminEndpoints/RegularUser_POST_/api/v1/api-keys
=== RUN   TestAuthBypass_AdminEndpoints/Admin_POST_/api/v1/api-keys
=== RUN   TestAuthBypass_AdminEndpoints/RegularUser_GET_/api/v1/email/config
=== RUN   TestAuthBypass_AdminEndpoints/Admin_GET_/api/v1/email/config
=== RUN   TestAuthBypass_AdminEndpoints/RegularUser_PUT_/api/v1/email/config
=== RUN   TestAuthBypass_AdminEndpoints/Admin_PUT_/api/v1/email/config
--- PASS: TestAuthBypass_AdminEndpoints (0.10s)
    --- PASS: TestAuthBypass_AdminEndpoints/RegularUser_GET_/api/v1/users (0.00s)
    --- PASS: TestAuthBypass_AdminEndpoints/Admin_GET_/api/v1/users (0.00s)
    --- PASS: TestAuthBypass_AdminEndpoints/RegularUser_POST_/api/v1/users (0.00s)
    --- PASS: TestAuthBypass_AdminEndpoints/Admin_POST_/api/v1/users (0.00s)
    --- PASS: TestAuthBypass_AdminEndpoints/RegularUser_PUT_/api/v1/users/1 (0.00s)
    --- PASS: TestAuthBypass_AdminEndpoints/Admin_PUT_/api/v1/users/1 (0.00s)
    --- PASS: TestAuthBypass_AdminEndpoints/RegularUser_DELETE_/api/v1/users/1 (0.00s)
    --- PASS: TestAuthBypass_AdminEndpoints/Admin_DELETE_/api/v1/users/1 (0.00s)
    --- PASS: TestAuthBypass_AdminEndpoints/RegularUser_PUT_/api/v1/users/1/password (0.00s)
    --- PASS: TestAuthBypass_AdminEndpoints/Admin_PUT_/api/v1/users/1/password (0.00s)
    --- PASS: TestAuthBypass_AdminEndpoints/RegularUser_GET_/api/v1/apikeys (0.00s)
    --- PASS: TestAuthBypass_AdminEndpoints/Admin_GET_/api/v1/apikeys (0.00s)
    --- PASS: TestAuthBypass_AdminEndpoints/RegularUser_POST_/api/v1/apikeys (0.00s)
    --- PASS: TestAuthBypass_AdminEndpoints/Admin_POST_/api/v1/apikeys (0.00s)
    --- PASS: TestAuthBypass_AdminEndpoints/RegularUser_DELETE_/api/v1/apikeys/1 (0.00s)
    --- PASS: TestAuthBypass_AdminEndpoints/Admin_DELETE_/api/v1/apikeys/1 (0.00s)
    --- PASS: TestAuthBypass_AdminEndpoints/RegularUser_GET_/api/v1/api-keys (0.00s)
    --- PASS: TestAuthBypass_AdminEndpoints/Admin_GET_/api/v1/api-keys (0.00s)
    --- PASS: TestAuthBypass_AdminEndpoints/RegularUser_POST_/api/v1/api-keys (0.00s)
    --- PASS: TestAuthBypass_AdminEndpoints/Admin_POST_/api/v1/api-keys (0.00s)
    --- PASS: TestAuthBypass_AdminEndpoints/RegularUser_GET_/api/v1/email/config (0.00s)
    --- PASS: TestAuthBypass_AdminEndpoints/Admin_GET_/api/v1/email/config (0.00s)
    --- PASS: TestAuthBypass_AdminEndpoints/RegularUser_PUT_/api/v1/email/config (0.00s)
    --- PASS: TestAuthBypass_AdminEndpoints/Admin_PUT_/api/v1/email/config (0.00s)
=== RUN   TestAuthBypass_InvalidBearerToken
=== RUN   TestAuthBypass_InvalidBearerToken/Key:_invalid-api-key
=== RUN   TestAuthBypass_InvalidBearerToken/Key:_Bearer_token
=== RUN   TestAuthBypass_InvalidBearerToken/Key:_zrp_invalid_key
=== RUN   TestAuthBypass_InvalidBearerToken/Key:_
=== RUN   TestAuthBypass_InvalidBearerToken/Key:_aaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
--- PASS: TestAuthBypass_InvalidBearerToken (0.00s)
    --- PASS: TestAuthBypass_InvalidBearerToken/Key:_invalid-api-key (0.00s)
    --- PASS: TestAuthBypass_InvalidBearerToken/Key:_Bearer_token (0.00s)
    --- PASS: TestAuthBypass_InvalidBearerToken/Key:_zrp_invalid_key (0.00s)
    --- PASS: TestAuthBypass_InvalidBearerToken/Key:_ (0.00s)
    --- PASS: TestAuthBypass_InvalidBearerToken/Key:_aaaaaaaaaaaaaaaaaaaaaaaaaaaaaa (0.00s)
=== RUN   TestAuthBypass_ValidBearerToken
--- PASS: TestAuthBypass_ValidBearerToken (0.00s)
=== RUN   TestAuthBypass_DisabledAPIKey
--- PASS: TestAuthBypass_DisabledAPIKey (0.00s)
=== RUN   TestAuthBypass_OpenAPIExemption
--- PASS: TestAuthBypass_OpenAPIExemption (0.00s)
=== RUN   TestAuthBypass_SessionSlidingWindow
    security_auth_bypass_test.go:591: Expected 200, got 401
    security_auth_bypass_test.go:611: Expected session expiry to be updated by at least 1 second (sliding window), got 0.00 seconds
--- FAIL: TestAuthBypass_SessionSlidingWindow (1.55s)
=== RUN   TestAuthBypass_SQLInjectionAttempts
=== RUN   TestAuthBypass_SQLInjectionAttempts/SQLi:_'_OR_'1'='1
=== RUN   TestAuthBypass_SQLInjectionAttempts/SQLi:_';_DROP_TABLE_sessions;_--
2026/02/20 14:41:16 net/http: invalid byte ';' in Cookie.Value; dropping invalid bytes
=== RUN   TestAuthBypass_SQLInjectionAttempts/SQLi:_admin'--
=== RUN   TestAuthBypass_SQLInjectionAttempts/SQLi:_'_UNION_SELECT_*_FROM_users--
=== RUN   TestAuthBypass_SQLInjectionAttempts/SQLi:_1'_OR_1=1--
--- PASS: TestAuthBypass_SQLInjectionAttempts (0.00s)
    --- PASS: TestAuthBypass_SQLInjectionAttempts/SQLi:_'_OR_'1'='1 (0.00s)
    --- PASS: TestAuthBypass_SQLInjectionAttempts/SQLi:_';_DROP_TABLE_sessions;_-- (0.00s)
    --- PASS: TestAuthBypass_SQLInjectionAttempts/SQLi:_admin'-- (0.00s)
    --- PASS: TestAuthBypass_SQLInjectionAttempts/SQLi:_'_UNION_SELECT_*_FROM_users-- (0.00s)
    --- PASS: TestAuthBypass_SQLInjectionAttempts/SQLi:_1'_OR_1=1-- (0.00s)
=== RUN   TestFileUploadSizeLimits
=== RUN   TestFileUploadSizeLimits/Small_file_(1KB)
=== RUN   TestFileUploadSizeLimits/Medium_file_(10MB)
=== RUN   TestFileUploadSizeLimits/Large_file_(101MB)
=== RUN   TestFileUploadSizeLimits/Zero_byte_file
--- PASS: TestFileUploadSizeLimits (0.13s)
    --- PASS: TestFileUploadSizeLimits/Small_file_(1KB) (0.00s)
    --- PASS: TestFileUploadSizeLimits/Medium_file_(10MB) (0.04s)
    --- PASS: TestFileUploadSizeLimits/Large_file_(101MB) (0.09s)
    --- PASS: TestFileUploadSizeLimits/Zero_byte_file (0.00s)
=== RUN   TestDangerousFileExtensions
=== RUN   TestDangerousFileExtensions/Reject_malicious.exe
=== RUN   TestDangerousFileExtensions/Reject_script.bat
=== RUN   TestDangerousFileExtensions/Reject_shell.sh
=== RUN   TestDangerousFileExtensions/Reject_command.cmd
=== RUN   TestDangerousFileExtensions/Reject_program.com
=== RUN   TestDangerousFileExtensions/Reject_saver.scr
=== RUN   TestDangerousFileExtensions/Reject_script.vbs
=== RUN   TestDangerousFileExtensions/Reject_code.js
=== RUN   TestDangerousFileExtensions/Reject_archive.jar
=== RUN   TestDangerousFileExtensions/Reject_program.app
--- PASS: TestDangerousFileExtensions (0.00s)
    --- PASS: TestDangerousFileExtensions/Reject_malicious.exe (0.00s)
    --- PASS: TestDangerousFileExtensions/Reject_script.bat (0.00s)
    --- PASS: TestDangerousFileExtensions/Reject_shell.sh (0.00s)
    --- PASS: TestDangerousFileExtensions/Reject_command.cmd (0.00s)
    --- PASS: TestDangerousFileExtensions/Reject_program.com (0.00s)
    --- PASS: TestDangerousFileExtensions/Reject_saver.scr (0.00s)
    --- PASS: TestDangerousFileExtensions/Reject_script.vbs (0.00s)
    --- PASS: TestDangerousFileExtensions/Reject_code.js (0.00s)
    --- PASS: TestDangerousFileExtensions/Reject_archive.jar (0.00s)
    --- PASS: TestDangerousFileExtensions/Reject_program.app (0.00s)
=== RUN   TestPathTraversalInFilenames
=== RUN   TestPathTraversalInFilenames/Block_../../etc/passwd
=== RUN   TestPathTraversalInFilenames/Block_..\..\windows\system32\config\sam
=== RUN   TestPathTraversalInFilenames/Block_../../../root/.ssh/id_rsa
=== RUN   TestPathTraversalInFilenames/Block_test/../../../etc/shadow
=== RUN   TestPathTraversalInFilenames/Block_test/../../secret.key
=== RUN   TestPathTraversalInFilenames/Block_/etc/passwd
=== RUN   TestPathTraversalInFilenames/Block_C:\Windows\System32\config\SAM
--- PASS: TestPathTraversalInFilenames (0.00s)
    --- PASS: TestPathTraversalInFilenames/Block_../../etc/passwd (0.00s)
    --- PASS: TestPathTraversalInFilenames/Block_..\..\windows\system32\config\sam (0.00s)
    --- PASS: TestPathTraversalInFilenames/Block_../../../root/.ssh/id_rsa (0.00s)
    --- PASS: TestPathTraversalInFilenames/Block_test/../../../etc/shadow (0.00s)
    --- PASS: TestPathTraversalInFilenames/Block_test/../../secret.key (0.00s)
    --- PASS: TestPathTraversalInFilenames/Block_/etc/passwd (0.00s)
    --- PASS: TestPathTraversalInFilenames/Block_C:\Windows\System32\config\SAM (0.00s)
=== RUN   TestCSVImportSizeLimits
=== RUN   TestCSVImportSizeLimits/Small_CSV_(10_rows)
audit log error: SQL logic error: table audit_log has no column named module (1)
=== RUN   TestCSVImportSizeLimits/Medium_CSV_(1000_rows)
audit log error: SQL logic error: table audit_log has no column named module (1)
=== RUN   TestCSVImportSizeLimits/Large_CSV_(10000_rows)
audit log error: SQL logic error: table audit_log has no column named module (1)
--- PASS: TestCSVImportSizeLimits (0.09s)
    --- PASS: TestCSVImportSizeLimits/Small_CSV_(10_rows) (0.00s)
    --- PASS: TestCSVImportSizeLimits/Medium_CSV_(1000_rows) (0.01s)
    --- PASS: TestCSVImportSizeLimits/Large_CSV_(10000_rows) (0.08s)
=== RUN   TestMaliciousFilenameChars
=== RUN   TestMaliciousFilenameChars/Sanitize:_file;rm_-rf.txt
=== RUN   TestMaliciousFilenameChars/Sanitize:_file|ls.txt
=== RUN   TestMaliciousFilenameChars/Sanitize:_file&whoami&.txt
--- PASS: TestMaliciousFilenameChars (0.00s)
    --- PASS: TestMaliciousFilenameChars/Sanitize:_file;rm_-rf.txt (0.00s)
    --- PASS: TestMaliciousFilenameChars/Sanitize:_file|ls.txt (0.00s)
    --- PASS: TestMaliciousFilenameChars/Sanitize:_file&whoami&.txt (0.00s)
=== RUN   TestSafeFileExtensions
=== RUN   TestSafeFileExtensions/Allow_document.pdf
=== RUN   TestSafeFileExtensions/Allow_spreadsheet.xlsx
=== RUN   TestSafeFileExtensions/Allow_image.png
=== RUN   TestSafeFileExtensions/Allow_archive.zip
=== RUN   TestSafeFileExtensions/Allow_notes.txt
=== RUN   TestSafeFileExtensions/Allow_data.csv
=== RUN   TestSafeFileExtensions/Allow_drawing.dxf
--- PASS: TestSafeFileExtensions (0.00s)
    --- PASS: TestSafeFileExtensions/Allow_document.pdf (0.00s)
    --- PASS: TestSafeFileExtensions/Allow_spreadsheet.xlsx (0.00s)
    --- PASS: TestSafeFileExtensions/Allow_image.png (0.00s)
    --- PASS: TestSafeFileExtensions/Allow_archive.zip (0.00s)
    --- PASS: TestSafeFileExtensions/Allow_notes.txt (0.00s)
    --- PASS: TestSafeFileExtensions/Allow_data.csv (0.00s)
    --- PASS: TestSafeFileExtensions/Allow_drawing.dxf (0.00s)
=== RUN   TestPasswordHashing_BCryptUsed
    security_password_test.go:45: Failed to create user: 500 - {"error":"SQL logic error: table users has no column named email (1)"}
--- FAIL: TestPasswordHashing_BCryptUsed (0.10s)
=== RUN   TestPasswordComplexity_WeakPasswordsRejected
=== RUN   TestPasswordComplexity_WeakPasswordsRejected/123456
    security_password_test.go:106: âœ“ Weak password rejected
=== RUN   TestPasswordComplexity_WeakPasswordsRejected/password
    security_password_test.go:106: âœ“ Weak password rejected
=== RUN   TestPasswordComplexity_WeakPasswordsRejected/short
    security_password_test.go:106: âœ“ Weak password rejected
=== RUN   TestPasswordComplexity_WeakPasswordsRejected/12345678901
    security_password_test.go:106: âœ“ Weak password rejected
=== RUN   TestPasswordComplexity_WeakPasswordsRejected/abcdefghabcd
    security_password_test.go:106: âœ“ Weak password rejected
--- PASS: TestPasswordComplexity_WeakPasswordsRejected (0.05s)
    --- PASS: TestPasswordComplexity_WeakPasswordsRejected/123456 (0.00s)
    --- PASS: TestPasswordComplexity_WeakPasswordsRejected/password (0.00s)
    --- PASS: TestPasswordComplexity_WeakPasswordsRejected/short (0.00s)
    --- PASS: TestPasswordComplexity_WeakPasswordsRejected/12345678901 (0.00s)
    --- PASS: TestPasswordComplexity_WeakPasswordsRejected/abcdefghabcd (0.00s)
=== RUN   TestPasswordComplexity_StrongPasswordsAccepted
=== RUN   TestPasswordComplexity_StrongPasswordsAccepted/SecurePass123!
    security_password_test.go:144: Strong password rejected: SecurePass123! - 500 - {"error":"SQL logic error: table users has no column named email (1)"}
=== RUN   TestPasswordComplexity_StrongPasswordsAccepted/MyP@ssw0rd2024
    security_password_test.go:144: Strong password rejected: MyP@ssw0rd2024 - 500 - {"error":"SQL logic error: table users has no column named email (1)"}
=== RUN   TestPasswordComplexity_StrongPasswordsAccepted/C0mpl3x&Secure
    security_password_test.go:144: Strong password rejected: C0mpl3x&Secure - 500 - {"error":"SQL logic error: table users has no column named email (1)"}
--- FAIL: TestPasswordComplexity_StrongPasswordsAccepted (0.20s)
    --- FAIL: TestPasswordComplexity_StrongPasswordsAccepted/SecurePass123! (0.05s)
    --- FAIL: TestPasswordComplexity_StrongPasswordsAccepted/MyP@ssw0rd2024 (0.05s)
    --- FAIL: TestPasswordComplexity_StrongPasswordsAccepted/C0mpl3x&Secure (0.05s)
=== RUN   TestBruteForceProtection_AccountLockout
    security_password_test.go:200: âœ“ Account locked after 10 failed attempts (status: 429)
--- PASS: TestBruteForceProtection_AccountLockout (0.42s)
=== RUN   TestPasswordHistory_PreventReuse
    security_password_test.go:241: Password change failed: 401 - {"error":"Unauthorized"}
--- FAIL: TestPasswordHistory_PreventReuse (0.06s)
=== RUN   TestPasswordResetToken_Expiration
    security_password_test.go:303: Failed to create token: SQL logic error: no such table: password_reset_tokens (1)
--- FAIL: TestPasswordResetToken_Expiration (0.05s)
=== RUN   TestPasswordResetToken_SingleUse
    security_password_test.go:346: Failed to generate token: SQL logic error: no such table: password_reset_tokens (1)
--- FAIL: TestPasswordResetToken_SingleUse (0.05s)
=== RUN   TestRateLimit_LoginEndpoint
2026/02/20 14:41:17 POST /auth/login 10.5Âµs
    security_rate_limit_test.go:59: Request 1: Missing Retry-After header
    security_rate_limit_test.go:68: Request 1: Expected error code RATE_LIMIT_EXCEEDED, got <nil>
2026/02/20 14:41:17 POST /auth/login 1.958Âµs
    security_rate_limit_test.go:59: Request 2: Missing Retry-After header
    security_rate_limit_test.go:68: Request 2: Expected error code RATE_LIMIT_EXCEEDED, got <nil>
2026/02/20 14:41:17 POST /auth/login 1.791Âµs
    security_rate_limit_test.go:59: Request 3: Missing Retry-After header
    security_rate_limit_test.go:68: Request 3: Expected error code RATE_LIMIT_EXCEEDED, got <nil>
2026/02/20 14:41:17 POST /auth/login 1.834Âµs
    security_rate_limit_test.go:59: Request 4: Missing Retry-After header
    security_rate_limit_test.go:68: Request 4: Expected error code RATE_LIMIT_EXCEEDED, got <nil>
2026/02/20 14:41:17 POST /auth/login 2Âµs
    security_rate_limit_test.go:59: Request 5: Missing Retry-After header
    security_rate_limit_test.go:68: Request 5: Expected error code RATE_LIMIT_EXCEEDED, got <nil>
    security_rate_limit_test.go:75: Expected 5 successful requests, got 0
    security_rate_limit_test.go:78: Expected 5 rate-limited requests, got 10
--- FAIL: TestRateLimit_LoginEndpoint (0.05s)
=== RUN   TestRateLimit_429Response
2026/02/20 14:41:17 POST /auth/login 29.458Âµs
2026/02/20 14:41:17 POST /auth/login 21.5Âµs
2026/02/20 14:41:17 POST /auth/login 23.709Âµs
2026/02/20 14:41:17 POST /auth/login 17.833Âµs
2026/02/20 14:41:17 POST /auth/login 16.5Âµs
--- PASS: TestRateLimit_429Response (0.00s)
=== RUN   TestRateLimit_GlobalAPILimit
2026/02/20 14:41:17 GET /api/v1/dashboard 14.375Âµs
2026/02/20 14:41:17 GET /api/v1/dashboard 8.459Âµs
2026/02/20 14:41:17 GET /api/v1/dashboard 10.333Âµs
2026/02/20 14:41:17 GET /api/v1/dashboard 7.875Âµs
2026/02/20 14:41:17 GET /api/v1/dashboard 7.75Âµs
2026/02/20 14:41:17 GET /api/v1/dashboard 7.458Âµs
2026/02/20 14:41:17 GET /api/v1/dashboard 7.542Âµs
2026/02/20 14:41:17 GET /api/v1/dashboard 10.791Âµs
2026/02/20 14:41:17 GET /api/v1/dashboard 7.708Âµs
2026/02/20 14:41:17 GET /api/v1/dashboard 7.333Âµs
2026/02/20 14:41:17 GET /api/v1/dashboard 6.375Âµs
2026/02/20 14:41:17 GET /api/v1/dashboard 10.875Âµs
2026/02/20 14:41:17 GET /api/v1/dashboard 7.208Âµs
2026/02/20 14:41:17 GET /api/v1/dashboard 7.084Âµs
2026/02/20 14:41:17 GET /api/v1/dashboard 7.25Âµs
2026/02/20 14:41:17 GET /api/v1/dashboard 7.084Âµs
2026/02/20 14:41:17 GET /api/v1/dashboard 6.125Âµs
2026/02/20 14:41:17 GET /api/v1/dashboard 7.417Âµs
2026/02/20 14:41:17 GET /api/v1/dashboard 7.458Âµs
2026/02/20 14:41:17 GET /api/v1/dashboard 7.709Âµs
2026/02/20 14:41:17 GET /api/v1/dashboard 7.459Âµs
2026/02/20 14:41:17 GET /api/v1/dashboard 10.625Âµs
2026/02/20 14:41:17 GET /api/v1/dashboard 7.333Âµs
2026/02/20 14:41:17 GET /api/v1/dashboard 7.584Âµs
2026/02/20 14:41:17 GET /api/v1/dashboard 10.875Âµs
2026/02/20 14:41:17 GET /api/v1/dashboard 11.542Âµs
2026/02/20 14:41:17 GET /api/v1/dashboard 5.959Âµs
2026/02/20 14:41:17 GET /api/v1/dashboard 7Âµs
2026/02/20 14:41:17 GET /api/v1/dashboard 7.375Âµs
2026/02/20 14:41:17 GET /api/v1/dashboard 6.667Âµs
2026/02/20 14:41:17 GET /api/v1/dashboard 7.584Âµs
2026/02/20 14:41:17 GET /api/v1/dashboard 7.333Âµs
2026/02/20 14:41:17 GET /api/v1/dashboard 7.583Âµs
2026/02/20 14:41:17 GET /api/v1/dashboard 10.375Âµs
2026/02/20 14:41:17 GET /api/v1/dashboard 11.458Âµs
2026/02/20 14:41:17 GET /api/v1/dashboard 12.208Âµs
2026/02/20 14:41:17 GET /api/v1/dashboard 6Âµs
2026/02/20 14:41:17 GET /api/v1/dashboard 7.333Âµs
2026/02/20 14:41:17 GET /api/v1/dashboard 15.542Âµs
2026/02/20 14:41:17 GET /api/v1/dashboard 11Âµs
2026/02/20 14:41:17 GET /api/v1/dashboard 9Âµs
2026/02/20 14:41:17 GET /api/v1/dashboard 9.5Âµs
2026/02/20 14:41:17 GET /api/v1/dashboard 11.125Âµs
2026/02/20 14:41:17 GET /api/v1/dashboard 7.5Âµs
2026/02/20 14:41:17 GET /api/v1/dashboard 8.625Âµs
2026/02/20 14:41:17 GET /api/v1/dashboard 7.208Âµs
2026/02/20 14:41:17 GET /api/v1/dashboard 5.958Âµs
2026/02/20 14:41:17 GET /api/v1/dashboard 10.458Âµs
2026/02/20 14:41:17 GET /api/v1/dashboard 11.75Âµs
2026/02/20 14:41:17 GET /api/v1/dashboard 7.834Âµs
2026/02/20 14:41:17 GET /api/v1/dashboard 11.375Âµs
2026/02/20 14:41:17 GET /api/v1/dashboard 7.833Âµs
2026/02/20 14:41:17 GET /api/v1/dashboard 11.791Âµs
2026/02/20 14:41:17 GET /api/v1/dashboard 7.375Âµs
2026/02/20 14:41:17 GET /api/v1/dashboard 7.458Âµs
2026/02/20 14:41:17 GET /api/v1/dashboard 6.792Âµs
2026/02/20 14:41:17 GET /api/v1/dashboard 7.375Âµs
2026/02/20 14:41:17 GET /api/v1/dashboard 6.833Âµs
2026/02/20 14:41:17 GET /api/v1/dashboard 7.167Âµs
2026/02/20 14:41:17 GET /api/v1/dashboard 10.709Âµs
2026/02/20 14:41:17 GET /api/v1/dashboard 11.583Âµs
2026/02/20 14:41:17 GET /api/v1/dashboard 7.625Âµs
2026/02/20 14:41:17 GET /api/v1/dashboard 7.459Âµs
2026/02/20 14:41:17 GET /api/v1/dashboard 7.459Âµs
2026/02/20 14:41:17 GET /api/v1/dashboard 7.209Âµs
2026/02/20 14:41:17 GET /api/v1/dashboard 7.542Âµs
2026/02/20 14:41:17 GET /api/v1/dashboard 7.417Âµs
2026/02/20 14:41:17 GET /api/v1/dashboard 10.5Âµs
2026/02/20 14:41:17 GET /api/v1/dashboard 5.834Âµs
2026/02/20 14:41:17 GET /api/v1/dashboard 7.166Âµs
2026/02/20 14:41:17 GET /api/v1/dashboard 7.583Âµs
2026/02/20 14:41:17 GET /api/v1/dashboard 7.333Âµs
2026/02/20 14:41:17 GET /api/v1/dashboard 7.458Âµs
2026/02/20 14:41:17 GET /api/v1/dashboard 7.5Âµs
2026/02/20 14:41:17 GET /api/v1/dashboard 7.458Âµs
2026/02/20 14:41:17 GET /api/v1/dashboard 7.417Âµs
2026/02/20 14:41:17 GET /api/v1/dashboard 7.25Âµs
2026/02/20 14:41:17 GET /api/v1/dashboard 7.875Âµs
2026/02/20 14:41:17 GET /api/v1/dashboard 7.875Âµs
2026/02/20 14:41:17 GET /api/v1/dashboard 10.458Âµs
2026/02/20 14:41:17 GET /api/v1/dashboard 8Âµs
2026/02/20 14:41:17 GET /api/v1/dashboard 7.541Âµs
2026/02/20 14:41:17 GET /api/v1/dashboard 7.959Âµs
2026/02/20 14:41:17 GET /api/v1/dashboard 7Âµs
2026/02/20 14:41:17 GET /api/v1/dashboard 6.292Âµs
2026/02/20 14:41:17 GET /api/v1/dashboard 10.084Âµs
2026/02/20 14:41:17 GET /api/v1/dashboard 7.583Âµs
2026/02/20 14:41:17 GET /api/v1/dashboard 7.542Âµs
2026/02/20 14:41:17 GET /api/v1/dashboard 7.125Âµs
2026/02/20 14:41:17 GET /api/v1/dashboard 6.083Âµs
2026/02/20 14:41:17 GET /api/v1/dashboard 7.167Âµs
2026/02/20 14:41:17 GET /api/v1/dashboard 7.084Âµs
2026/02/20 14:41:17 GET /api/v1/dashboard 7.042Âµs
2026/02/20 14:41:17 GET /api/v1/dashboard 10.959Âµs
2026/02/20 14:41:17 GET /api/v1/dashboard 11.083Âµs
2026/02/20 14:41:17 GET /api/v1/dashboard 7.125Âµs
2026/02/20 14:41:17 GET /api/v1/dashboard 7.75Âµs
2026/02/20 14:41:17 GET /api/v1/dashboard 7.208Âµs
2026/02/20 14:41:17 GET /api/v1/dashboard 7.458Âµs
2026/02/20 14:41:17 GET /api/v1/dashboard 6.208Âµs
--- PASS: TestRateLimit_GlobalAPILimit (0.05s)
=== RUN   TestRateLimit_Headers
2026/02/20 14:41:17 POST /auth/login 37.5Âµs
--- PASS: TestRateLimit_Headers (0.00s)
=== RUN   TestRateLimit_ResetAfterWindow
2026/02/20 14:41:17 POST /auth/login 33.167Âµs
2026/02/20 14:41:17 POST /auth/login 19.75Âµs
2026/02/20 14:41:17 POST /auth/login 19.208Âµs
2026/02/20 14:41:17 POST /auth/login 19.584Âµs
2026/02/20 14:41:17 POST /auth/login 19.25Âµs
    security_rate_limit_test.go:239: Waiting 65 seconds for rate limit window to reset...
